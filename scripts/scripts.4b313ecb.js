!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)}(function(a){function b(b,d){var e,f,g,h=b.nodeName.toLowerCase();return"area"===h?(e=b.parentNode,f=e.name,b.href&&f&&"map"===e.nodeName.toLowerCase()?(g=a("img[usemap='#"+f+"']")[0],!!g&&c(g)):!1):(/^(input|select|textarea|button|object)$/.test(h)?!b.disabled:"a"===h?b.href||d:d)&&c(b)}function c(b){return a.expr.filters.visible(b)&&!a(b).parents().addBack().filter(function(){return"hidden"===a.css(this,"visibility")}).length}a.ui=a.ui||{},a.extend(a.ui,{version:"1.11.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),a.fn.extend({scrollParent:function(b){var c=this.css("position"),d="absolute"===c,e=b?/(auto|scroll|hidden)/:/(auto|scroll)/,f=this.parents().filter(function(){var b=a(this);return d&&"static"===b.css("position")?!1:e.test(b.css("overflow")+b.css("overflow-y")+b.css("overflow-x"))}).eq(0);return"fixed"!==c&&f.length?f:a(this[0].ownerDocument||document)},uniqueId:function(){var a=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++a)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&a(this).removeAttr("id")})}}),a.extend(a.expr[":"],{data:a.expr.createPseudo?a.expr.createPseudo(function(b){return function(c){return!!a.data(c,b)}}):function(b,c,d){return!!a.data(b,d[3])},focusable:function(c){return b(c,!isNaN(a.attr(c,"tabindex")))},tabbable:function(c){var d=a.attr(c,"tabindex"),e=isNaN(d);return(e||d>=0)&&b(c,!e)}}),a("<a>").outerWidth(1).jquery||a.each(["Width","Height"],function(b,c){function d(b,c,d,f){return a.each(e,function(){c-=parseFloat(a.css(b,"padding"+this))||0,d&&(c-=parseFloat(a.css(b,"border"+this+"Width"))||0),f&&(c-=parseFloat(a.css(b,"margin"+this))||0)}),c}var e="Width"===c?["Left","Right"]:["Top","Bottom"],f=c.toLowerCase(),g={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+c]=function(b){return void 0===b?g["inner"+c].call(this):this.each(function(){a(this).css(f,d(this,b)+"px")})},a.fn["outer"+c]=function(b,e){return"number"!=typeof b?g["outer"+c].call(this,b):this.each(function(){a(this).css(f,d(this,b,!0,e)+"px")})}}),a.fn.addBack||(a.fn.addBack=function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}),a("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(a.fn.removeData=function(b){return function(c){return arguments.length?b.call(this,a.camelCase(c)):b.call(this)}}(a.fn.removeData)),a.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),a.fn.extend({focus:function(b){return function(c,d){return"number"==typeof c?this.each(function(){var b=this;setTimeout(function(){a(b).focus(),d&&d.call(b)},c)}):b.apply(this,arguments)}}(a.fn.focus),disableSelection:function(){var a="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(a+".ui-disableSelection",function(a){a.preventDefault()})}}(),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(b){if(void 0!==b)return this.css("zIndex",b);if(this.length)for(var c,d,e=a(this[0]);e.length&&e[0]!==document;){if(c=e.css("position"),("absolute"===c||"relative"===c||"fixed"===c)&&(d=parseInt(e.css("zIndex"),10),!isNaN(d)&&0!==d))return d;e=e.parent()}return 0}}),a.ui.plugin={add:function(b,c,d){var e,f=a.ui[b].prototype;for(e in d)f.plugins[e]=f.plugins[e]||[],f.plugins[e].push([c,d[e]])},call:function(a,b,c,d){var e,f=a.plugins[b];if(f&&(d||a.element[0].parentNode&&11!==a.element[0].parentNode.nodeType))for(e=0;e<f.length;e++)a.options[f[e][0]]&&f[e][1].apply(a.element,c)}};var d=0,e=Array.prototype.slice;a.cleanData=function(b){return function(c){var d,e,f;for(f=0;null!=(e=c[f]);f++)try{d=a._data(e,"events"),d&&d.remove&&a(e).triggerHandler("remove")}catch(g){}b(c)}}(a.cleanData),a.widget=function(b,c,d){var e,f,g,h,i={},j=b.split(".")[0];return b=b.split(".")[1],e=j+"-"+b,d||(d=c,c=a.Widget),a.expr[":"][e.toLowerCase()]=function(b){return!!a.data(b,e)},a[j]=a[j]||{},f=a[j][b],g=a[j][b]=function(a,b){return this._createWidget?void(arguments.length&&this._createWidget(a,b)):new g(a,b)},a.extend(g,f,{version:d.version,_proto:a.extend({},d),_childConstructors:[]}),h=new c,h.options=a.widget.extend({},h.options),a.each(d,function(b,d){return a.isFunction(d)?void(i[b]=function(){var a=function(){return c.prototype[b].apply(this,arguments)},e=function(a){return c.prototype[b].apply(this,a)};return function(){var b,c=this._super,f=this._superApply;return this._super=a,this._superApply=e,b=d.apply(this,arguments),this._super=c,this._superApply=f,b}}()):void(i[b]=d)}),g.prototype=a.widget.extend(h,{widgetEventPrefix:f?h.widgetEventPrefix||b:b},i,{constructor:g,namespace:j,widgetName:b,widgetFullName:e}),f?(a.each(f._childConstructors,function(b,c){var d=c.prototype;a.widget(d.namespace+"."+d.widgetName,g,c._proto)}),delete f._childConstructors):c._childConstructors.push(g),a.widget.bridge(b,g),g},a.widget.extend=function(b){for(var c,d,f=e.call(arguments,1),g=0,h=f.length;h>g;g++)for(c in f[g])d=f[g][c],f[g].hasOwnProperty(c)&&void 0!==d&&(a.isPlainObject(d)?b[c]=a.isPlainObject(b[c])?a.widget.extend({},b[c],d):a.widget.extend({},d):b[c]=d);return b},a.widget.bridge=function(b,c){var d=c.prototype.widgetFullName||b;a.fn[b]=function(f){var g="string"==typeof f,h=e.call(arguments,1),i=this;return g?this.each(function(){var c,e=a.data(this,d);return"instance"===f?(i=e,!1):e?a.isFunction(e[f])&&"_"!==f.charAt(0)?(c=e[f].apply(e,h),c!==e&&void 0!==c?(i=c&&c.jquery?i.pushStack(c.get()):c,!1):void 0):a.error("no such method '"+f+"' for "+b+" widget instance"):a.error("cannot call methods on "+b+" prior to initialization; attempted to call method '"+f+"'")}):(h.length&&(f=a.widget.extend.apply(null,[f].concat(h))),this.each(function(){var b=a.data(this,d);b?(b.option(f||{}),b._init&&b._init()):a.data(this,d,new c(f,this))})),i}},a.Widget=function(){},a.Widget._childConstructors=[],a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(b,c){c=a(c||this.defaultElement||this)[0],this.element=a(c),this.uuid=d++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=a(),this.hoverable=a(),this.focusable=a(),c!==this&&(a.data(c,this.widgetFullName,this),this._on(!0,this.element,{remove:function(a){a.target===c&&this.destroy()}}),this.document=a(c.style?c.ownerDocument:c.document||c),this.window=a(this.document[0].defaultView||this.document[0].parentWindow)),this.options=a.widget.extend({},this.options,this._getCreateOptions(),b),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:a.noop,_getCreateEventData:a.noop,_create:a.noop,_init:a.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(a.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:a.noop,widget:function(){return this.element},option:function(b,c){var d,e,f,g=b;if(0===arguments.length)return a.widget.extend({},this.options);if("string"==typeof b)if(g={},d=b.split("."),b=d.shift(),d.length){for(e=g[b]=a.widget.extend({},this.options[b]),f=0;f<d.length-1;f++)e[d[f]]=e[d[f]]||{},e=e[d[f]];if(b=d.pop(),1===arguments.length)return void 0===e[b]?null:e[b];e[b]=c}else{if(1===arguments.length)return void 0===this.options[b]?null:this.options[b];g[b]=c}return this._setOptions(g),this},_setOptions:function(a){var b;for(b in a)this._setOption(b,a[b]);return this},_setOption:function(a,b){return this.options[a]=b,"disabled"===a&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!b),b&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(b,c,d){var e,f=this;"boolean"!=typeof b&&(d=c,c=b,b=!1),d?(c=e=a(c),this.bindings=this.bindings.add(c)):(d=c,c=this.element,e=this.widget()),a.each(d,function(d,g){function h(){return b||f.options.disabled!==!0&&!a(this).hasClass("ui-state-disabled")?("string"==typeof g?f[g]:g).apply(f,arguments):void 0}"string"!=typeof g&&(h.guid=g.guid=g.guid||h.guid||a.guid++);var i=d.match(/^([\w:-]*)\s*(.*)$/),j=i[1]+f.eventNamespace,k=i[2];k?e.delegate(k,j,h):c.bind(j,h)})},_off:function(b,c){c=(c||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,b.unbind(c).undelegate(c),this.bindings=a(this.bindings.not(b).get()),this.focusable=a(this.focusable.not(b).get()),this.hoverable=a(this.hoverable.not(b).get())},_delay:function(a,b){function c(){return("string"==typeof a?d[a]:a).apply(d,arguments)}var d=this;return setTimeout(c,b||0)},_hoverable:function(b){this.hoverable=this.hoverable.add(b),this._on(b,{mouseenter:function(b){a(b.currentTarget).addClass("ui-state-hover")},mouseleave:function(b){a(b.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(b){this.focusable=this.focusable.add(b),this._on(b,{focusin:function(b){a(b.currentTarget).addClass("ui-state-focus")},focusout:function(b){a(b.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(b,c,d){var e,f,g=this.options[b];if(d=d||{},c=a.Event(c),c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase(),c.target=this.element[0],f=c.originalEvent)for(e in f)e in c||(c[e]=f[e]);return this.element.trigger(c,d),!(a.isFunction(g)&&g.apply(this.element[0],[c].concat(d))===!1||c.isDefaultPrevented())}},a.each({show:"fadeIn",hide:"fadeOut"},function(b,c){a.Widget.prototype["_"+b]=function(d,e,f){"string"==typeof e&&(e={effect:e});var g,h=e?e===!0||"number"==typeof e?c:e.effect||c:b;e=e||{},"number"==typeof e&&(e={duration:e}),g=!a.isEmptyObject(e),e.complete=f,e.delay&&d.delay(e.delay),g&&a.effects&&a.effects.effect[h]?d[b](e):h!==b&&d[h]?d[h](e.duration,e.easing,f):d.queue(function(c){a(this)[b](),f&&f.call(d[0]),c()})}});var f=(a.widget,!1);a(document).mouseup(function(){f=!1});a.widget("ui.mouse",{version:"1.11.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var b=this;this.element.bind("mousedown."+this.widgetName,function(a){return b._mouseDown(a)}).bind("click."+this.widgetName,function(c){return!0===a.data(c.target,b.widgetName+".preventClickEvent")?(a.removeData(c.target,b.widgetName+".preventClickEvent"),c.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(b){if(!f){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(b),this._mouseDownEvent=b;var c=this,d=1===b.which,e="string"==typeof this.options.cancel&&b.target.nodeName?a(b.target).closest(this.options.cancel).length:!1;return d&&!e&&this._mouseCapture(b)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){c.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=this._mouseStart(b)!==!1,!this._mouseStarted)?(b.preventDefault(),!0):(!0===a.data(b.target,this.widgetName+".preventClickEvent")&&a.removeData(b.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(a){return c._mouseMove(a)},this._mouseUpDelegate=function(a){return c._mouseUp(a)},this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),b.preventDefault(),f=!0,!0)):!0}},_mouseMove:function(b){if(this._mouseMoved){if(a.ui.ie&&(!document.documentMode||document.documentMode<9)&&!b.button)return this._mouseUp(b);if(!b.which)return this._mouseUp(b)}return(b.which||b.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(b),b.preventDefault()):(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,b)!==!1,this._mouseStarted?this._mouseDrag(b):this._mouseUp(b)),!this._mouseStarted)},_mouseUp:function(b){return this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,b.target===this._mouseDownEvent.target&&a.data(b.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(b)),f=!1,!1},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}});a.widget("ui.draggable",a.ui.mouse,{version:"1.11.4",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._setHandleClassName(),this._mouseInit()},_setOption:function(a,b){this._super(a,b),"handle"===a&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){return(this.helper||this.element).is(".ui-draggable-dragging")?void(this.destroyOnClear=!0):(this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._removeHandleClassName(),void this._mouseDestroy())},_mouseCapture:function(b){var c=this.options;return this._blurActiveElement(b),this.helper||c.disabled||a(b.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(b),this.handle?(this._blockFrames(c.iframeFix===!0?"iframe":c.iframeFix),!0):!1)},_blockFrames:function(b){this.iframeBlocks=this.document.find(b).map(function(){var b=a(this);return a("<div>").css("position","absolute").appendTo(b.parent()).outerWidth(b.outerWidth()).outerHeight(b.outerHeight()).offset(b.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(b){var c=this.document[0];if(this.handleElement.is(b.target))try{c.activeElement&&"body"!==c.activeElement.nodeName.toLowerCase()&&a(c.activeElement).blur()}catch(d){}},_mouseStart:function(b){var c=this.options;return this.helper=this._createHelper(b),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),a.ui.ddmanager&&(a.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter(function(){return"fixed"===a(this).css("position")}).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(b),this.originalPosition=this.position=this._generatePosition(b,!1),this.originalPageX=b.pageX,this.originalPageY=b.pageY,c.cursorAt&&this._adjustOffsetFromHelper(c.cursorAt),this._setContainment(),this._trigger("start",b)===!1?(this._clear(),!1):(this._cacheHelperProportions(),a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b),this._normalizeRightBottom(),this._mouseDrag(b,!0),a.ui.ddmanager&&a.ui.ddmanager.dragStart(this,b),!0)},_refreshOffsets:function(a){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:a.pageX-this.offset.left,top:a.pageY-this.offset.top}},_mouseDrag:function(b,c){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(b,!0),this.positionAbs=this._convertPositionTo("absolute"),!c){var d=this._uiHash();if(this._trigger("drag",b,d)===!1)return this._mouseUp({}),!1;this.position=d.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",a.ui.ddmanager&&a.ui.ddmanager.drag(this,b),!1},_mouseStop:function(b){var c=this,d=!1;return a.ui.ddmanager&&!this.options.dropBehaviour&&(d=a.ui.ddmanager.drop(this,b)),this.dropped&&(d=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!d||"valid"===this.options.revert&&d||this.options.revert===!0||a.isFunction(this.options.revert)&&this.options.revert.call(this.element,d)?a(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){c._trigger("stop",b)!==!1&&c._clear()}):this._trigger("stop",b)!==!1&&this._clear(),!1},_mouseUp:function(b){return this._unblockFrames(),a.ui.ddmanager&&a.ui.ddmanager.dragStop(this,b),this.handleElement.is(b.target)&&this.element.focus(),a.ui.mouse.prototype._mouseUp.call(this,b)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(b){return this.options.handle?!!a(b.target).closest(this.element.find(this.options.handle)).length:!0},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this.handleElement.addClass("ui-draggable-handle")},_removeHandleClassName:function(){this.handleElement.removeClass("ui-draggable-handle")},_createHelper:function(b){var c=this.options,d=a.isFunction(c.helper),e=d?a(c.helper.apply(this.element[0],[b])):"clone"===c.helper?this.element.clone().removeAttr("id"):this.element;return e.parents("body").length||e.appendTo("parent"===c.appendTo?this.element[0].parentNode:c.appendTo),d&&e[0]===this.element[0]&&this._setPositionRelative(),e[0]===this.element[0]||/(fixed|absolute)/.test(e.css("position"))||e.css("position","absolute"),e},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(b){"string"==typeof b&&(b=b.split(" ")),a.isArray(b)&&(b={left:+b[0],top:+b[1]||0}),"left"in b&&(this.offset.click.left=b.left+this.margins.left),"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left),"top"in b&&(this.offset.click.top=b.top+this.margins.top),"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_isRootNode:function(a){return/(html|body)/i.test(a.tagName)||a===this.document[0]},_getParentOffset:function(){var b=this.offsetParent.offset(),c=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==c&&a.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(b={top:0,left:0}),{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var a=this.element.position(),b=this._isRootNode(this.scrollParent[0]);return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+(b?0:this.scrollParent.scrollTop()),left:a.left-(parseInt(this.helper.css("left"),10)||0)+(b?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b,c,d,e=this.options,f=this.document[0];return this.relativeContainer=null,e.containment?"window"===e.containment?void(this.containment=[a(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,a(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,a(window).scrollLeft()+a(window).width()-this.helperProportions.width-this.margins.left,a(window).scrollTop()+(a(window).height()||f.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===e.containment?void(this.containment=[0,0,a(f).width()-this.helperProportions.width-this.margins.left,(a(f).height()||f.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):e.containment.constructor===Array?void(this.containment=e.containment):("parent"===e.containment&&(e.containment=this.helper[0].parentNode),c=a(e.containment),d=c[0],void(d&&(b=/(scroll|auto)/.test(c.css("overflow")),this.containment=[(parseInt(c.css("borderLeftWidth"),10)||0)+(parseInt(c.css("paddingLeft"),10)||0),(parseInt(c.css("borderTopWidth"),10)||0)+(parseInt(c.css("paddingTop"),10)||0),(b?Math.max(d.scrollWidth,d.offsetWidth):d.offsetWidth)-(parseInt(c.css("borderRightWidth"),10)||0)-(parseInt(c.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(b?Math.max(d.scrollHeight,d.offsetHeight):d.offsetHeight)-(parseInt(c.css("borderBottomWidth"),10)||0)-(parseInt(c.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=c))):void(this.containment=null)},_convertPositionTo:function(a,b){b||(b=this.position);var c="absolute"===a?1:-1,d=this._isRootNode(this.scrollParent[0]);return{top:b.top+this.offset.relative.top*c+this.offset.parent.top*c-("fixed"===this.cssPosition?-this.offset.scroll.top:d?0:this.offset.scroll.top)*c,left:b.left+this.offset.relative.left*c+this.offset.parent.left*c-("fixed"===this.cssPosition?-this.offset.scroll.left:d?0:this.offset.scroll.left)*c}},_generatePosition:function(a,b){var c,d,e,f,g=this.options,h=this._isRootNode(this.scrollParent[0]),i=a.pageX,j=a.pageY;return h&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),b&&(this.containment&&(this.relativeContainer?(d=this.relativeContainer.offset(),c=[this.containment[0]+d.left,this.containment[1]+d.top,this.containment[2]+d.left,this.containment[3]+d.top]):c=this.containment,a.pageX-this.offset.click.left<c[0]&&(i=c[0]+this.offset.click.left),a.pageY-this.offset.click.top<c[1]&&(j=c[1]+this.offset.click.top),a.pageX-this.offset.click.left>c[2]&&(i=c[2]+this.offset.click.left),a.pageY-this.offset.click.top>c[3]&&(j=c[3]+this.offset.click.top)),g.grid&&(e=g.grid[1]?this.originalPageY+Math.round((j-this.originalPageY)/g.grid[1])*g.grid[1]:this.originalPageY,j=c?e-this.offset.click.top>=c[1]||e-this.offset.click.top>c[3]?e:e-this.offset.click.top>=c[1]?e-g.grid[1]:e+g.grid[1]:e,f=g.grid[0]?this.originalPageX+Math.round((i-this.originalPageX)/g.grid[0])*g.grid[0]:this.originalPageX,i=c?f-this.offset.click.left>=c[0]||f-this.offset.click.left>c[2]?f:f-this.offset.click.left>=c[0]?f-g.grid[0]:f+g.grid[0]:f),"y"===g.axis&&(i=this.originalPageX),"x"===g.axis&&(j=this.originalPageY)),{top:j-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:h?0:this.offset.scroll.top),left:i-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:h?0:this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_normalizeRightBottom:function(){"y"!==this.options.axis&&"auto"!==this.helper.css("right")&&(this.helper.width(this.helper.width()),this.helper.css("right","auto")),"x"!==this.options.axis&&"auto"!==this.helper.css("bottom")&&(this.helper.height(this.helper.height()),this.helper.css("bottom","auto"))},_trigger:function(b,c,d){return d=d||this._uiHash(),a.ui.plugin.call(this,b,[c,d,this],!0),/^(drag|start|stop)/.test(b)&&(this.positionAbs=this._convertPositionTo("absolute"),d.offset=this.positionAbs),a.Widget.prototype._trigger.call(this,b,c,d)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),a.ui.plugin.add("draggable","connectToSortable",{start:function(b,c,d){var e=a.extend({},c,{item:d.element});d.sortables=[],a(d.options.connectToSortable).each(function(){var c=a(this).sortable("instance");c&&!c.options.disabled&&(d.sortables.push(c),c.refreshPositions(),c._trigger("activate",b,e))})},stop:function(b,c,d){var e=a.extend({},c,{item:d.element});d.cancelHelperRemoval=!1,a.each(d.sortables,function(){var a=this;a.isOver?(a.isOver=0,d.cancelHelperRemoval=!0,a.cancelHelperRemoval=!1,a._storedCSS={position:a.placeholder.css("position"),top:a.placeholder.css("top"),left:a.placeholder.css("left")},a._mouseStop(b),a.options.helper=a.options._helper):(a.cancelHelperRemoval=!0,a._trigger("deactivate",b,e))})},drag:function(b,c,d){a.each(d.sortables,function(){var e=!1,f=this;f.positionAbs=d.positionAbs,f.helperProportions=d.helperProportions,f.offset.click=d.offset.click,f._intersectsWith(f.containerCache)&&(e=!0,a.each(d.sortables,function(){return this.positionAbs=d.positionAbs,this.helperProportions=d.helperProportions,this.offset.click=d.offset.click,this!==f&&this._intersectsWith(this.containerCache)&&a.contains(f.element[0],this.element[0])&&(e=!1),e})),e?(f.isOver||(f.isOver=1,d._parent=c.helper.parent(),f.currentItem=c.helper.appendTo(f.element).data("ui-sortable-item",!0),f.options._helper=f.options.helper,f.options.helper=function(){return c.helper[0]},b.target=f.currentItem[0],f._mouseCapture(b,!0),f._mouseStart(b,!0,!0),f.offset.click.top=d.offset.click.top,f.offset.click.left=d.offset.click.left,f.offset.parent.left-=d.offset.parent.left-f.offset.parent.left,f.offset.parent.top-=d.offset.parent.top-f.offset.parent.top,d._trigger("toSortable",b),d.dropped=f.element,a.each(d.sortables,function(){this.refreshPositions()}),d.currentItem=d.element,f.fromOutside=d),f.currentItem&&(f._mouseDrag(b),c.position=f.position)):f.isOver&&(f.isOver=0,f.cancelHelperRemoval=!0,f.options._revert=f.options.revert,f.options.revert=!1,f._trigger("out",b,f._uiHash(f)),f._mouseStop(b,!0),f.options.revert=f.options._revert,f.options.helper=f.options._helper,f.placeholder&&f.placeholder.remove(),c.helper.appendTo(d._parent),d._refreshOffsets(b),c.position=d._generatePosition(b,!0),d._trigger("fromSortable",b),d.dropped=!1,a.each(d.sortables,function(){this.refreshPositions()}))})}}),a.ui.plugin.add("draggable","cursor",{start:function(b,c,d){var e=a("body"),f=d.options;e.css("cursor")&&(f._cursor=e.css("cursor")),e.css("cursor",f.cursor)},stop:function(b,c,d){var e=d.options;e._cursor&&a("body").css("cursor",e._cursor)}}),a.ui.plugin.add("draggable","opacity",{start:function(b,c,d){var e=a(c.helper),f=d.options;e.css("opacity")&&(f._opacity=e.css("opacity")),e.css("opacity",f.opacity)},stop:function(b,c,d){var e=d.options;e._opacity&&a(c.helper).css("opacity",e._opacity)}}),a.ui.plugin.add("draggable","scroll",{start:function(a,b,c){c.scrollParentNotHidden||(c.scrollParentNotHidden=c.helper.scrollParent(!1)),c.scrollParentNotHidden[0]!==c.document[0]&&"HTML"!==c.scrollParentNotHidden[0].tagName&&(c.overflowOffset=c.scrollParentNotHidden.offset())},drag:function(b,c,d){var e=d.options,f=!1,g=d.scrollParentNotHidden[0],h=d.document[0];g!==h&&"HTML"!==g.tagName?(e.axis&&"x"===e.axis||(d.overflowOffset.top+g.offsetHeight-b.pageY<e.scrollSensitivity?g.scrollTop=f=g.scrollTop+e.scrollSpeed:b.pageY-d.overflowOffset.top<e.scrollSensitivity&&(g.scrollTop=f=g.scrollTop-e.scrollSpeed)),e.axis&&"y"===e.axis||(d.overflowOffset.left+g.offsetWidth-b.pageX<e.scrollSensitivity?g.scrollLeft=f=g.scrollLeft+e.scrollSpeed:b.pageX-d.overflowOffset.left<e.scrollSensitivity&&(g.scrollLeft=f=g.scrollLeft-e.scrollSpeed))):(e.axis&&"x"===e.axis||(b.pageY-a(h).scrollTop()<e.scrollSensitivity?f=a(h).scrollTop(a(h).scrollTop()-e.scrollSpeed):a(window).height()-(b.pageY-a(h).scrollTop())<e.scrollSensitivity&&(f=a(h).scrollTop(a(h).scrollTop()+e.scrollSpeed))),e.axis&&"y"===e.axis||(b.pageX-a(h).scrollLeft()<e.scrollSensitivity?f=a(h).scrollLeft(a(h).scrollLeft()-e.scrollSpeed):a(window).width()-(b.pageX-a(h).scrollLeft())<e.scrollSensitivity&&(f=a(h).scrollLeft(a(h).scrollLeft()+e.scrollSpeed)))),f!==!1&&a.ui.ddmanager&&!e.dropBehaviour&&a.ui.ddmanager.prepareOffsets(d,b)}}),a.ui.plugin.add("draggable","snap",{start:function(b,c,d){var e=d.options;d.snapElements=[],a(e.snap.constructor!==String?e.snap.items||":data(ui-draggable)":e.snap).each(function(){var b=a(this),c=b.offset();this!==d.element[0]&&d.snapElements.push({item:this,width:b.outerWidth(),height:b.outerHeight(),top:c.top,left:c.left})})},drag:function(b,c,d){var e,f,g,h,i,j,k,l,m,n,o=d.options,p=o.snapTolerance,q=c.offset.left,r=q+d.helperProportions.width,s=c.offset.top,t=s+d.helperProportions.height;for(m=d.snapElements.length-1;m>=0;m--)i=d.snapElements[m].left-d.margins.left,j=i+d.snapElements[m].width,k=d.snapElements[m].top-d.margins.top,l=k+d.snapElements[m].height,i-p>r||q>j+p||k-p>t||s>l+p||!a.contains(d.snapElements[m].item.ownerDocument,d.snapElements[m].item)?(d.snapElements[m].snapping&&d.options.snap.release&&d.options.snap.release.call(d.element,b,a.extend(d._uiHash(),{snapItem:d.snapElements[m].item})),d.snapElements[m].snapping=!1):("inner"!==o.snapMode&&(e=Math.abs(k-t)<=p,f=Math.abs(l-s)<=p,g=Math.abs(i-r)<=p,h=Math.abs(j-q)<=p,e&&(c.position.top=d._convertPositionTo("relative",{top:k-d.helperProportions.height,left:0}).top),f&&(c.position.top=d._convertPositionTo("relative",{top:l,left:0}).top),g&&(c.position.left=d._convertPositionTo("relative",{top:0,left:i-d.helperProportions.width}).left),h&&(c.position.left=d._convertPositionTo("relative",{top:0,left:j}).left)),n=e||f||g||h,"outer"!==o.snapMode&&(e=Math.abs(k-s)<=p,f=Math.abs(l-t)<=p,g=Math.abs(i-q)<=p,h=Math.abs(j-r)<=p,e&&(c.position.top=d._convertPositionTo("relative",{top:k,left:0}).top),f&&(c.position.top=d._convertPositionTo("relative",{top:l-d.helperProportions.height,left:0}).top),g&&(c.position.left=d._convertPositionTo("relative",{top:0,left:i}).left),h&&(c.position.left=d._convertPositionTo("relative",{top:0,left:j-d.helperProportions.width}).left)),!d.snapElements[m].snapping&&(e||f||g||h||n)&&d.options.snap.snap&&d.options.snap.snap.call(d.element,b,a.extend(d._uiHash(),{snapItem:d.snapElements[m].item})),d.snapElements[m].snapping=e||f||g||h||n)}}),a.ui.plugin.add("draggable","stack",{start:function(b,c,d){var e,f=d.options,g=a.makeArray(a(f.stack)).sort(function(b,c){return(parseInt(a(b).css("zIndex"),10)||0)-(parseInt(a(c).css("zIndex"),10)||0)});g.length&&(e=parseInt(a(g[0]).css("zIndex"),10)||0,a(g).each(function(b){a(this).css("zIndex",e+b)}),this.css("zIndex",e+g.length))}}),a.ui.plugin.add("draggable","zIndex",{start:function(b,c,d){var e=a(c.helper),f=d.options;e.css("zIndex")&&(f._zIndex=e.css("zIndex")),e.css("zIndex",f.zIndex)},stop:function(b,c,d){var e=d.options;e._zIndex&&a(c.helper).css("zIndex",e._zIndex)}});a.ui.draggable}),function(){"use strict";angular.module("myvcFrontApp",["ngAnimate","ngAria","ngCookies","ngMessages","ngSanitize","ngTouch","pascalprecht.translate","ui.bootstrap","ui.router","ui.select","angular-loading-bar","restangular","uiBreadcrumbs","toastr","http-auth-interceptor","ui.grid","ui.grid.edit","ui.grid.resizeColumns","ui.grid.exporter","ui.grid.selection","ui.grid.autoResize","angularFileUpload","FBAngular","as.sortable","Chronicle"]).constant("App",function(){
var a,b,c;return a="http://localhost/",location.hostname.match("lalvirtual")&&(a="http://lalvirtual.com/"),c=a+"5myvc/public/",b=a+"myvc_front/",{Server:c,views:"views/",images:c+"images/",perfilPath:c+"images/perfil/",imgSharedPath:c+"images/shared/"}}()).constant("AUTH_EVENTS",{loginSuccess:"auth-login-success",loginFailed:"auth-login-failed",logoutSuccess:"auth-logout-success",sessionTimeout:"auth-session-timeout",notAuthenticated:"auth-not-authenticated",notAuthorized:"auth-not-authorized"}).constant("USER_ROLES",{all:"*",admin:"admin",alumno:"alumno",acudiente:"acudiente",profesor:"profesor",guest:"guest"}).constant("PERMISSIONS",{can_work_like_admin:"can_work_like_admin",can_work_like_teacher:"can_work_like_teacher",can_work_like_student:"can_work_like_student",can_work_like_acudiente:"can_work_like_acudiente",can_accept_images:"can_accept_images",can_edit_alumnos:"can_edit_alumnos",can_edit_usuarios:"can_edit_usuarios",can_edit_notas:"can_edit_notas",can_edit_years:"can_edit_years",can_edit_periodos:"can_edit_periodos",can_edit_paises:"can_edit_paises",can_edit_ciudades:"can_edit_ciudades",can_edit_disciplinas:"can_edit_disciplinas",can_edit_profesores:"can_edit_profesores",can_edit_eventos:"can_edit_eventos",can_edit_votaciones:"can_edit_votaciones",can_edit_aspiraciones:"can_edit_aspiraciones",can_edit_participantes:"can_edit_participantes",can_edit_candidatos:"can_edit_candidatos",can_edit_unidades_subunidades:"can_edit_unidades_subunidades"})}.call(this),function(){angular.module("myvcFrontApp").config(["$cookiesProvider","$stateProvider","$urlRouterProvider","$httpProvider","$locationProvider","App","PERMISSIONS","RestangularProvider","$intervalProvider","$rootScopeProvider","USER_ROLES","toastrConfig","uiSelectConfig",function(a,b,c,d,e,f,g,h,i,j,k,l,m){return h.setBaseUrl(f.Server),d.defaults.headers.post["X-CSRFToken"]=a.csrftoken,d.defaults.headers.put["X-CSRFToken"]=a.csrftoken,d.defaults.useXDomain=!0,d.defaults.xsrfCookieName="csrftoken",d.defaults.xsrfHeaderName="X-CSRFToken",delete d.defaults.headers.common["X-Requested-With"],m.theme="select2",m.resetSearchInput=!0,c.otherwise("/"),c.when("/user/:username",["$match","$state",function(a,b){return b.transitionTo("panel.user.resumen",a)}]),b.state("main",{url:"/",views:{principal:{templateUrl:f.views+"main/main.tpl.html",controller:"MainCtrl"}},data:{displayName:"principal",icon_fa:"",pageTitle:"Construcción - MyVc"}}).state("login",{url:"/login",views:{principal:{templateUrl:""+f.views+"login/login.tpl.html",controller:"LoginCtrl"}},data:{displayName:"Login",icon_fa:"fa fa-user",pageTitle:"Ingresar a MyVc"}}).state("logout",{url:"/logout",views:{principal:{templateUrl:""+f.views+"login/logout.tpl.html",controller:"LogoutCtrl"}},data:{displayName:"Logout",icon_fa:"fa fa-user"}}).state("panel",{url:"/panel",views:{principal:{templateUrl:""+f.views+"panel/panel.tpl.html",controller:"PanelCtrl"}},resolve:{resolved_user:["AuthService",function(a){return a.verificar()}]},data:{displayName:"Inicio",icon_fa:"fa fa-home",pageTitle:"Bienvenido - MyVc"}}),j.bigLoader=!0,_.mixin({findByValues:function(a,b,c){var d;return d=_.filter(a,function(a){return _.contains(c,a[b])}),0===d.length?!1:d[0]}}),angular.extend(l,{allowHtml:!0,closeButton:!0,closeHtml:"<button>&times;</button>",containerId:"toast-container",extendedTimeOut:1e3,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},maxOpened:3,messageClass:"toast-message",newestOnTop:!0,onHidden:null,onShown:null,positionClass:"toast-top-right",tapToDismiss:!0,target:"body",timeOut:4e3,titleClass:"toast-title",toastClass:"toast"}),this}]).filter("capitalize",function(){return function(a,b){return a?a.replace(/([^\W_]+[^\s-]*) */g,function(a){return a.charAt(0).toUpperCase()+a.substr(1).toLowerCase()}):""}})}.call(this),function(){angular.module("myvcFrontApp").run(["$rootScope","cfpLoadingBar","$state","$stateParams","$translate","$cookies","Restangular","Perfil","AuthService","AUTH_EVENTS","toastr",function(a,b,c,d,e,f,g,h,i,j,k){var l;return a.$state=c,a.$stateParams=d,a.lastState=null,a.lastStateParam=null,a.notaRapida={enable:!1,valorNota:0},a.menucompacto=!1,a.$on("event:auth-loginRequired",function(a){return console.log("Acceso no permitido, vamos a loguear",a),c.transitionTo("login")}),l=function(){return null===a.lastState||"login"===a.lastState||"/"===a.lastState||"main"===a.lastState?c.transitionTo("panel"):c.transitionTo(a.lastState,a.lastStateParam)},a.$on("event:auth-loginConfirmed",function(){return console.log("Logueado con éxito!"),l()}),a.$on("$stateChangeStart",function(b,c,d,e,f){return null===a.lastState||"logout"!==c.name&&"login"!==c.name&&"main"!==c.name?(a.lastState=c.name,a.lastStateParam=d):void 0}),a.$on("$stateChangeSuccess",function(b,d,e,f,g){return a.pageTitle=c.current.name}),a.$on("$stateChangeError",function(b,d,e,f,g){return console.log("Evento fallido: ",b),k.warning("Lo sentimos, hubo un error o no puedes acceder a esta vista"),"panel"!==a.lastState?c.transitionTo("panel"):void 0}),a.$on("$translatePartialLoaderStructureChanged",function(){return e.refresh(),console.log("Translate refrescado supuestamente.")}),a.$on(j.loginSuccess,function(){var a;return a=h.User(),a?a.votaciones?(1===a.votaciones.length?k.success("Hay 1 votación en ejecución."):k.success("Hay "+a.votaciones.length+" votaciones en ejecución."),c.go("panel.actividades.votaciones.votar")):l():void 0}),a.$on(j.loginFailed,function(a){return k.error("Datos incorrecto.","No se pudo loguear"),console.log("Evento loginFailed: ",a)}),a.$on(j.notAuthenticated,function(a){return k.warning("No está autorizado.","Acceso exclusivo"),console.log("Evento notAuthenticated: ",a),c.transitionTo("login")}),a.$on(j.notAuthorized,function(b){return k.warning("No está autorizado para entrar a esta vista","Restringido"),c.go("panel"),console.log("Evento notAuthorized: ",b,a.lastState)})}])}.call(this),function(){"use strict";angular.module("myvcFrontApp").controller("ApplicationController",["$scope",function(a){return a.isLoginPage=!1}])}.call(this),function(){"use strict";angular.module("myvcFrontApp").controller("MainCtrl",["$scope","$window","$interval",function(a,b,c){}])}.call(this),function(){"use strict";angular.module("myvcFrontApp").controller("PanelCtrl",["$scope","$http","Restangular","$state","$cookies","$rootScope","AuthService","Perfil","App","resolved_user","toastr","cfpLoadingBar",function(a,b,c,d,e,f,g,h,i,j,k,l){a.USER=j,a.pageTitle=f.pageTitle,a.logoPathDefault="images/Logo_MyVc_Header.gif",a.logoPath="images/Logo_Colegio_Header.gif",b.get(a.logoPath).then(function(){}).then(function(){return a.logoPath=a.logoPathDefault}),l.complete(),g.verificar_acceso(),a.USER.nota_minima_aceptada=parseInt(a.USER.nota_minima_aceptada),a.date=new Date,c.one("years").getList().then(function(b){return a.years=b},function(a){return console.log("No se trajeron los años")}),c.one("periodos").getList().then(function(b){return a.periodos=b},function(a){return console.log("No se trajeron los periodos")}),a.setImagenPrincipal=function(){var b,c,d,e,f;return d=i.images+"perfil/",c=a.USER.imagen_nombre,b=a.USER.foto_nombre,f=d+c,e=d+b,a.imagenPrincipal=f,a.imagenOficial=e},a.setImagenPrincipal(),a.nameToShow=h.nameToShow,a.usuario=function(){return h.User().username},a.toggleCompactMenu=function(){return f.menucompacto=!f.menucompacto},a.seeDropdownPeriodos=!1,a.togglePeriodos=function(){return a.seeDropdownPeriodos=!a.seeDropdownPeriodos,console.log(a.seeDropdownPeriodos)},a.cambiarPeriodo=function(b){return console.log("Voy a cambiar de periodo"),c.one("periodos/useractive",b.id).put().then(function(c){return k.success("Periodo cambiado con éxito al perido "+b.numero,"Cambiado"),a.USER.periodo_id=b.id,a.USER.numero_periodo=b.numero,f.reload()},function(a){return k.warning("No se pudo cambiar de periodo.","Problema"),console.log("Error cambiando de periodo: ",a)})},a.cambiarYear=function(b){return console.log("Voy a cambiar de año",b,a.USER),c.one("years/useractive",b.id).put().then(function(c){return a.USER.year_id=b.id,a.USER.year=b.year,a.USER.numero_periodo=c.numero,a.USER.periodo_id=c.id,k.success("Año cambiado con éxito: "+b.year,"Cambiado"),f.reload()},function(a){return k.warning("No se pudo cambiar el año.","Problema"),console.log("Error cambiando el año: ",a)})},a.logout=function(){return g.logout()},a.goFileManager=function(){return d.go("panel.filemanager")},a.$on("cambianImgs",function(b,c){return a.USER=h.User(),a.setImagenPrincipal()})}])}.call(this),function(){"use strict";angular.module("myvcFrontApp").config(["$stateProvider","App","USER_ROLES","PERMISSIONS",function(a,b,c,d){a.state("panel.alumnos",{url:"^/alumnos",views:{maincontent:{templateUrl:""+b.views+"alumnos/alumnos.tpl.html",controller:"AlumnosCtrl"},headerContent:{templateUrl:""+b.views+"panel/panelHeader.tpl.html",controller:"PanelHeaderCtrl",resolve:{titulo:[function(){return"Alumnos"}]}}},data:{displayName:"Alumnos",icon_fa:"fa fa-male",needed_permissions:[d.can_edit_alumnos],pageTitle:"Alumnos - MyVc"}}).state("panel.mensajes",{url:"^/mensajes",views:{maincontent:{templateUrl:""+b.views+"mensajes/mensajes.tpl.html",controller:"MensajesCtrl"},headerContent:{templateUrl:""+b.views+"panel/panelHeader.tpl.html",controller:"PanelHeaderCtrl",resolve:{titulo:[function(){return"Mensajes"}]}}},data:{displayName:"Mensajes",icon_fa:"fa fa-envelope"}}).state("panel.years",{url:"^/years",views:{maincontent:{templateUrl:""+b.views+"colegio/years.tpl.html",controller:"YearsCtrl"},headerContent:{templateUrl:""+b.views+"panel/panelHeader.tpl.html",controller:"PanelHeaderCtrl",resolve:{titulo:[function(){return"Años"}]}}},data:{displayName:"Años",icon_fa:"fa fa-graduation-cap",needed_permissions:[d.can_work_like_admin],pageTitle:"Años - MyVc"}}).state("panel.paises",{url:"^/paises",views:{maincontent:{templateUrl:""+b.views+"paises/paises.tpl.html",controller:"PaisesCtrl"},headerContent:{templateUrl:""+b.views+"panel/panelHeader.tpl.html",controller:"PanelHeaderCtrl",resolve:{titulo:[function(){return"Paises"}]}}},data:{displayName:"Paises",icon_fa:"fa fa-flag-checkered",needed_permissions:[d.can_work_like_admin],pageTitle:"Paises - MyVc"}}).state("panel.profesores",{url:"^/profesores",views:{maincontent:{templateUrl:""+b.views+"profesores/profesores.tpl.html",controller:"ProfesoresCtrl"},headerContent:{templateUrl:""+b.views+"panel/panelHeader.tpl.html",controller:"PanelHeaderCtrl",resolve:{titulo:[function(){return"Profesores"}]}}},data:{displayName:"Profesores",icon_fa:"fa fa-graduation-cap",needed_permissions:[d.can_work_like_admin],pageTitle:"Profesores - MyVc"}}).state("panel.ciudades",{url:"/ciudades",views:{maincontent:{templateUrl:""+b.views+"ciudades/ciudades.tpl.html",controller:"CiudadesCtrl"},headerContent:{templateUrl:""+b.views+"panel/panelHeader.tpl.html",controller:"PanelHeaderCtrl",resolve:{titulo:[function(){return"Ciudades"}]}}},data:{displayName:"Ciudades",icon_fa:"fa fa-map-marker",needed_permissions:[d.can_work_like_admin],pageTitle:"Ciudades - MyVc"}}).state("panel.disciplinas",{url:"/disciplinas",views:{maincontent:{templateUrl:""+b.views+"disciplinas/disciplinas.tpl.html",controller:"DisciplinasCtrl"},headerContent:{templateUrl:""+b.views+"panel/panelHeader.tpl.html",controller:"PanelHeaderCtrl",resolve:{titulo:[function(){return"Disciplinas"}]}}},data:{displayName:"Disciplinas",icon_fa:"fa fa-align-justify",pageTitle:"Disciplinas - MyVc"}}).state("panel.eventos",{url:"/eventos",views:{maincontent:{templateUrl:""+b.views+"eventos/eventos.tpl.html",controller:"EventosCtrl"},headerContent:{templateUrl:""+b.views+"panel/panelHeader.tpl.html",controller:"PanelHeaderCtrl",resolve:{titulo:[function(){return"Eventos"}]}}},data:{displayName:"Eventos",icon_fa:"fa fa-laptop",needed_permissions:[d.can_work_like_admin],pageTitle:"Eventos - MyVc"}})}])}.call(this),function(){"use strict";angular.module("myvcFrontApp").controller("PanelHeaderCtrl",["$scope","titulo","$state","$stateParams","Fullscreen","$rootScope",function(a,b,c,d,e,f){a.titulo=b,f.reload=function(){return c.go(c.current,d,{reload:!0})},a.setFullScreen=function(){return e.toggleAll()}}])}.call(this),function(){angular.module("myvcFrontApp").directive("anunciosDir",["App","Restangular","toastr","$uibModal","$state",function(a,b,c,d,e){return{restrict:"E",templateUrl:""+a.views+"panel/anunciosDir.tpl.html",link:function(d,f,g){return d.perfilPath=a.images+"perfil/",e.is("panel")?b.one("ChangesAsked/to-me").customGET().then(function(a){return d.changes_asked_to_me=a},function(a){return c.error("No se pudo traer los anuncios.")}):void 0},controller:"AnunciosDirCtrl"}}]).controller("AnunciosDirCtrl",["$scope","Restangular","toastr","$uibModal","App",function(a,b,c,d,e){return a.aceptarAsked=function(a){var b;return b=d.open({templateUrl:e.views+"panel/aceptarAsked.tpl.html",controller:"AceptarAskedCtrl",resolve:{asked:function(){return a}}}),b.result.then(function(a){return console.log("Resultado del modal: ",a)})},a.rechazarAsked=function(a){var b;return b=d.open({templateUrl:e.views+"panel/rechazarAsked.tpl.html",controller:"RechazarAskedCtrl",resolve:{asked:function(){return a}}}),b.result.then(function(a){return console.log("Resultado del modal: ",a)})}}]).controller("AceptarAskedCtrl",["$scope","$uibModalInstance","asked","Restangular","toastr","App",function(a,b,c,d,e,f){return a.imagesPath=f.images+"perfil/",a.asked=c,a.ok=function(){var a;return a={asked_id:c.id},d.one("ChangesAsked/aceptar").customPUT(a).then(function(a){return e.success("Pedido aceptado.","Éxito"),c.deleted_at=a.deleted_at,c.accepted_at=a.deleted_at,c.deleted_by=a.deleted_by,c.comentario=a.comentario,c.oficial_image_id=a.oficial_image_id,c.foto_nombre=c.foto_nombre_asked},function(a){return e.warning("Problema","No se pudo aceptar petición."),console.log("Error aceptando asked: ",a)}),b.close(c)},a.cancel=function(){return b.dismiss("cancel")}}]).controller("RechazarAskedCtrl",["$scope","$uibModalInstance","asked","Restangular","toastr","App",function(a,b,c,d,e,f){return a.imagesPath=f.images+"perfil/",a.asked=c,a.ok=function(){var a;return a={asked_id:c.id},d.one("ChangesAsked/rechazar").customPUT(a).then(function(a){return e.success("Pedido aceptado.","Éxito"),c.deleted_at=a.deleted_at,c.rechazado_at=a.deleted_at,c.deleted_by=a.deleted_by,c.comentario=a.comentario},function(a){return e.warning("Problema","No se pudo rechazar petición."),console.log("Error rechando asked: ",a)}),b.close(c)},a.cancel=function(){return b.dismiss("cancel")}}])}.call(this),function(){"use strict";angular.module("myvcFrontApp").controller("YearsCtrl",["App","$scope","$http","Restangular","$uibModal","$state","ProfesoresServ","$cookies","$rootScope","$filter","toastr",function(a,b,c,d,e,f,g,h,i,j,k){1===b.USER.alumnos_can_see_notas&&(b.USER.alumnos_can_see_notas=!0),0===b.USER.alumnos_can_see_notas&&(b.USER.alumnos_can_see_notas=!1),b.config={alumnos_can_see_notas:b.USER.alumnos_can_see_notas},b.perfilPath=a.images+"perfil/",d.one("years/colegio").customGET().then(function(a){return b.years=a.years,b.certificados=a.certificados,b.imagenes=a.imagenes,g.contratos().then(function(a){return b.profesores=a},function(a){return console.log("No se pudo traer los profesores: ",a)}),b.fixControles()},function(a){return console.log("No se trajeron los años")}),b.fixControles=function(){var a,c,d,e,f,g;for(a=b.years.length-1,b.newcertif={},b.newYear={nombre_colegio:b.years[a].nombre_colegio,abrev_colegio:b.years[a].abrev_colegio,year:b.years[a].year+1,actual:!0,alumnos_can_see_notas:!0,nota_minima_aceptada:b.years[a].nota_minima_aceptada,resolucion:b.years[a].resolucion,codigo_dane:b.years[a].codigo_dane,telefono:b.years[a].telefono,celular:b.years[a].celular,unidad_displayname:b.years[a].unidad_displayname,unidades_displayname:b.years[a].unidades_displayname,genero_unidad:b.years[a].genero_unidad,subunidad_displayname:b.years[a].subunidad_displayname,subunidades_displayname:b.years[a].subunidades_displayname,genero_subunidad:b.years[a].genero_subunidad},f=b.years,g=[],d=0,e=f.length;e>d;d++)c=f[d],g.push(c.ocultando=c.actual?!1:!0);return g},b.addPeriodo=function(b){var c;return c=e.open({templateUrl:a.views+"colegio/addPeriodo.tpl.html",controller:"AddPeriodoCtrl",resolve:{year:function(){return b}}}),c.result.then(function(a){return b.periodos.push(a)})},b.removePeriodo=function(b,c){var d;return d=e.open({templateUrl:a.views+"colegio/removePeriodo.tpl.html",controller:"RemovePeriodoCtrl",resolve:{periodo:function(){return c}}}),d.result.then(function(a){return b.periodos=j("filter")(b.periodos,{id:"!"+a.id})})},b.toggleBloquearNotas=function(){var a;return a=0,b.config.alumnos_can_see_notas===!0&&(a=1),d.one("years/alumnos-can-see-notas",a).customPUT().then(function(a){return k.success(a)},function(a){return k.warning("No se pudo bloquear o desblequear el sistema.","Problema"),console.log("No se pudo bloquear o desblequear el sistema: ",a)})},b.restarNewYear=function(){return b.newYear.year>1990?b.newYear.year=b.newYear.year-1:void 0},b.sumarNewYear=function(){return b.newYear.year<3e3?b.newYear.year=b.newYear.year+1:void 0},b.restarNewNota=function(){return b.newYear.nota_minima_aceptada>0?b.newYear.nota_minima_aceptada=b.newYear.nota_minima_aceptada-.1:void 0},b.sumarNewNota=function(){return b.newYear.nota_minima_aceptada<1e3?b.newYear.nota_minima_aceptada=b.newYear.nota_minima_aceptada+.1:void 0},b.actualPeriodo=function(a){return d.one("periodos/establecer-actual",a.id).customPUT().then(function(b){return k.success("Periodo "+a.numero+" establecido como actual.")},function(a){return k.warning("No se pudo establecer como actual.","Problema"),console.log("No se pudo establecer como actual: ",a)})},b.crearNewYear=function(){return d.one("years/store").customPOST(b.newYear).then(function(a){return k.success("Año "+b.newYear.year+" creado. Por favor configúrelo."),b.years.push(a)},function(a){return k.warning("No se pudo crear año.","Problema"),console.log("No se pudo crear año: ",a)})},b.deleteYear=function(c){var d;return d=e.open({templateUrl:a.views+"colegio/removeYear.tpl.html",controller:"RemoveYearCtrl",resolve:{year:function(){return c}}}),d.result.then(function(a){return b.years=j("filter")(b.years,{id:"!"+a.id})})}}]).controller("RemoveYearCtrl",["$scope","$uibModalInstance","year","Restangular","toastr",function(a,b,c,d,e){return a.year=c,a.ok=function(){return d.one("years/delete").customDELETE(c.id).then(function(a){return e.success("Año "+c+" enviado a la papelera."),b.close(c)},function(a){return e.warning("No se pudo eliminar el año.","Problema"),console.log("Error eliminando año: ",a),b.dismiss()})},a.cancel=function(){return b.dismiss("cancel")}}]).controller("RemovePeriodoCtrl",["$scope","$modalInstance","periodo","Restangular","toastr",function(a,b,c,d,e){return a.periodo=c,a.ok=function(){return d.all("periodos/destroy/"+c.id).remove().then(function(a){return e.success("Periodo eliminado con éxito.","Eliminado"),b.close(c)},function(a){return e.warning("No se pudo eliminar el periodo.","Problema"),console.log("Error eliminando periodo: ",a),b.dismiss()})},a.cancel=function(){return b.dismiss("cancel")}}]).controller("AddPeriodoCtrl",["$scope","$modalInstance","year","Restangular","toastr",function(a,b,c,d,e){return a.year=c,a.new_periodo={},a.year_id=a.year.id,a.ok=function(){return d.one("periodos/store",c.id).customPOST(a.new_periodo).then(function(c){return e.success("Periodo creado con éxito.","Creado"),b.close(a.new_periodo)},function(a){return e.warning("No se pudo crear el periodo.","Problema"),console.log("Error creando periodo: ",a),b.dismiss()})},a.cancel=function(){return b.dismiss("cancel")}}])}.call(this),function(){"use strict";angular.module("myvcFrontApp").controller("PeriodosCtrl",["$scope","$http","Restangular","$state","$cookies","$rootScope",function(a,b,c,d,e,f){console.log("Agregando periodos")}])}.call(this),function(){angular.module("myvcFrontApp").directive("configuracionCertificados",["App",function(a){return{restrict:"E",templateUrl:""+a.views+"colegio/configCertificados.tpl.html",link:function(a,b,c){},controller:"ConfigCertificadosCtrl"}}]).controller("ConfigCertificadosCtrl",["$scope","App","Restangular","$state","$cookies","$rootScope","uiGridConstants","$filter",function(a,b,c,d,e,f,g,h){var i,j,k;a.newcertif={encabezado_width:0,encabezado_height:0,encabezado_margin_top:0,encabezado_margin_left:0,piepagina_width:0,piepagina_height:0,piepagina_margin_bottom:0,piepagina_margin_left:0},a.creando_certificado=!1,a.editando=!1,a.currentCertif={},a.certificado={},k=h("filter")(a.certificados,{id:a.year.config_certificado_estudio_id}),k&&k.length>0&&(a.certificado.config_actual=k[0]),a.crearConfig=function(){return a.creando_certificado=!0},a.cancelConfig=function(){return a.creando_certificado=!1},i='<a uib-tooltip="Editar" tooltip-placement="left" class="btn btn-default btn-xs shiny icon-only info" ng-click="grid.appScope.editar(row.entity)"><i class="fa fa-edit "></i></a>',j='<a uib-tooltip="X Eliminar" tooltip-placement="right" class="btn btn-default btn-xs shiny icon-only danger" ng-click="grid.appScope.eliminar(row.entity)"><i class="fa fa-trash "></i></a>',a.gridOptions={showGridFooter:!0,enableSorting:!0,enableFiltering:!1,enebleGridColumnMenu:!1,columnDefs:[{field:"id",displayName:"Id",width:50,enableCellEdit:!1,enableColumnMenu:!1},{field:"nombre",displayName:"Nombre",enableSorting:!1,enableColumnMenu:!1},{name:"edicion",displayName:"Edición",width:60,enableSorting:!1,enableFiltering:!1,cellTemplate:i+j,enableCellEdit:!1,enableColumnMenu:!1},{field:"encabezado_width",displayName:"AnchoE",filter:{condition:g.filter.CONTAINS}},{field:"encabezado_height",displayName:"AltoE",filter:{condition:g.filter.CONTAINS}},{field:"encabezado_margin_top",displayName:"MargenEArr",filter:{condition:g.filter.CONTAINS}},{field:"encabezado_margin_left",displayName:"MargenEIzq",filter:{condition:g.filter.CONTAINS}},{field:"piepagina_width",displayName:"AnchoP"},{field:"piepagina_height",displayName:"AltoP"},{field:"piepagina_margin_left",displayName:"MargenPIzq"},{field:"piepagina_margin_bottom",displayName:"MargenPAba"}],multiSelect:!1,onRegisterApi:function(b){return a.gridApi=b,b.edit.on.afterCellEdit(a,function(b,d,e,f){return e!==f&&c.one("certificados/update").customPUT(b).then(function(b){return a.toastr.success("Certificado modificado","Actualizado")},function(b){return a.toastr.error("Cambio no guardado","Error")}),a.$apply()})}},a.gridOptions.data=a.certificados,a.guardar=function(){return c.one("certificados/store").customPOST(a.newcertif).then(function(b){return a.toastr.success("Certificado creado."),a.creando_certificado=!1,a.certificados.push(b),a.gridOptions.data=a.certificados},function(b){return a.toastr.error("Certificado no guardado","Error")})},a.editar=function(b){var c,d;return a.editando=!0,a.currentCertif=b,c=h("filter")(a.imagenes,{id:b.encabezado_img_id}),d=h("filter")(a.imagenes,{id:b.piepagina_img_id}),c.length>0&&(c=c[0],a.currentCertif.encabezado_img=c),d.length>0?(d=d[0],a.currentCertif.piepagina_img=d):void 0},a.cancelEdit=function(){return a.editando=!1},a.actualizar=function(){return c.one("certificados/update").customPUT(a.currentCertif).then(function(b){return a.toastr.success("Certificado modificado","Actualizado"),a.editando=!1},function(b){return a.toastr.error("Cambio no guardado","Error")})},a.eliminar=function(b){return c.one("certificados/destroy/"+b.id).customDELETE().then(function(c){return a.toastr.success("Certificado eliminado."),a.certificados=h("filter")(a.certificados,{id:"!"+b.id}),a.gridOptions.data=a.certificados},function(b){return a.toastr.error("Certificado no eliminado","Error")})},a.certificadoSelect=function(b,d){return c.one("certificados/actual").customPUT({config_certificado_estudio_id:b.id,year_id:a.year.id}).then(function(b){return a.toastr.success("Certificado actual cambiado.")},function(b){return a.toastr.error("Certificado no cambiado","Error")})}}])}.call(this),function(){"use strict";angular.module("myvcFrontApp").config(["$stateProvider","App","PERMISSIONS",function(a,b,c){a.state("panel.alumnos.nuevo",{url:"/nuevo",views:{edit_alumno:{templateUrl:""+b.views+"alumnos/alumnosNew.tpl.html",controller:"AlumnosNewCtrl"},headerContent:{templateUrl:""+b.views+"panel/panelHeader.tpl.html",controller:"PanelHeaderCtrl",resolve:{titulo:[function(){return"Nuevo alumno"}]}}},data:{displayName:"Nuevo",icon_fa:"fa fa-male",pageTitle:"Nuevo alumno - MyVc"}}).state("panel.alumnos.editar",{url:"/editar/:alumno_id",views:{edit_alumno:{templateUrl:""+b.views+"alumnos/alumnosEdit.tpl.html",controller:"AlumnosEditCtrl"},headerContent:{templateUrl:""+b.views+"panel/panelHeader.tpl.html",controller:"PanelHeaderCtrl",resolve:{titulo:[function(){return"Editar alumno"}]}}},data:{displayName:"Editar",icon_fa:"fa fa-users",pageTitle:"Editar alumno - MyVc"}}).state("panel.listalumnos",{url:"^/listalumnos/:grupo_id",param:{grupo_id:null},views:{maincontent:{templateUrl:""+b.views+"alumnos/listAlumnos.tpl.html",controller:"ListAlumnosCtrl"},headerContent:{templateUrl:""+b.views+"panel/panelHeader.tpl.html",controller:"PanelHeaderCtrl",resolve:{titulo:[function(){return"Listado de alumnos"}]}}},data:{displayName:"Listado",icon_fa:"fa fa-users",pageTitle:"Listado alumnos - MyVc",needed_permissions:[c.can_work_like_teacher]}})}])}.call(this),function(){"use strict";angular.module("myvcFrontApp").controller("AlumnosCtrl",["$scope","App","$rootScope","$state","$interval","Restangular","uiGridConstants","$uibModal","$filter","AuthService","toastr",function(a,b,c,d,e,f,g,h,i,j,k){var l,m,n,o,p,q;j.verificar_acceso(),a.bigLoader=!0,a.dato={},a.dato.mostrartoolgrupo=!0,a.gridScope=a,q=e(function(){return a.bigLoader=!1},1e3),a.dato.grupo="",f.one("grupos").getList().then(function(b){return a.grupos=b}),a.editar=function(a){return d.go("panel.alumnos.editar",{alumno_id:a.alumno_id})},a.eliminar=function(c){var d;return d=h.open({templateUrl:b.views+"alumnos/removeAlumno.tpl.html",controller:"RemoveAlumnoCtrl",resolve:{alumno:function(){return c}}}),d.result.then(function(b){return a.gridOptions.data=i("filter")(a.gridOptions.data,{alumno_id:"!"+b.alumno_id})})},a.matricularUno=function(b){var c;return a.dato.grupo.id?(c={alumno_id:b.alumno_id,grupo_id:a.dato.grupo.id},console.log("Argumentos: ",c),f.all("matriculas/matricularuno/"+c.alumno_id+"/"+c.grupo_id).post().then(function(c){return console.log("Matriculado. ",c),b.matricula_id=c.id,b.grupo_id=c.grupo_id,b.nombregrupo=a.dato.grupo.nombre,b.abrevgrupo=a.dato.grupo.abrev,b.actual=1,k.success("Alumno matriculado con éxito","Matriculado"),b},function(a){return k.error("No se pudo matricular el alumno.","Error")})):void k.warning("Debes definir el grupo al que vas a matricular.","Falta grupo")},a.cambiarPazysalvo=function(a){return a.pazysalvo=!a.pazysalvo,f.one("alumnos/update",a.alumno_id).customPUT(a).then(function(a){return console.log("Cambios guardados")},function(b){return a.pazysalvo=!a.pazysalvo,k.error("Cambio no guardado","Error")})},a.resetPass=function(a){var c;return console.log("Presionado para resetear pass: ",a),c=h.open({templateUrl:b.views+"usuarios/resetPass.tpl.html",controller:"ResetPassCtrl",resolve:{usuario:function(){return a}}}),c.result.then(function(a){return console.log("Resultado del modal: ",a)})},a.eliminarMatricula=function(a){return f.all("matriculas/destroy/"+a.matricula_id).remove().then(function(b){return a.currentyear=0,k.success("Alumno desmatriculado"),a},function(a){return k.error("No se pudo desmatricular","Problema")})},l='<a uib-tooltip="Editar" tooltip-placement="left" class="btn btn-default btn-xs shiny icon-only info" ng-click="grid.appScope.editar(row.entity)"><i class="fa fa-edit "></i></a>',m='<a uib-tooltip="X Eliminar" tooltip-placement="right" class="btn btn-default btn-xs shiny icon-only danger" ng-click="grid.appScope.eliminar(row.entity)"><i class="fa fa-trash "></i></a>',n=""+b.views+"directives/botonesMatricular.tpl.html",o=""+b.views+"directives/botonesPazysalvo.tpl.html",p=""+b.views+"directives/botonesResetPassword.tpl.html",a.gridOptions={showGridFooter:!0,enableSorting:!0,enableFiltering:!0,enebleGridColumnMenu:!1,columnDefs:[{field:"alumno_id",displayName:"Id",width:50,enableCellEdit:!1,enableColumnMenu:!1},{field:"no_matricula",maxWidth:50,enableSorting:!1,enableColumnMenu:!0},{name:"edicion",displayName:"Edición",width:60,enableSorting:!1,enableFiltering:!1,cellTemplate:l+m,enableCellEdit:!1,enableColumnMenu:!0},{field:"nombres",minWidth:80,filter:{condition:function(a,b,c){var d;return d=c.entity,d.nombres.toLowerCase().indexOf(a.toLowerCase())>-1}},enableHiding:!1},{field:"apellidos",minWidth:80,filter:{condition:g.filter.CONTAINS}},{field:"sexo",width:60},{field:"abrevgrupo",displayName:"Grupo",enableCellEdit:!1,cellTemplate:n,minWidth:150,filter:{condition:g.filter.CONTAINS,placeholder:"Ej: 8A"}},{field:"username",filter:{condition:g.filter.CONTAINS},displayName:"Usuario",cellTemplate:p,minWidth:150},{field:"deuda",displayName:"Deuda",cellTemplate:o,minWidth:150}],multiSelect:!1,onRegisterApi:function(b){return a.gridApi=b,b.edit.on.afterCellEdit(a,function(b,c,d,e){return console.log("Fila editada, ",b," Column:",c," newValue:"+d+" oldValue:"+e),d!==e&&("sexo"===c.field?"M"===d||"F"===d?f.one("alumnos/update",b.alumno_id).customPUT(b).then(function(a){return k.success("Alumno(a) actualizado con éxito","Actualizado")},function(a){return k.error("Cambio no guardado","Error")}):(k.warning("Debe usar M o F"),b.sexo=e):f.one("alumnos/update",b.alumno_id).customPUT(b).then(function(a){return k.success("Alumno(a) actualizado con éxito","Actualizado")},function(a){return k.error("Cambio no guardado","Error")})),a.$apply()})}},f.one("alumnos").getList().then(function(b){return a.gridOptions.data=b}),a.borrar=function(a){return a["delete"]().then(function(a){return k.success("El alumno fue eliminado","Éxito")},function(a){return k.error("No se pudo eliminar el alumno","Error")})},a.$on("alumnoguardado",function(b,c){return a.gridOptions.data.push(c)})}]).controller("RemoveAlumnoCtrl",["$scope","$uibModalInstance","alumno","Restangular","toastr",function(a,b,c,d,e){return a.alumno=c,a.ok=function(){return d.all("alumnos/destroy/"+c.alumno_id).remove().then(function(a){return e.success("Alumno eliminado con éxito.","Eliminado")},function(a){return e.warning("No se pudo eliminar al alumno.","Problema")}),b.close(c)},a.cancel=function(){return b.dismiss("cancel")}}])}.call(this),function(){"use strict";angular.module("myvcFrontApp").controller("AlumnosNewCtrl",["$scope","$rootScope","toastr","Restangular","$filter",function(a,b,c,d,e){a.data={},a.alumno={no_matricula:"",nombres:"",apellidos:"",sexo:"M",documento:"",fecha_nac:"2000-06-26",tipo_sangre:{},eps:"",telefono:"",celular:"",direccion:"",barrio:"",estrato:1,religion:"PENTECOSTAL UNIDA",email:"@gmail.com",facebook:"@gmail.com",foto:"perfil/default_male.jpg",pazysalvo:!0,deuda:0,pais_nac:{id:1,pais:"COLOMBIA",abrev:"CO"}},a.sangres=[{sangre:"O+"},{sangre:"O-"},{sangre:"A+"},{sangre:"A-"},{sangre:"B+"},{sangre:"B-"},{sangre:"AB+"},{sangre:"AB-"}],d.one("paises").getList().then(function(b){return a.paises=b,a.pais_nac=b[0],a.paisNacSelect(b[0],a.pais_nac)},function(){return console.log("No se pudo traer los paises")}),d.one("grupos").getList().then(function(b){return a.grupos=b},function(){return console.log("No se pudo traer los grupos")}),d.one("tiposdocumento").get().then(function(b){return a.tipos_doc=b}),a.crear=function(){return a.alumno.fecha_nac=e("date")(a.alumno.fecha_nac,"yyyy-MM-dd"),d.all("alumnos/store").post(a.alumno).then(function(b){return c.success("Alumno "+b.nombres+" creado"),a.$emit("alumnoguardado",b)},function(a){return c.warning("No se pudo guardar alumno","Problema")})},a.paisNacSelect=function(b,c){return d.one("ciudades/departamentos",b.id).get().then(function(c){return a.departamentosNac=c,"undefined"==typeof a.alumno.pais_doc?(a.alumno.pais_doc=b,
a.paisSelecionado(b)):void 0})},a.departNacSelect=function(b){return d.one("ciudades/pordepartamento",b.departamento).get().then(function(c){return a.ciudadesNac=c,"undefined"==typeof a.alumno.departamento_doc?(a.alumno.departamento_doc=b,a.departSeleccionado(b)):void 0})},a.paisSelecionado=function(b,c){return d.one("ciudades/departamentos",b.id).get().then(function(b){return a.departamentos=b})},a.departSeleccionado=function(b){return d.one("ciudades/pordepartamento",b.departamento).get().then(function(b){return a.ciudades=b})},a.dateOptions={formatYear:"yy"},a.restarEstrato=function(){return a.alumno.estrato>0?a.alumno.estrato=a.alumno.estrato-1:void 0},a.sumarEstrato=function(){return a.alumno.estrato<10?a.alumno.estrato=a.alumno.estrato+1:void 0}}])}.call(this),function(){"use strict";angular.module("myvcFrontApp").controller("AlumnosEditCtrl",["$scope","$rootScope","$state","Restangular","toastr",function(a,b,c,d,e){a.data={},a.alumno={},a.sangres=[{sangre:"O+"},{sangre:"O-"},{sangre:"A+"},{sangre:"A-"},{sangre:"B+"},{sangre:"B-"},{sangre:"AB+"},{sangre:"AB-"}],d.one("alumnos/show",c.params.alumno_id).get().then(function(b){return a.alumno=b,b.user&&(a.alumno.username=b.user.username),b.user&&(a.alumno.email2=b.user.email),null===a.alumno.ciudad_nac?(a.alumno.pais_nac={id:1,pais:"COLOMBIA",abrev:"CO"},a.paisNacSelect(a.alumno.pais_nac,a.alumno.pais_nac)):(d.one("ciudades/datosciudad",a.alumno.ciudad_nac).get().then(function(b){return a.paises=b.paises,a.departamentosNac=b.departamentos,a.ciudadesNac=b.ciudades,a.alumno.pais_nac=b.pais,a.alumno.departamento_nac=b.departamento,a.alumno.ciudad_nac=b.ciudad}),d.one("ciudades/datosciudad",a.alumno.ciudad_doc).get().then(function(b){return a.paises=b.paises,a.departamentos=b.departamentos,a.ciudades=b.ciudades,a.alumno.pais_doc=b.pais,a.alumno.departamento_doc=b.departamento,a.alumno.ciudad_doc=b.ciudad}))}),d.one("paises").getList().then(function(b){return a.paises=b},function(a){return console.log("No se pudo traer los paises",a)}),d.one("tiposdocumento").get().then(function(b){return a.tipos_doc=b}),a.guardar=function(){return d.one("alumnos/update",a.alumno.id).customPUT(a.alumno).then(function(a){return e.success("Alumno actualizado correctamente")},function(a){return e.error("No se pudo guardar el alumno")})},a.paisNacSelect=function(b,c){return d.one("ciudades/departamentos",b.id).get().then(function(c){return a.departamentosNac=c,"undefined"==typeof a.alumno.pais_doc?(a.alumno.pais_doc=b,a.paisSelecionado(b)):void 0})},a.departNacSelect=function(b){return d.one("ciudades/pordepartamento",b.departamento).get().then(function(c){return a.ciudadesNac=c,"undefined"==typeof a.alumno.departamento_doc?(a.alumno.departamento_doc=b,a.departSeleccionado(b)):void 0})},a.paisSelecionado=function(b,c){return d.one("ciudades/departamentos",b.id).get().then(function(b){return a.departamentos=b})},a.departSeleccionado=function(b){return d.one("ciudades/pordepartamento",b.departamento).get().then(function(b){return a.ciudades=b})},a.dateOptions={formatYear:"yyyy"},a.restarEstrato=function(){return a.alumno.estrato>0?a.alumno.estrato=a.alumno.estrato-1:void 0},a.sumarEstrato=function(){return a.alumno.estrato<10?a.alumno.estrato=parseInt(a.alumno.estrato)+1:void 0}}])}.call(this),function(){angular.module("myvcFrontApp").controller("ListAlumnosCtrl",["$scope","App","$rootScope","$state","Restangular","$filter",function(a,b,c,d,e,f){return a.gridScope=a,a.dato={},a.traerListado=function(b){return b?b.id&&(b=b.id):b=a.dato.grupo.id,e.one("grupos/listado",b).getList().then(function(b){return a.gridOptions.data=b},function(a){return console.log("No se pudo traer el listado",a)})},d.params.grupo_id&&a.traerListado(d.params.grupo_id),e.one("grupos").getList().then(function(b){var c;return a.grupos=b,c=f("filter")(b,{id:d.params.grupo_id}),a.dato={grupo:c[0]}},function(){return console.log("No se pudo traer los grupos")}),a.gridOptions={showGridFooter:!0,enableSorting:!0,enableFiltering:!0,enebleGridColumnMenu:!1,columnDefs:[{field:"nombres",enableHiding:!1},{field:"apellidos"},{field:"sexo",maxWidth:20},{field:"username",displayName:"Usuario"},{field:"fecha_nac",displayName:"Nacimiento",cellFilter:"date:mediumDate",type:"date"},{field:"direccion",displayName:"Dirección"}],multiSelect:!1,onRegisterApi:function(b){return a.gridApi=b,b.edit.on.afterCellEdit(a,function(b,c,d,f){return console.log("Fila editada, ",b," Column:",c," newValue:"+d+" oldValue:"+f),d!==f&&e.one("alumnos/update",b.alumno_id).customPUT(b).then(function(b){return a.toastr.success("Alumno actualizado con éxito","Actualizado")},function(b){return a.toastr.error("Cambio no guardado","Error"),console.log("Falló al intentar guardar: ",b)}),a.$apply()})}}}])}.call(this),function(){angular.module("myvcFrontApp").config(["$stateProvider","App","USER_ROLES","PERMISSIONS",function(a,b,c,d){return a.state("panel.notas",{url:"^/notas/:asignatura_id",views:{maincontent:{templateUrl:""+b.views+"notas/notas.tpl.html",controller:"NotasCtrl"},headerContent:{templateUrl:""+b.views+"panel/panelHeader.tpl.html",controller:"PanelHeaderCtrl",resolve:{titulo:[function(){return"Notas"}]}}},resolve:{notas:["NotasServ","$stateParams",function(a,b){return a.detalladas(b.asignatura_id)}],escalas:["EscalasValorativasServ",function(a){return a.escalas()}]},data:{displayName:"Notas",icon_fa:"fa fa-graduation-cap",needed_permissions:[d.can_work_like_teacher,d.can_work_like_admin,d.can_edit_notas],pageTitle:"Notas - MyVc"}}).state("panel.ausencias",{url:"^/ausencias/:asignatura_id",views:{maincontent:{templateUrl:""+b.views+"notas/ausencias.tpl.html",controller:"AusenciasCtrl"},headerContent:{templateUrl:""+b.views+"panel/panelHeader.tpl.html",controller:"PanelHeaderCtrl",resolve:{titulo:[function(){return"Ausencias"}]}}},resolve:{ausencias:["AusenciasServ","$stateParams",function(a,b){return a.detalladas(b.asignatura_id)}]},data:{displayName:"Ausencias",icon_fa:"fa fa-apple",needed_permissions:[d.can_work_like_teacher,d.can_work_like_admin,d.can_edit_notas],pageTitle:"Ausencias - MyVc"}}).state("panel.comportamiento",{url:"^/comportamiento/:grupo_id",views:{maincontent:{templateUrl:""+b.views+"notas/comportamiento.tpl.html",controller:"ComportamientoCtrl"},headerContent:{templateUrl:""+b.views+"panel/panelHeader.tpl.html",controller:"PanelHeaderCtrl",resolve:{titulo:[function(){return"Comportamiento"}]}}},resolve:{comportamiento:["ComportamientoServ","$stateParams",function(a,b){return a.detallados(b.grupo_id)}]},data:{displayName:"Comportamiento",icon_fa:"fa fa-street-view",needed_permissions:[d.can_work_like_teacher,d.can_work_like_admin,d.can_edit_notas],pageTitle:"Comportamiento - MyVc"}}).state("panel.notas_alumno",{url:"^/notas_alumno/:alumno_id",params:{alumno_id:{value:null}},views:{maincontent:{templateUrl:""+b.views+"notas/notasAlumno.tpl.html",controller:"NotasAlumnoCtrl"},headerContent:{templateUrl:""+b.views+"panel/panelHeader.tpl.html",controller:"PanelHeaderCtrl",resolve:{titulo:[function(){return"Notas alumno"}]}}},resolve:{alumnos:["Restangular","AuthService","resolved_user",function(a,b,c){return b.hasRoleOrPerm(["alumno","acudiente"])?"Sin alumnos":a.all("alumnos/sin-matriculas").getList()}],escalas:["EscalasValorativasServ",function(a){return a.escalas()}]},data:{displayName:"Notas alumno",icon_fa:"fa fa-graduation-cap",needed_permissions:[d.can_work_like_student,d.can_work_like_teacher,d.can_work_like_admin,d.can_edit_notas],pageTitle:"Notas alumno - MyVc"}})}])}.call(this),function(){angular.module("myvcFrontApp").filter("juicioValorativo",[function(){return function(a,b,c){var d;return d={},angular.forEach(b,function(b){return a>=b.porc_inicial&&a<=b.porc_final?(d.desempenio=b.desempenio,d.valoracion=b.valoracion):void 0}),c?d.desempenio:d.valoracion}}]).filter("soloAsignaturasConPerdidas",["$filter",function(a){return function(b,c){return c?(this.asignaturas_resp=[],angular.forEach(b,function(b){var c;return c=a("soloUnidadesConPerdidas")(b.unidades,!0),c.length?this.asignaturas_resp.push(b):void 0}),this.asignaturas_resp):b}}]).filter("soloUnidadesConPerdidas",["$filter",function(a){return function(b,c){return c?(this.unidades_resp=[],angular.forEach(b,function(b){var c;return c=a("soloSubunidadesPerdidas")(b.subunidades,!0),c.length?this.unidades_resp.push(b):void 0}),this.unidades_resp):b}}]).filter("soloSubunidadesPerdidas",["Perfil",function(a){return function(b,c){return c?(this.subunidades_resp=[],angular.forEach(b,function(b){return b.nota&&b.nota.nota<a.User().nota_minima_aceptada?this.subunidades_resp.push(b):void 0}),this.subunidades_resp):b}}])}.call(this),function(){"use strict";angular.module("myvcFrontApp").controller("NotasCtrl",["$scope","toastr","Restangular","$uibModal","$state","notas","$rootScope","$filter","App","AuthService","$timeout",function(a,b,c,d,e,f,g,h,i,j,k){var l,m,n,o,p,q,r,s;for(j.verificar_acceso(),a.asignatura={},a.asignatura_id=e.params.asignatura_id,a.datos={},a.UNIDAD=a.USER.unidad_displayname,a.SUBUNIDAD=a.USER.subunidad_displayname,a.UNIDADES=a.USER.unidades_displayname,a.SUBUNIDADES=a.USER.subunidades_displayname,a.perfilPath=i.images+"perfil/",a.views=i.views,a.nota_minima_aceptada=parseInt(a.USER.nota_minima_aceptada),a.asignatura=f[0],a.alumnos=f[1],a.unidades=f[2],a.subunidadesunidas=[],r=a.unidades,n=0,p=r.length;p>n;n++)for(m=r[n],0===m.subunidades.length&&a.subunidadesunidas.push({empty:!0}),s=m.subunidades,o=0,q=s.length;q>o;o++)l=s[o],a.subunidadesunidas.push(l);a.traerSubunidad=function(a){},a.cambiaNota=function(a,d){return c.one("notas/update",a.id).customPUT({nota:a.nota}).then(function(c){return b.success("Cambiada: "+a.nota)},function(c){return b.error("No pudimos guardar la nota "+a.nota)})},a.showFrases=function(b){var e;return e=d.open({templateUrl:i.views+"notas/showFrases.tpl.html",controller:"ShowFrasesCtrl",size:"lg",resolve:{alumno:function(){return b},frases:function(){return c.all("frases").getList()},asignatura:function(){return a.asignatura}}}),e.result.then(function(a){})},a.promedioTotal=function(b){var c,d,e,f,g,i,j,k,n,o,p,q,r;for(a.subunidadesunidas,d=0,q=a.unidades,k=0,o=q.length;o>k;k++){for(m=q[k],g=m.porcentaje,c=0,r=m.subunidades,n=0,p=r.length;p>n;n++)l=r[n],f=l.porcentaje,e=h("filter")(l.notas,{alumno_id:b})[0],i=parseInt(e.nota)*parseInt(f)/100,c+=i;j=c*parseInt(g)/100,d+=j}return h("number")(d,2)},a.verifClickNotaRapida=function(b){k(function(){var c;return g.notaRapida.enable?(b.backup?g.notaRapida.valorNota!==b.nota?(b.backup=b.nota,b.nota=g.notaRapida.valorNota):(c=b.backup,b.backup=b.nota,b.nota=c):(b.backup=b.nota,b.nota=g.notaRapida.valorNota),a.cambiaNota(b)):void 0})}}]).controller("ShowFrasesCtrl",["$scope","$uibModalInstance","alumno","frases","asignatura","Restangular","toastr","$filter",function(a,b,c,d,e,f,g,h){return a.alumno=c,a.frases=d,a.asignatura=e,a.alumno.newFrase="",f.all("frases_asignatura/show/"+c.alumno_id+"/"+e.asignatura_id).getList().then(function(b){return a.frases_asignatura=b},function(a){return g.warning("No se pudo traer frases.","Problema")}),a.addFrase=function(){var b;return""!==a.alumno.newFrase?(b={alumno_id:c.alumno_id,frase:a.alumno.newFrase,asignatura_id:a.asignatura.asignatura_id},f.all("frases_asignatura/store").customPOST(b).then(function(b){return g.success("Frase añadida."),a.frases_asignatura=b},function(a){return g.warning("No se pudo añadir frase.","Problema")})):g.warning("No ha copiado ninguna frase")},a.addFrase_id=function(){var b;return a.alumno.newFrase_by_id?(b={alumno_id:c.alumno_id,frase_id:a.alumno.newFrase_by_id.id,asignatura_id:a.asignatura.asignatura_id},f.all("frases_asignatura/store/"+a.alumno.newFrase_by_id.id).customPOST(b).then(function(b){return g.success("Frase añadida."),a.frases_asignatura=b},function(a){return g.warning("No se pudo añadir frase.","Problema")})):g.warning("No ha seleccionado frase")},a.quitarFrase=function(b){return f.all("frases_asignatura/destroy/"+b.id).remove().then(function(c){return g.success("Frase quitada"),a.frases_asignatura=h("filter")(a.frases_asignatura,{id:"!"+b.id})},function(a){return g.warning("No se pudo quitar la frase.","Problema")})},a.ok=function(){return b.close(c)}}])}.call(this),function(){angular.module("myvcFrontApp").controller("NotasAlumnoCtrl",["$scope","toastr","Restangular","$uibModal","$state","alumnos","ProfesoresServ","escalas","$rootScope","$filter","App","AuthService","Perfil",function(a,b,c,d,e,f,g,h,i,j,k,l,m){if(l.verificar_acceso(),a.hasRoleOrPerm=l.hasRoleOrPerm,"Sin alumnos"===!f&&(a.filtered_alumnos=f),a.perfilPath=k.images+"perfil/",a.datos={grupo:""},a.USER=m.User(),a.USER.nota_minima_aceptada=parseInt(a.USER.nota_minima_aceptada),a.escalas=h,a.config={solo_notas_perdidas:!0},a.hasRoleOrPerm(["alumno","acudiente"])||c.one("grupos").getGrupos().then(function(b){return a.grupos=b}),g.contratos().then(function(b){return a.profesores=b},function(a){return console.log("No se pudo traer los profesores: ",a)}),a.verNotasAlumno=function(d){return d||(d=a.datos.selected_alumno.alumno_id),c.one("notas/alumno/"+d).getList().then(function(c){return c[0]?a.periodos=c[0].periodos:(a.periodos=void 0,b.warning("Sin matrícula este año."))},function(a){return b.warning("Lo sentimos, No se trajeron las notas")})},e.params.alumno_id){if("Alumno"===a.USER.tipo)return void b.warning("No puedes ver otras notas");a.verNotasAlumno(e.params.alumno_id)}return"Alumno"===a.USER.tipo&&a.USER.pazysalvo&&a.verNotasAlumno(a.USER.persona_id),a.cambiaNota=function(a,d){return c.one("notas/update",a.id).customPUT({nota:a.nota}).then(function(c){return b.success("Cambiada: "+a.nota)},function(c){return b.error("No pudimos guardar la nota "+a.nota)})},a.selectGrupo=function(b){return b?a.filtered_alumnos=j("filter")(f,{grupo_id:b.id},!0):(a.filtered_alumnos=f,$cookieStore.put("requested_alumno","")),a.datos.selected_alumno=""}}])}.call(this),function(){angular.module("myvcFrontApp").controller("AusenciasCtrl",["$scope","toastr","Restangular","$state","$rootScope","ausencias","$filter","App","AuthService","$uibModal",function(a,b,c,d,e,f,g,h,i,j){var k,l,m,n;return i.verificar_acceso(),a.asignatura={},a.asignatura_id=d.params.asignatura_id,a.dato={},a.perfilPath=h.images+"perfil/",a.meses=[{nombre:"Enero"},{nombre:"Febrero"},{nombre:"Marzo"},{nombre:"Abril"},{nombre:"Mayo"},{nombre:"Junio"},{nombre:"Julio"},{nombre:"Agosto"},{nombre:"Septiembre"},{nombre:"Octubre"},{nombre:"Noviembre"},{nombre:"Diciembre"}],n=a.USER.year,a.dato.mes=""+(new Date).getMonth(),console.log("$scope.dato.mes",a.dato.mes),k=[31,28,31,30,31,30,31,31,30,31,30,31],m=function(a,b){return 1!==b||a%4!==0||a%100===0&&a%400!==0?k[b]:29},l=function(b){var c,d,e,f,g,h;for(f=m(n,b),g=[],d=h=1;f>=1?f>=h:h>=f;d=f>=1?++h:--h)c=new Date(n,parseInt(a.dato.mes),d),e=c.getDay(),0!==e&&6!==e&&g.push(d);return g},a.dias=l(a.dato.mes),a.asignatura=f[0],a.alumnos=f[1],c.one("asignaturas/show/"+a.asignatura_id).get().then(function(b){return a.asignatura=b},function(a){return console.log("No se pudo traer los datos de la asignatura",a),b.error("No se pudo traer los datos de la asignatura")}),a.mesSelect=function(){return console.log(a.dato),a.dias=l(parseInt(a.dato.mes))},a.hasAusencias=function(b,c){var d;return b.ausencias.length>0?(d=g("filter")(b.ausencias,{mes:parseInt(a.dato.mes),dia:c},!0),d.length>0?!0:!1):!1},a.deleteAusencia=function(d,e){var f;return console.log("Presionado para elimiar ausencia: ",d),f=g("filter")(d.ausencias,{mes:parseInt(a.dato.mes),dia:e},!0),c.one("ausencias/destroy/"+f[0].id).customDELETE().then(function(a){return b.success("Ausencia quitada con éxito."),d.ausencias=g("filter")(d.ausencias,{id:"!"+f[0].id})},function(a){return b.warning("No se pudo quitar la ausencia.","Problema"),console.log("Error quitando ausencia: ",a)})},a.showAddAusencia=function(d,e){var f;return console.log("Presionado para agregar ausencia: ",d),f={asignatura_id:a.asignatura_id,alumno_id:d.alumno_id,cantidad_ausencia:1,fecha_hora:new Date(n,parseInt(a.dato.mes),e)},c.one("ausencias/store").customPOST(f).then(function(a){return b.success("Ausencia agregada con éxito."),a.fecha_hora=new Date(a.fecha_hora),a.mes=a.fecha_hora.getMonth(),a.dia=a.fecha_hora.getDate(),d.ausencias.push(a),console.log("Agregada ",a)},function(a){return b.warning("No se pudo agregar ausencia.","Problema"),console.log("Error agregando ausencia: ",a)})},a.ausenciasTotales=function(a){var b,c,d,e,f;for(c=0,f=a.ausencias,d=0,e=f.length;e>d;d++)b=f[d],c+=b.cantidad_ausencia;return c}}]).controller("AddAusenciaCtrl",["$scope","$uibModalInstance","alumno","asignatura_id","Restangular","toastr",function(a,b,c,d,e,f){return a.alumno=c,a.ok=function(){var a;return a={asignatura_id:d,alumno_id:c.alumno_id,cantidad_ausencia:1},e.one("ausencias/store").customPOST().then(function(a){return f.success("Ausencia agregada con éxito.")},function(a){return f.warning("No se pudo agregar ausencia.","Problema"),console.log("Error agregando ausencia: ",a)}),b.close(c)},a.cancel=function(){return b.dismiss("cancel")}}])}.call(this),function(){angular.module("myvcFrontApp").controller("ComportamientoCtrl",["$scope","$filter","$rootScope","$state","$interval","comportamiento","$uibModal","App","Restangular","AuthService",function(a,b,c,d,e,f,g,h,i,j){return j.verificar_acceso(),a.perfilPath=h.images+"perfil/",a.frases=f[0],a.alumnos=f[1],a.grupo=f[2],a.tipos=[{tipo_frase:"Todas"},{tipo_frase:"Debilidad"},{tipo_frase:"Amenaza"},{tipo_frase:"Oportunidad"},{tipo_frase:"Fortaleza"}],a.addFrase=function(b){var c;return b.agregando_frase=!0,b.newfrase?(c={comportamiento_id:b.nota.id,frase_id:b.newfrase.id},i.one("definiciones_comportamiento/store").customPOST(c).then(function(c){return a.toastr.success("Frase agregada con éxito"),b.newfrase.definicion_id=c.id,b.definiciones.push(b.newfrase),b.newfrase=null,b.agregando_frase=!1},function(c){return a.toastr.error("No se pudo agregar la frase","Problema"),console.log("No se añadió la frase",c),b.agregando_frase=!1})):void a.toastr.warning("Debe seleccionar frase")},a.addFraseEscrita=function(b){var c;return b.agregando_frase=!0,""!==b.newfrase_escrita?(c={comportamiento_id:b.nota.id,frase:b.newfrase_escrita},i.one("definiciones_comportamiento/store-escrita").customPOST(c).then(function(c){return a.toastr.success("Frase agregada con éxito"),b.newfrase_escrita="",b.definiciones.push(c),b.agregando_frase=!1},function(c){return a.toastr.error("No se pudo agregar la frase","Problema"),console.log("No se añadió la frase",c),b.agregando_frase=!1})):void a.toastr.warning("Debe escribir la frase")},a.cambiaNota=function(b){var c;return console.log(b),c=b.nota,i.one("nota_comportamiento/update",b.id).customPUT({nota:b.nota}).then(function(c){return a.toastr.success("Nota cambiada: "+b.nota)},function(d){return console.log("No pudimos guardar la nota ",b),a.toastr.error("No pudimos guardar la nota "+b.nota),b.nota=c})},a.quitarFrase=function(c,d){return i.one("definiciones_comportamiento/destroy/"+c.definicion_id).customDELETE().then(function(e){return a.toastr.success("Definicion quitada"),d.definiciones=b("filter")(d.definiciones,{definicion_id:"!"+c.definicion_id}),console.log(d.definiciones,c.definicion_id)},function(b){return console.log("No pudimos quitar frase ",b),a.toastr.error("No pudimos quitar frase","Problema")})}}]).filter("porTipoFrase",[function(){return function(a,b){var c,d,e,f;if("Todas"===b||void 0===b)return a;for(d=[],e=0,f=a.length;f>e;e++)c=a[e],b===c.tipo_frase&&d.push(c);return d}}])}.call(this),function(){"use strict";angular.module("myvcFrontApp").config(["$stateProvider","App","PERMISSIONS",function(a,b,c){a.state("panel.actividades",{url:"^/actividades",views:{maincontent:{templateUrl:""+b.views+"actividades/actividades.tpl.html",controller:"ActividadesCtrl"},headerContent:{templateUrl:""+b.views+"panel/panelHeader.tpl.html",controller:"PanelHeaderCtrl",resolve:{titulo:[function(){return"Actividades"}]}}},data:{displayName:"Actividades",icon_fa:"fa fa-soccer-ball-o",pageTitle:"Actividades - MyVc"}})}])}.call(this),function(){"use strict";angular.module("myvcFrontApp").controller("ActividadesCtrl",["$scope","App","$rootScope","$state","Restangular","uiGridConstants","$uibModal","$filter","AuthService",function(a,b,c,d,e,f,g,h,i){i.verificar_acceso(),c.menucompacto=!0,a.editar=function(a){return d.go("panel.alumnos.editar",{alumno_id:a.alumno_id})},a.eliminar=function(c){var d;return d=g.open({templateUrl:b.views+"alumnos/removeAlumno.tpl.html",controller:"RemoveAlumnoCtrl",resolve:{alumno:function(){return c}}}),d.result.then(function(b){return a.gridOptions.data=h("filter")(a.gridOptions.data,{alumno_id:"!"+b.alumno_id})})},a.matricularUno=function(b){var c;return a.dato.grupo.id?(c={alumno_id:b.alumno_id,grupo_id:a.dato.grupo.id},e.all("matriculas/matricularuno/"+c.alumno_id+"/"+c.grupo_id).post().then(function(c){return b.matricula_id=c.id,b.grupo_id=c.grupo_id,b.nombregrupo=a.dato.grupo.nombre,b.abrevgrupo=a.dato.grupo.abrev,b.actual=1,a.toastr.success("Alumno matriculado con éxito","Matriculado"),b},function(b){return console.log("Falla al matricularlo. ",b),a.toastr.error("No se pudo matricular el alumno.","Error")})):void a.toastr.warning("Debes definir el grupo al que vas a matricular.","Falta grupo")}}]).controller("RemoveAlumnoCtrl",["$scope","$uibModalInstance","alumno","Restangular","toastr",function(a,b,c,d,e){return a.alumno=c,a.ok=function(){return d.all("alumnos/destroy/"+c.alumno_id).remove().then(function(a){return e.success("Alumno eliminado con éxito.","Eliminado")},function(a){return e.warning("No se pudo eliminar al alumno.","Problema"),console.log("Error eliminando alumno: ",a)}),b.close(c)},a.cancel=function(){return b.dismiss("cancel")}}])}.call(this),function(){"use strict";angular.module("myvcFrontApp").config(["$stateProvider","App",function(a,b){a.state("panel.profesores.nuevo",{url:"/nuevo",views:{edit_profesor:{templateUrl:""+b.views+"profesores/profesoresNew.tpl.html",controller:"ProfesoresNewCtrl"},headerContent:{templateUrl:""+b.views+"panel/panelHeader.tpl.html",controller:"PanelHeaderCtrl",resolve:{titulo:[function(){return"Nuevo profesor"}]}}},data:{displayName:"Nuevo",icon_fa:"fa fa-graduation-cap",pageTitle:"Profesor nuevo - MyVc"}}).state("panel.profesores.editar",{url:"/editar/:profe_id",views:{edit_profesor:{templateUrl:""+b.views+"profesores/profesoresEdit.tpl.html",controller:"ProfesoresEditCtrl"},headerContent:{templateUrl:""+b.views+"panel/panelHeader.tpl.html",controller:"PanelHeaderCtrl",resolve:{titulo:[function(){return"Editar alumno"}]}}},data:{displayName:"Editar",icon_fa:"fa fa-graduation-cap",pageTitle:"Editar profesor - MyVc"}})}])}.call(this),function(){"use strict";angular.module("myvcFrontApp").controller("ProfesoresCtrl",["$scope","$rootScope","toastr","Restangular","$state","App","$filter",function(a,b,c,d,e,f,g){var h,i,j,k;a.gridScope=a,a.current_year=a.USER.year_id,a.mostrandoTodos=!1,a.editar=function(a){return e.go("panel.profesores.editar",{profe_id:a.id})},a.eliminar=function(a){return e.go("panel.profesores.eliminar",{profe_id:a.id})},h='<a uib-tooltip="Editar" tooltip-placement="left" class="btn btn-default btn-xs shiny icon-only info" ng-click="grid.appScope.editar(row.entity)"><i class="fa fa-edit "></i></a>',i='<a uib-tooltip="X Eliminar" tooltip-placement="right" class="btn btn-default btn-xs shiny icon-only danger" ng-click="grid.appScope.eliminar(row.entity)"><i class="fa fa-times "></i></a>',j=""+f.views+"profesores/botonContratar.tpl.html",a.gridOptions={enableSorting:!0,enableFiltering:!0,enebleGridColumnMenu:!1,columnDefs:[{field:"id",displayName:"Id",width:50,enableFiltering:!1,enableCellEdit:!1},{name:"edicion",displayName:"Edición",width:50,enableSorting:!1,enableFiltering:!1,cellTemplate:h+i,enableCellEdit:!1},{name:"contrato",displayName:"Contrato",width:75,enableSorting:!1,enableFiltering:!1,cellTemplate:j,enableCellEdit:!1},{field:"nombres",enableHiding:!1,minWidth:100},{field:"apellidos",minWidth:100},{field:"sexo",maxWidth:40},{field:"fecha_nac",displayName:"Nacimiento"},{field:"username",displayName:"Usuario",enableCellEdit:!1},{field:"facebook"},{field:"celular"}],multiSelect:!1,onRegisterApi:function(b){return a.gridApi=b,b.edit.on.afterCellEdit(a,function(b,e,f,g){return f!==g&&d.one("profesores/update",b.id).customPUT(b).then(function(a){return c.success("Profesor actualizado con éxito","Actualizado")},function(a){return c.error("Cambio no guardado","Error")}),a.$apply()})}},d.one("profesores").getList().then(function(b){return a.gridOptions.data=b}),a.$on("profesorcreado",function(b,c){return a.gridOptions.data.push(c)}),a.mostrarTodos=function(){return a.mostrandoTodos=!0},a.ocultarTodos=function(){return a.mostrandoTodos=!1},a.quitarContrato=function(b){return d.one("contratos/destroy/"+b).customDELETE().then(function(d){var e;return c.success("Quitado de este año "+a.USER.year.year),a.gridCurrentOptions.data=g("filter")(a.gridCurrentOptions.data,{contrato_id:"!"+b}),e=g("filter")(a.gridOptions.data,{contrato_id:b})[0],e.year_id=null},function(a){return c.error("No se pudo agregar el profesor al presente año","Problema")})},a.contratar=function(b){return d.one("contratos").customPOST({profesor_id:b.id}).then(function(d){var e;return c.success(b.nombres+" contratado para este año"),a.gridCurrentOptions.data.push(d[0]),e=g("filter")(a.gridOptions.data,{contrato_id:b.contrato_id})[0],e.year_id=a.current_year,e.contrato_id=d[0].contrato_id},function(a){return c.error("No se pudo agregar el profesor al presente año","Problema")})},k='<a uib-tooltip="Quitar de año actual" tooltip-placement="left" class="btn btn-default btn-xs shiny danger" ng-click="grid.appScope.quitarContrato(row.entity.contrato_id)"><i class="fa fa-times "></i></a>',a.gridCurrentOptions={enableSorting:!0,enableFiltering:!0,enebleGridColumnMenu:!1,columnDefs:[{field:"profesor_id",displayName:"Id",width:50,enableFiltering:!1,enableCellEdit:!1},{name:"edicion",displayName:"Edición",width:50,enableSorting:!1,enableFiltering:!1,cellTemplate:k,enableCellEdit:!1},{field:"nombres",enableHiding:!1,minWidth:100},{field:"apellidos",minWidth:100},{field:"sexo",width:40},{field:"fecha_nac",displayName:"Nacimiento"},{field:"username",displayName:"Usuario",enableCellEdit:!1},{field:"facebook"},{field:"celular"}],multiSelect:!1,onRegisterApi:function(b){return a.gridApi=b,b.edit.on.afterCellEdit(a,function(b,e,f,g){return f!==g&&d.one("profesores/update",b.profesor_id).customPUT(b).then(function(a){return c.success("Profesor actualizado con éxito","Actualizado")},function(a){return c.error("Cambio no guardado","Error"),console.log("Falló al intentar guardar: ",a)}),a.$apply()})}},d.all("contratos").getList().then(function(b){return a.gridCurrentOptions.data=b},function(a){return c.error("No se trajeron los profesores contratados")})}])}.call(this),function(){"use strict";angular.module("myvcFrontApp").controller("ProfesoresNewCtrl",["$scope","Restangular","toastr",function(a,b,c){a.profesor={nombres:"FRANCISCO",apellidos:"BAEZ",sexo:"M",documento:"99817333",fecha_nac:"2000-06-26",telefono:"8886242",celular:"3216478754",direccion:"CRR 45 NO 30-23",barrio:"MORICHAL",email:"miguelito@gmail.com",facebook:"miguelito@gmail.com"},a.estados_civiles=[{estado_civil:"Soltero"},{estado_civil:"Casado"},{estado_civil:"Divorciado"},{estado_civil:"Viudo"}],b.one("paises").getList().then(function(b){return a.paises=b}),b.one("tiposdocumento").getList().then(function(b){return a.tipos_doc=b}),a.crear=function(){return b.one("profesores/store").customPOST(a.profesor).then(function(b){return c.success("Profesor creado con éxito"),a.$emit("profesorcreado",b)},function(a){return c.error("Profesor NO creado","Problema")})},a.paisNacSelect=function(c,d){return b.one("ciudades/departamentos",c.id).get().then(function(b){return a.departamentosNac=b,"undefined"==typeof a.profesor.pais_doc?(a.profesor.pais_doc=c,a.paisSelecionado(c)):void 0})},a.departNacSelect=function(c){return b.one("ciudades/pordepartamento",c.departamento).get().then(function(b){return a.ciudadesNac=b,"undefined"==typeof a.profesor.departamento_doc?(a.profesor.departamento_doc=c,a.departSeleccionado(c)):void 0})},a.paisSelecionado=function(c,d){return b.one("ciudades/departamentos",c.id).get().then(function(b){return a.departamentos=b})},a.departSeleccionado=function(c){return b.one("ciudades/pordepartamento",c.departamento).get().then(function(b){return a.ciudades=b})},a.dateOptions={formatYear:"yy"}}])}.call(this),function(){"use strict";angular.module("myvcFrontApp").controller("ProfesoresEditCtrl",["$scope","$rootScope","toastr","Restangular","$state",function(a,b,c,d,e){a.data={},a.profesor={},a.paises=[{id:1,pais:"COLOMBIA"}],a.tipos_doc=[{id:1,tipo:"CC"}],a.departamentos=[{id:1,departamento:"ANTIOQUIA"}],a.ciudades=[{id:1,ciudad:"MEDELLÍN"}],a.sangres=[{sangre:"O+"},{sangre:"O-"},{sangre:"A+"},{sangre:"A-"},{sangre:"B+"},{sangre:"B-"},{sangre:"AB+"},{sangre:"AB-"}],a.estados_civiles=[{estado_civil:"Soltero"},{estado_civil:"Casado"},{estado_civil:"Divorciado"},{estado_civil:"Viudo"}],d.one("profesores/show",e.params.profe_id).customGET().then(function(b){return a.profesor=b[0],a.profesor.estado_civil={estado_civil:b[0].estado_civil},null===a.profesor.ciudad_nac?(a.profesor.pais_nac={id:1,pais:"COLOMBIA",abrev:"CO"},a.paisNacSelect(a.profesor.pais_nac,a.profesor.pais_nac)):d.one("ciudades/datosciudad").customGET(a.profesor.ciudad_nac).then(function(b){return a.paises=b.paises,a.departamentosNac=b.departamentos,a.ciudadesNac=b.ciudades,a.profesor.pais_nac=b.pais,a.profesor.departamento_nac=b.departamento,a.profesor.ciudad_nac=b.ciudad}),null===a.profesor.ciudad_doc?(a.profesor.pais_doc={id:1,pais:"COLOMBIA",abrev:"CO"},a.paisDocSelect(a.profesor.pais_doc,a.profesor.pais_doc)):d.one("ciudades/datosciudad").customGET(a.profesor.ciudad_doc).then(function(b){return a.paises=b.paises,a.departamentos=b.departamentos,a.ciudades=b.ciudades,a.profesor.pais_doc=b.pais,a.profesor.departamento_doc=b.departamento,a.profesor.ciudad_doc=b.ciudad}),d.one("tiposdocumento").get().then(function(b){return a.tipos_doc=b,null===a.profesor.tipo_doc?a.profesor.tipo_doc={id:1,tipo:"CÉDULA",abrev:"CC"}:a.profesor.tipo_doc=$filter("filter")(a.tipos_doc,{id:a.profesor.tipo_doc})})}),d.one("paises").getList().then(function(b){return a.paises=b},function(a){return console.log("No se pudo traer los paises",a)}),a.guardar=function(){return d.one("profesores/update",a.profesor.id).customPUT(a.profesor).then(function(a){return c.success("Profesor actualizado con éxito")},function(a){return c.error("No se guardaron los cambios","Problemas")})},a.paisNacSelect=function(b,c){return d.one("ciudades/departamentos",b.id).get().then(function(c){return a.departamentosNac=c,"undefined"==typeof a.profesor.pais_doc?(a.profesor.pais_doc=b,a.paisDocSelect(b)):void 0})},a.departNacSelect=function(b){return d.one("ciudades/pordepartamento",b.departamento).get().then(function(c){return a.ciudadesNac=c,"undefined"==typeof a.profesor.departamento_doc?(a.profesor.departamento_doc=b,a.departDocSelect(b)):void 0})},a.paisDocSelect=function(b,c){return d.one("ciudades/departamentos",b.id).get().then(function(b){return a.departamentos=b})},a.departDocSelect=function(b){return d.one("ciudades/pordepartamento",b.departamento).get().then(function(b){return a.ciudades=b})},a.dateOptions={formatYear:"yyyy"}}])}.call(this),function(){angular.module("myvcFrontApp").controller("AreasCtrl",["$scope","$rootScope","$filter","Restangular","RAreas","$uibModal","App",function(a,b,c,d,e,f,g){var h,i;return a.creando=!1,a.editando=!1,a.currentArea={},a.currenAreaEdit={},a.gridScope=a,a.cancelarCrear=function(){return a.creando=!1},a.cancelarEdit=function(){return a.editando=!1},a.crear=function(){return e.post(a.currentArea).then(function(b){return a.gridOptions.data.push(b),delete a.currentArea,a.toastr.success("Area creada con éxito")},function(b){return console.log("No se pudo crear",b),a.toastr.error("Error creando","Problema");
})},a.guardar=function(){return d.one("areas/update",a.currentAreaEdit.id).customPUT(a.currentAreaEdit).then(function(b){return delete a.currentAreaEdit,a.toastr.success("Area actualizada con éxito"),a.cancelarEdit()},function(b){return console.log("No se pudo crear",b),a.toastr.error("Error guardando","Problema")})},a.editar=function(b){return a.currentAreaEdit=b,a.editando=!0},a.eliminar=function(b){var d;return d=f.open({templateUrl:g.views+"areas/removeArea.tpl.html",controller:"RemoveAreaCtrl",resolve:{area:function(){return b}}}),d.result.then(function(b){return a.gridOptions.data=c("filter")(a.areas,{id:"!"+b.id}),console.log("Resultado del modal: ",b)})},h='<a uib-tooltip="Editar" tooltip-placement="right" class="btn btn-default btn-xs shiny icon-only info" ng-click="grid.appScope.editar(row.entity)"><i class="fa fa-edit "></i></a>',i='<a uib-tooltip="X Eliminar" tooltip-placement="right" class="btn btn-default btn-xs shiny icon-only danger" ng-click="grid.appScope.eliminar(row.entity)"><i class="fa fa-times "></i></a>',a.gridOptions={showGridFooter:!0,enableSorting:!0,enableFiltering:!0,enebleGridColumnMenu:!1,enableCellEditOnFocus:!0,columnDefs:[{field:"id",type:"number",maxWidth:50,enableFiltering:!1},{name:"edicion",displayName:"Edición",maxWidth:50,enableSorting:!1,enableFiltering:!1,cellTemplate:h+i,enableCellEdit:!1},{field:"orden",type:"number",maxWidth:40,enableSorting:!1},{field:"nombre",enableHiding:!1,enableCellEditOnFocus:!0},{field:"alias",displayName:"Alias",enableCellEditOnFocus:!0}],multiSelect:!1,onRegisterApi:function(b){return a.gridApi=b,b.edit.on.afterCellEdit(a,function(b,c,d,e){return console.log("Fila editada, ",b," Column:",c," newValue:"+d+" oldValue:"+e),d!==e&&(a.currentAreaEdit=b,a.guardar()),a.$apply()})}},e.getList().then(function(b){return a.areas=b,a.gridOptions.data=a.areas})}]).controller("RemoveAreaCtrl",["$scope","$uibModalInstance","area","Restangular","toastr",function(a,b,c,d,e){return a.area=c,a.ok=function(){return d.all("areas/destroy/"+c.id).remove().then(function(a){return e.success("Grupo "+c.nombre+" eliminado con éxito.","Eliminado")},function(a){return e.warning("Problema","No se pudo eliminar el area."),console.log("Error eliminando area: ",a)}),b.close(c)},a.cancel=function(){return b.dismiss("cancel")}}])}.call(this),function(){"use strict";angular.module("myvcFrontApp").controller("LoginCtrl",["$scope","$rootScope","AUTH_EVENTS","AuthService","$location","Restangular","$cookies","Perfil","App","$http",function(a,b,c,d,e,f,g,h,i,j){var k;k=300,a.logueando=!0,a.recuperando=!1,a.registrando=!1,a.logoPathDefault="images/Logo_MyVc_Header.gif",a.logoPath="images/Logo_Colegio_Header.gif",j.get(a.logoPath).success(function(){}).error(function(){return a.logoPath=a.logoPathDefault}),a.credentials={username:"",password:""},a.host=e.host(),a.login=function(a){var b;return b=d.login_credentials(a),b.then(function(a){},function(a){return console.log("Promise de login_credentials rechazada",a)})},a.to_recuperando=function(){return a.logueando=!1,a.recuperando=!0,a.registrando=!1},a.to_registrando=function(){return a.logueando=!1,a.recuperando=!1,a.registrando=!0},a.to_logueando=function(){return a.logueando=!0,a.recuperando=!1,a.registrando=!1}}])}.call(this),function(){angular.module("myvcFrontApp").directive("loginDialog",["AUTH_EVENTS","App",function(a,b){return{restrict:"A",templateUrl:"#{App.views}/login/login-form.html",link:function(b){var c;return c=function(){return b.visible=!0},b.visible=!1,b.$on(a.notAuthenticated,c),b.$on(a.sessionTimeout,c)}}}])}.call(this),function(){"use strict";angular.module("myvcFrontApp").controller("LogoutCtrl",["$scope","AUTH_EVENTS","authService","$state","Restangular","$cookies","Perfil",function(a,b,c,d,e,f,g){return console.log("A salir!!"),d.go("login")}])}.call(this),function(){"use strict";angular.module("myvcFrontApp").config(["$stateProvider","App",function(a,b){return a.state("panel.niveles",{url:"^/niveles",views:{maincontent:{templateUrl:""+b.views+"grados/niveles.tpl.html",controller:"NivelesCtrl"},headerContent:{templateUrl:""+b.views+"panel/panelHeader.tpl.html",controller:"PanelHeaderCtrl",resolve:{titulo:[function(){return"Niveles educativos"}]}}},data:{displayName:"Niveles",icon_fa:"fa fa-graduation-cap",pageTitle:"Niveles - MyVc"}}),a.state("panel.niveles.nuevo",{url:"/nuevo",views:{edit_nivel:{templateUrl:""+b.views+"grados/nivelesNew.tpl.html",controller:"NivelesNewCtrl"},headerContent:{templateUrl:""+b.views+"panel/panelHeader.tpl.html",controller:"PanelHeaderCtrl",resolve:{titulo:[function(){return"Nuevo"}]}}},data:{displayName:"Nuevo",icon_fa:"fa fa-graduation-cap",pageTitle:"Nivel nuevo - MyVc"}}),a.state("panel.niveles.editar",{url:"/editar/:nivel_id",views:{edit_nivel:{templateUrl:""+b.views+"grados/nivelesEdit.tpl.html",controller:"NivelesEditCtrl"},headerContent:{templateUrl:""+b.views+"panel/panelHeader.tpl.html",controller:"PanelHeaderCtrl",resolve:{titulo:[function(){return"Editar"}]}}},data:{displayName:"Editar",icon_fa:"fa fa-graduation-cap",pageTitle:"Editar nivel - MyVc"}}),a.state("panel.grados",{url:"^/grados",views:{maincontent:{templateUrl:""+b.views+"grados/grados.tpl.html",controller:"GradosCtrl"},headerContent:{templateUrl:""+b.views+"panel/panelHeader.tpl.html",controller:"PanelHeaderCtrl",resolve:{titulo:[function(){return"Grados"}]}}},resolve:{niveles:["Restangular",function(a){return a.one("niveles").getList().then(function(a){return a})}]},data:{displayName:"Grados",icon_fa:"fa fa-graduation-cap",pageTitle:"Grados - MyVc"}}),a.state("panel.grados.nuevo",{url:"/nuevo",views:{edit_grado:{templateUrl:""+b.views+"grados/gradosNew.tpl.html",controller:"GradosNewCtrl"},headerContent:{templateUrl:""+b.views+"panel/panelHeader.tpl.html",controller:"PanelHeaderCtrl",resolve:{titulo:[function(){return"Nuevo"}]}}},data:{displayName:"Nuevo",icon_fa:"fa fa-graduation-cap",pageTitle:"Grado nuevo - MyVc"}}),a.state("panel.grados.editar",{url:"/editar/:grado_id",views:{edit_grado:{templateUrl:""+b.views+"grados/gradosEdit.tpl.html",controller:"GradosEditCtrl"},headerContent:{templateUrl:""+b.views+"panel/panelHeader.tpl.html",controller:"PanelHeaderCtrl",resolve:{titulo:[function(){return"Editar"}]}}},data:{displayName:"Editar",icon_fa:"fa fa-graduation-cap",pageTitle:"Editar grado - MyVc"}}),a.state("panel.grupos",{url:"^/grupos",views:{maincontent:{templateUrl:""+b.views+"grados/grupos.tpl.html",controller:"GruposCtrl"},headerContent:{templateUrl:""+b.views+"panel/panelHeader.tpl.html",controller:"PanelHeaderCtrl",resolve:{titulo:[function(){return"Grupos"}]}}},resolve:{grados:["Restangular",function(a){return a.one("grados").getList().then(function(a){return a})}],profesores:["Restangular",function(a){return a.one("contratos").getList().then(function(a){return a})}]},data:{displayName:"Grupos",icon_fa:"fa fa-graduation-cap",pageTitle:"Grupos - MyVc"}}),a.state("panel.grupos.nuevo",{url:"/nuevo",views:{edit_grupo:{templateUrl:""+b.views+"grados/gruposNew.tpl.html",controller:"GruposNewCtrl"},headerContent:{templateUrl:""+b.views+"panel/panelHeader.tpl.html",controller:"PanelHeaderCtrl",resolve:{titulo:[function(){return"Nuevo"}]}}},data:{displayName:"Nuevo",icon_fa:"fa fa-graduation-cap",pageTitle:"Grupo nuevo - MyVc"}}),a.state("panel.grupos.editar",{url:"/editar/:grupo_id",views:{edit_grupo:{templateUrl:""+b.views+"grados/gruposEdit.tpl.html",controller:"GruposEditCtrl"},headerContent:{templateUrl:""+b.views+"panel/panelHeader.tpl.html",controller:"PanelHeaderCtrl",resolve:{titulo:[function(){return"Editar"}]}}},data:{displayName:"Editar",icon_fa:"fa fa-graduation-cap",pageTitle:"Editar grupo - MyVc"}})}])}.call(this),function(){"use strict";angular.module("myvcFrontApp").controller("GradosCtrl",["$scope","$filter","$state","App","niveles","$uibModal","toastr",function(a,b,c,d,e,f,g){var h,i,j;a.grados={nivel:{}},a.gridScope=a,a.niveles=e,a.editar=function(a){return c.go("panel.grados.editar",{grado_id:a.id})},a.eliminar=function(c){var e;return e=f.open({templateUrl:d.views+"grados/removeGrado.tpl.html",controller:"RemoveGradoCtrl",size:"sm",resolve:{grado:function(){return c}}}),e.result.then(function(c){return a.grados=b("filter")(a.grados,{id:"!"+c.id}),a.gridOptions.data=a.grados})},j=""+d.views+"grados/editCellNivel.tpl.html",h='<a uib-tooltip="Editar" tooltip-placement="right" class="btn btn-default btn-xs shiny icon-only info" ng-click="grid.appScope.editar(row.entity)"><i class="fa fa-edit "></i></a>',i='<a uib-tooltip="X Eliminar" tooltip-placement="right" class="btn btn-default btn-xs shiny icon-only danger" ng-click="grid.appScope.eliminar(row.entity)"><i class="fa fa-times "></i></a>',a.gridOptions={showGridFooter:!0,enableSorting:!0,enableFiltering:!0,enebleGridColumnMenu:!1,columnDefs:[{name:"edicion",displayName:"Edición",maxWidth:50,enableSorting:!1,enableFiltering:!1,cellTemplate:h+i,enableCellEdit:!1},{field:"nombre",enableHiding:!1,enableCellEditOnFocus:!0},{field:"abrev",displayName:"abreviatura",enableCellEditOnFocus:!0,maxWidth:50,enableSorting:!1},{field:"orden",type:"number",enableCellEditOnFocus:!0,maxWidth:50},{field:"nivel_educativo_id",displayName:"Nivel Educativo",editDropdownOptionsArray:e,cellFilter:"mapNivel:grid.appScope.niveles",editableCellTemplate:"ui-grid/dropdownEditor",editDropdownIdLabel:"id",editDropdownValueLabel:"nombre"},{name:"nn",displayName:"",maxWidth:20,enableSorting:!1,enableFiltering:!1}],multiSelect:!1,onRegisterApi:function(b){return a.gridApi=b,b.edit.on.afterCellEdit(a,function(b,c,d,e){return d!==e&&b.put().then(function(a){return g.success("Grado actualizado con éxito","Actualizado")},function(a){return g.error("Cambio no guardado","Error")}),a.$apply()})}},Restangular.one("grados").getList().then(function(b){return a.grados=b,a.gridOptions.data=a.grados}),a.$on("gradocreado",function(b,c){return a.grados.push(c),a.gridOptions.data=a.grados})}]).filter("mapNivel",["$filter",function(a){return function(b,c){var d;return b?(d=a("filter")(c,{id:b})[0],d.nombre):""}}]).controller("RemoveGradoCtrl",["$scope","$uibModalInstance","grado","Restangular","toastr",function(a,b,c,d,e){return a.grado=c,a.ok=function(){return c.remove().then(function(a){return e.success("Grado "+a.nombre+" eliminado con éxito","Eliminado")},function(a){return e.error("No se pudo eliminar a "+row.nombre)}),b.close(c)},a.cancel=function(){return b.dismiss("cancel")}}])}.call(this),function(){"use strict";angular.module("myvcFrontApp").controller("GradosNewCtrl",["$scope","$rootScope","toastr","Restangular",function(a,b,c,d){return a.grado={orden:1},d.one("niveles_educativos").getList().then(function(b){return a.niveles=b}),a.restarOrden=function(){return a.grado.orden>0?a.grado.orden=a.grado.orden-1:void 0},a.sumarOrden=function(){return a.grado.orden<40?a.grado.orden=a.grado.orden+1:void 0},a.crear=function(){return d.one("grados").post(a.grado).then(function(b){return a.$emit("gradocreado",b),c.success("Grado "+b.nombre+" creado")},function(a){return c.error("Falló al intentar guardar")})}}])}.call(this),function(){"use strict";angular.module("myvcFrontApp").controller("GradosEditCtrl",["$scope","$state","Restangular","toastr",function(a,b,c,d){return c.one("grados/show",b.params.grado_id).get().then(function(b){return a.grado=b}),c.one("niveles_educativos").getList().then(function(b){return a.niveles=b}),a.guardar=function(){return c.one("grupos/update").customPUT(a.grado).then(function(a){return d.success("Se guardó grado el grado")},function(a){return d.error("Falló al intentar guardar")})},a.restarOrden=function(){return a.grado.orden>0?a.grado.orden=a.grado.orden-1:void 0},a.sumarOrden=function(){return a.grado.orden<40?a.grado.orden=a.grado.orden+1:void 0}}])}.call(this),function(){"use strict";angular.module("myvcFrontApp").controller("GruposCtrl",["$scope","$filter","$state","grados","profesores","$uibModal","App","Restangular","toastr",function(a,b,c,d,e,f,g,h,i){var j,k,l;a.gridScope=a,a.grados=d,a.profesores=e,a.editar=function(a){return c.go("panel.grupos.editar",{grupo_id:a.id})},a.eliminar=function(c){var d;return d=f.open({templateUrl:g.views+"grados/removeGrupo.tpl.html",controller:"RemoveGrupoCtrl",resolve:{grupo:function(){return c}}}),d.result.then(function(c){return a.grupos=b("filter")(a.grupos,{id:"!"+c.id}),a.gridOptions.data=a.grupos})},j='<a uib-tooltip="Editar" tooltip-placement="left" class="btn btn-default btn-xs shiny icon-only info" ng-click="grid.appScope.editar(row.entity)"><i class="fa fa-edit "></i></a>',k='<a uib-tooltip="X Eliminar" tooltip-placement="right" class="btn btn-default btn-xs shiny icon-only danger" ng-click="grid.appScope.eliminar(row.entity)"><i class="fa fa-trash "></i></a>',l='<a uib-tooltip="Listado de alumnos" tooltip-placement="right" class="btn btn-default btn-xs shiny icon-only info" ui-sref="panel.listalumnos({grupo_id: row.entity.id})"><i class="fa fa-users "></i></a>',a.gridOptions={showGridFooter:!0,enableSorting:!0,enableFiltering:!0,enebleGridColumnMenu:!1,columnDefs:[{field:"orden",type:"number",maxWidth:60},{name:"edicion",displayName:"Edición",maxWidth:80,enableSorting:!1,enableFiltering:!1,cellTemplate:j+k+l,enableCellEdit:!1},{field:"nombre",enableHiding:!1},{field:"abrev",displayName:"Abreviatura",maxWidth:50,enableSorting:!1},{field:"titular_id",displayName:"Titular",editDropdownOptionsArray:e,cellFilter:"mapProfesores:grid.appScope.profesores",editableCellTemplate:"ui-grid/dropdownEditor",editDropdownIdLabel:"profesor_id",editDropdownValueLabel:"nombres"},{field:"grado_id",displayName:"Grado",editDropdownOptionsArray:d,cellFilter:"mapGrado:grid.appScope.grados",editableCellTemplate:"ui-grid/dropdownEditor",editDropdownIdLabel:"id",editDropdownValueLabel:"nombre"}],multiSelect:!1,onRegisterApi:function(b){return a.gridApi=b,b.edit.on.afterCellEdit(a,function(b,c,d,e){var f;return d!==e&&(f={abrev:b.abrev,grado_id:b.grado_id,nombre:b.nombre,orden:b.orden,titular_id:b.titular_id,id:b.id},h.one("grupos/update").customPUT(f).then(function(a){return i.success("Grupo actualizado con éxito","Actualizado")},function(a){return i.error("Cambio no guardado","Error"),console.log("Falló al intentar guardar: ",a)})),a.$apply()})}},h.one("grupos").getList().then(function(b){return a.grupos=b,a.gridOptions.data=a.grupos}),a.$on("grupocreado",function(b,c){return a.grupos.push(c),a.gridOptions.data=a.grupos})}]).filter("mapGrado",["$filter",function(a){return function(b,c){var d;return b?(d=a("filter")(c,{id:b})[0],d.nombre):"Elija..."}}]).controller("RemoveGrupoCtrl",["$scope","$uibModalInstance","grupo","Restangular","toastr",function(a,b,c,d,e){return a.grupo=c,a.ok=function(){return d.all("grupos/destroy/"+c.id).remove().then(function(a){return e.success("Grupo "+c.nombre+" eliminado con éxito.","Eliminado")},function(a){return e.warning("No se pudo eliminar al grupo.","Problema")}),b.close(c)},a.cancel=function(){return b.dismiss("cancel")}}])}.call(this),function(){"use strict";angular.module("myvcFrontApp").controller("GruposNewCtrl",["$scope","Restangular","toastr",function(a,b,c){return a.grupo={orden:1,caritas:!1,valormatricula:0,valorpension:0},b.one("grados").getList().then(function(b){return a.grados=b}),b.one("contratos").getList().then(function(b){return a.profesores=b}),a.restarOrden=function(){return a.grupo.orden>0?a.grupo.orden=a.grupo.orden-1:void 0},a.sumarOrden=function(){return a.grupo.orden<40?a.grupo.orden=a.grupo.orden+1:void 0},a.crear=function(){return b.one("grupos/store").customPOST(a.grupo).then(function(b){return a.$emit("grupocreado",b),c.success("Grupo "+b.nombre+" creado")},function(a){return console.log("Falló al intentar guardar: ",a),c.error("No se pudo crear el grupo","Error")})}}])}.call(this),function(){"use strict";angular.module("myvcFrontApp").controller("GruposEditCtrl",["$scope","$state","Restangular","toastr",function(a,b,c,d){return c.one("grupos/show",b.params.grupo_id).get().then(function(b){return a.grupo=b}),c.one("grados").getList().then(function(b){return a.grados=b}),c.one("contratos").getList().then(function(b){return a.profesores=b}),a.guardar=function(){var b;return a.grupo.titular_id=a.grupo.titular.profesor_id,b=a.grupo.titular,delete a.grupo.titular,c.one("grupos/update").customPUT(a.grupo).then(function(c){return d.success("Grupo "+c.nombre+" editado."),a.grupo.titular=b},function(c){return a.grupo.titular=b,console.log("Falló al intentar guardar: ",c)})},a.restarOrden=function(){return a.grupo.orden>0?a.grupo.orden=a.grupo.orden-1:void 0},a.sumarOrden=function(){return a.grupo.orden<40?a.grupo.orden=a.grupo.orden+1:void 0}}])}.call(this),function(){"use strict";angular.module("myvcFrontApp").controller("NivelesCtrl",["$scope","$filter","$state","toastr","Restangular",function(a,b,c,d,e){var f,g;a.gridScope=a,a.editar=function(a){return c.go("panel.niveles.editar",{nivel_id:a.id})},a.eliminar=function(c){return c.remove().then(function(c){return a.niveles=b("filter")(a.niveles,{id:"!"+c.id}),a.gridOptions.data=a.niveles},function(a){return d.warning("No se pudo eliminar.")})},f='<a uib-tooltip="Editar" tooltip-placement="right" class="btn btn-default btn-xs shiny icon-only info" ng-click="grid.appScope.editar(row.entity)"><i class="fa fa-edit "></i></a>',g='<a uib-tooltip="X Eliminar" tooltip-placement="right" class="btn btn-default btn-xs shiny icon-only danger" ng-click="grid.appScope.eliminar(row.entity)"><i class="fa fa-times "></i></a>',a.gridOptions={showGridFooter:!0,enableSorting:!0,enableFiltering:!0,enebleGridColumnMenu:!1,enableCellEditOnFocus:!0,columnDefs:[{field:"orden",type:"number",maxWidth:50,enableSorting:!1},{name:"edicion",displayName:"Edición",maxWidth:50,enableSorting:!1,enableFiltering:!1,cellTemplate:f+g,enableCellEdit:!1},{field:"nombre",enableHiding:!1,enableCellEditOnFocus:!0},{field:"abrev",displayName:"Abreviatura",enableCellEditOnFocus:!0}],multiSelect:!1,onRegisterApi:function(b){return a.gridApi=b,b.edit.on.afterCellEdit(a,function(b,c,e,f){return e!==f&&b.put().then(function(a){return d.success("Nivel actualizado con éxito","Actualizado")},function(a){return d.error("Cambio no guardado","Error")}),a.$apply()})}},e.one("niveles_educativos").getList().then(function(b){return a.niveles=b,a.gridOptions.data=a.niveles})}])}.call(this),function(){"use strict";angular.module("myvcFrontApp").controller("NivelesNewCtrl",["$scope","Restangular","toastr",function(a,b,c){a.nivel={orden:0},a.restarOrden=function(){return a.nivel.orden>0?a.nivel.orden=a.nivel.orden-1:void 0},a.sumarOrden=function(){return a.nivel.orden<40?a.nivel.orden=a.nivel.orden+1:void 0},a.crear=function(){return b.one("niveles_educativos").customPOST(a.nivel).then(function(a){return c.success("Se hizo el post del nivel")},function(a){return c.error("Falló al intentar guardar")})}}])}.call(this),function(){"use strict";angular.module("myvcFrontApp").controller("NivelesEditCtrl",["$scope","toastr","$state","Restangular",function(a,b,c,d){return a.nivel={},d.one("niveles_educativos",c.params.nivel_id).get().then(function(b){return a.nivel=b}),a.guardar=function(){return a.nivel.put().then(function(a){return b.success("Se guardó nivel")},function(a){return b.error("Falló al intentar guardar")})},a.restarOrden=function(){return a.nivel.orden>0?a.nivel.orden=a.nivel.orden-1:void 0},a.sumarOrden=function(){return a.nivel.orden<40?a.nivel.orden=a.nivel.orden+1:void 0}}])}.call(this),function(){angular.module("myvcFrontApp").config(["$stateProvider","App",function(a,b){return a.state("panel.areas",{url:"^/areas",views:{maincontent:{templateUrl:""+b.views+"areas/areas.tpl.html",controller:"AreasCtrl"},headerContent:{templateUrl:""+b.views+"panel/panelHeader.tpl.html",controller:"PanelHeaderCtrl",resolve:{titulo:[function(){return"Areas"}]}}},data:{displayName:"Areas",icon_fa:"fa fa-graduation-cap",pageTitle:"Áreas - MyVc"}}),a.state("panel.materias",{url:"^/materias",views:{maincontent:{templateUrl:""+b.views+"areas/materias.tpl.html",controller:"MateriasCtrl"},headerContent:{templateUrl:""+b.views+"panel/panelHeader.tpl.html",controller:"PanelHeaderCtrl",resolve:{titulo:[function(){return"Materias"}]}}},resolve:{areas:["RAreas",function(a){return a.getList().then(function(a){return a})}]},data:{displayName:"Materias",icon_fa:"fa fa-graduation-cap",pageTitle:"Materias - MyVc"}}),a.state("panel.asignaturas",{url:"^/asignaturas",views:{maincontent:{templateUrl:""+b.views+"areas/asignaturas.tpl.html",controller:"AsignaturasCtrl"},headerContent:{templateUrl:""+b.views+"panel/panelHeader.tpl.html",controller:"PanelHeaderCtrl",resolve:{titulo:[function(){return"Asignaturas"}]}}},resolve:{materias:["Restangular",function(a){return a.one("materias").getList().then(function(a){return a})}],profesores:["Restangular",function(a){return a.one("contratos").getList().then(function(a){return a})}],grupos:["Restangular",function(a){return a.one("grupos").getList().then(function(a){return a})}]},data:{displayName:"Asignaturas",icon_fa:"fa fa-graduation-cap",pageTitle:"Asignatura - MyVc"}}),a.state("panel.listasignaturas",{url:"^/listasignaturas/:profesor_id",params:{profesor_id:{value:null}},views:{maincontent:{templateUrl:""+b.views+"areas/listAsignaturas.tpl.html",controller:"ListAsignaturasCtrl"},headerContent:{templateUrl:""+b.views+"panel/panelHeader.tpl.html",controller:"PanelHeaderCtrl",resolve:{titulo:[function(){return"Listado de asignaturas"}]}}},data:{displayName:"Listado de asignaturas",icon_fa:"fa fa-graduation-cap",pageTitle:"Mis asignaturas - MyVc"}}),a.state("panel.frases",{url:"^/frases",views:{maincontent:{templateUrl:""+b.views+"areas/frases.tpl.html",controller:"FrasesCtrl"},headerContent:{templateUrl:""+b.views+"panel/panelHeader.tpl.html",controller:"PanelHeaderCtrl",resolve:{titulo:[function(){return"Frases"}]}}},data:{displayName:"Frases",icon_fa:"fa fa-graduation-cap",pageTitle:"Frases - MyVc"}})}])}.call(this),function(){angular.module("myvcFrontApp").controller("MateriasCtrl",["$scope","$rootScope","toastr","Restangular","areas","$uibModal","$filter","App",function(a,b,c,d,e,f,g,h){var i,j;return a.creando=!1,a.editando=!1,a.currentmateria={},a.currenmateriaEdit={},a.areas=e,a.gridScope=a,a.cancelarCrear=function(){return a.creando=!1},a.cancelarEdit=function(){return a.editando=!1},a.crear=function(){return d.one("materias").customPOST(a.currentmateria).then(function(b){return a.gridOptions.data.push(b),delete a.currentmateria,c.success("Materia creada con éxito")},function(a){return c.error("Error creando","Problema")})},a.guardar=function(){return d.one("materias/update",a.currentmateriaEdit.id).customPUT(a.currentmateriaEdit).then(function(b){return a.currentmateriaEdit.area_id=b.area_id,delete a.currentmateriaEdit,c.success("Materia actualizada con éxito"),a.cancelarEdit()},function(a){return c.error("Error guardando","Problema")})},a.editar=function(b){return b.area=g("filter")(e,{id:b.area_id})[0],console.log(b),a.currentmateriaEdit=b,a.editando=!0},a.eliminar=function(b){var c;return c=f.open({templateUrl:h.views+"areas/removeMateria.tpl.html",controller:"RemovemateriaCtrl",resolve:{materia:function(){return b}}}),c.result.then(function(b){return a.gridOptions.data=g("filter")(a.gridOptions.data,{id:"!"+b.id})})},i='<a uib-tooltip="Editar" tooltip-placement="right" class="btn btn-default btn-xs shiny icon-only info" ng-click="grid.appScope.editar(row.entity)"><i class="fa fa-edit "></i></a>',j='<a uib-tooltip="X Eliminar" tooltip-placement="right" class="btn btn-default btn-xs shiny icon-only danger" ng-click="grid.appScope.eliminar(row.entity)"><i class="fa fa-times "></i></a>',a.gridOptions={enableSorting:!0,enableFiltering:!0,enebleGridColumnMenu:!1,enableCellEditOnFocus:!0,columnDefs:[{field:"id",type:"number",maxWidth:50,enableFiltering:!1},{name:"edicion",displayName:"Edición",maxWidth:50,enableSorting:!1,enableFiltering:!1,cellTemplate:i+j,enableCellEdit:!1},{field:"materia",enableHiding:!1,filter:{condition:function(b,c,d){var e,f;return f=g("filter")(a.gridOptions.data,{materia:b}),e=g("filter")(f,{materia:c}),e.length>0}},enableCellEditOnFocus:!0},{field:"alias",displayName:"Alias",enableCellEditOnFocus:!0},{field:"area_id",displayName:"Area",editDropdownOptionsArray:e,cellFilter:"mapAreas:grid.appScope.areas",editableCellTemplate:"ui-grid/dropdownEditor",filter:{condition:function(b,c){var d,e;return e=g("filter")(a.areas,{nombre:b}),d=g("filter")(e,{id:c},!0),d.length>0}},editDropdownIdLabel:"id",editDropdownValueLabel:"nombre"},{name:"nn",displayName:"",maxWidth:20,enableSorting:!1,enableFiltering:!1}],multiSelect:!1,onRegisterApi:function(b){return a.gridApi=b,b.edit.on.afterCellEdit(a,function(b,c,d,e){return d!==e&&(a.currentmateriaEdit=b,a.guardar()),a.$apply()})}},d.one("materias").getList().then(function(b){return a.gridOptions.data=b})}]).filter("mapAreas",["$filter",function(a){return function(b,c){var d;return b?(d=a("filter")(c,{id:b})[0],d?d.nombre:"Elija..."):"Elija..."}}]).controller("RemovemateriaCtrl",["$scope","$uibModalInstance","materia","Restangular","toastr",function(a,b,c,d,e){return a.materia=c,a.ok=function(){return d.all("materias/destroy/"+c.id).remove().then(function(a){return e.success("Materia "+c.nombre+" eliminada con éxito.","Eliminada")},function(a){return e.warning("Problema","No se pudo eliminar la Materia.")}),b.close(c)},a.cancel=function(){return b.dismiss("cancel")}}])}.call(this),function(){angular.module("myvcFrontApp").controller("AsignaturasCtrl",["$scope","Restangular","materias","grupos","profesores","$uibModal","$filter","App","AuthService","toastr",function(a,b,c,d,e,f,g,h,i,j){var k,l;return i.verificar_acceso(),a.creando=!1,a.editando=!1,a.currentasignatura={grupo:void 0,profesor:void 0},a.currenasignaturaEdit={},a.asignaturas=[],a.materias=c,a.grupos=d,a.profesores=e,a.gridScope=a,a.seleccionaGrupo=function(b,c){var d;return b=void 0===b?{id:"!"}:b,a.gridOptions.data=g("filter")(a.asignaturas,{grupo_id:b.id},!0),void 0!==a.currentasignatura.profesor?(d=a.currentasignatura.profesor.id,a.gridOptions.data=g("filter")(a.gridOptions.data,{profesor_id:d},!0)):void 0},a.seleccionaProfe=function(b,c){var d;return b=void 0===b?{id:"!"}:b,a.gridOptions.data=g("filter")(a.asignaturas,{profesor_id:b.id},!0),void 0!==a.currentasignatura.grupo?(d=a.currentasignatura.grupo.id,a.gridOptions.data=g("filter")(a.gridOptions.data,{grupo_id:d},!0)):void 0},a.filtrarAsignaturas=function(){var b,c;return a.gridOptions.data=a.asignaturas,void 0!==a.currentasignatura.grupo&&(b=a.currentasignatura.grupo.id,a.gridOptions.data=g("filter")(a.gridOptions.data,{grupo_id:b},!0)),void 0!==a.currentasignatura.profesor?(c=a.currentasignatura.profesor.id,a.gridOptions.data=g("filter")(a.gridOptions.data,{profesor_id:c},!0)):void 0},a.cancelarCrear=function(){return a.creando=!1},a.cancelarEdit=function(){return a.editando=!1},a.crear=function(){return b.one("asignaturas").customPOST(a.currentasignatura).then(function(b){return a.asignaturas.push(b),a.filtrarAsignaturas(),a.cancelarCrear(),j.success("Asignatura creada con éxito")},function(a){return j.error("Error creando","Problema")})},a.guardar=function(){return b.one("asignaturas/update",a.currentasignaturaEdit.id).customPUT(a.currentasignaturaEdit).then(function(b){return a.currentasignaturaEdit.area_id=b.area_id,j.success("Asignatura actualizada con éxito"),a.cancelarEdit()},function(a){return console.log("No se pudo crear",a),j.error("Error guardando","Problema")})},a.editar=function(b){return b.materia=g("filter")(c,{id:b.materia_id},!0)[0],b.grupo=g("filter")(d,{id:b.grupo_id},!0)[0],b.profesor=g("filter")(e,{profesor_id:b.profesor_id},!0)[0],a.currentasignaturaEdit=b,a.editando=!0},a.eliminar=function(b){var c;return c=f.open({templateUrl:h.views+"areas/removeAsignatura.tpl.html",controller:"RemoveAsignaturaCtrl",resolve:{asignatura:function(){return b}}}),c.result.then(function(b){return a.asignaturas=g("filter")(a.asignaturas,{id:"!"+b.id}),a.gridOptions.data=a.asignaturas,a.filtrarAsignaturas()})},k='<a uib-tooltip="Editar" tooltip-placement="left" class="btn btn-default btn-xs shiny icon-only info" ng-click="grid.appScope.editar(row.entity)"><i class="fa fa-edit "></i></a>',l='<a uib-tooltip="X Eliminar" tooltip-placement="right" class="btn btn-default btn-xs shiny icon-only danger" ng-click="grid.appScope.eliminar(row.entity)"><i class="fa fa-trash "></i></a>',a.gridOptions={showGridFooter:!0,enableSorting:!0,enableFiltering:!0,enebleGridColumnMenu:!1,enableCellEditOnFocus:!0,columnDefs:[{field:"id",type:"number",width:60,enableFiltering:!1,enableCellEdit:!1,enableColumnMenu:!1},{name:"edicion",displayName:"Edición",width:70,enableSorting:!1,enableFiltering:!1,cellTemplate:k+l,enableCellEdit:!1,enableColumnMenu:!1},{field:"orden",displayName:"Orden",type:"number",maxWidth:50,enableFiltering:!1},{field:"materia_id",displayName:"Materia",editDropdownOptionsArray:c,cellFilter:"mapMaterias:grid.appScope.materias",filter:{condition:function(a,b){var d,e;return e=g("filter")(c,{materia:a}),d=g("filter")(e,{id:b},!0),d.length>0}},editableCellTemplate:"ui-grid/dropdownEditor",editDropdownIdLabel:"id",editDropdownValueLabel:"materia",enableCellEditOnFocus:!0},{field:"grupo_id",displayName:"Grupos",editDropdownOptionsArray:d,cellFilter:"mapGrupos:grid.appScope.grupos",filter:{condition:function(a,b){var c,e;return e=g("filter")(d,{nombre:a}),c=g("filter")(e,{id:b},!0),c.length>0}},editableCellTemplate:"ui-grid/dropdownEditor",editDropdownIdLabel:"id",editDropdownValueLabel:"nombre",enableCellEditOnFocus:!0},{field:"profesor_id",displayName:"Profesor",editDropdownOptionsArray:e,cellFilter:"mapProfesores:grid.appScope.profesores",filter:{condition:function(a,b){var c,d;return d=g("filter")(e,{nombres:a,apellidos:a}),c=g("filter")(d,{id:b},!0),c.length>0}},editableCellTemplate:"ui-grid/dropdownEditor",editDropdownIdLabel:"id",editDropdownValueLabel:"nombres",enableCellEditOnFocus:!0},{field:"creditos",displayName:"Créditos",type:"number",maxWidth:50},{name:"nn",displayName:"",width:10,enableSorting:!1,enableFiltering:!1,enableColumnMenu:!1}],multiSelect:!1,onRegisterApi:function(b){return a.gridApi=b,b.edit.on.afterCellEdit(a,function(b,c,d,e){return d!==e&&(a.currentasignaturaEdit=b,a.guardar()),a.$apply()})}},b.one("asignaturas").getList().then(function(b){return a.asignaturas=b,a.gridOptions.data=a.asignaturas})}]).filter("mapMaterias",["$filter",function(a){return function(b,c){var d;return b?(d=a("filter")(c,{id:b},!0)[0],d?d.materia:"En papelera..."):"Elija..."}}]).filter("mapGrupos",["$filter",function(a){return function(b,c){var d;return b?(d=a("filter")(c,{id:b},!0)[0],d.nombre):"Elija..."}}]).filter("mapProfesores",["$filter",function(a){return function(b,c){var d;return b?(d=a("filter")(c,{profesor_id:b},!0),d.length>0?d[0].nombres:"Elija..."):"Elija..."}}]).controller("RemoveAsignaturaCtrl",["$scope","$uibModalInstance","asignatura","Restangular","toastr",function(a,b,c,d,e){return a.asignatura=c,a.ok=function(){return d.all("asignaturas/destroy/"+c.id).remove().then(function(a){return e.success("asignatura "+c.nombre+" eliminada con éxito.","Eliminada")},function(a){return e.warning("Problema","No se pudo eliminar la asignatura.")}),b.close(c)},a.cancel=function(){return b.dismiss("cancel")}}])}.call(this),function(){angular.module("myvcFrontApp").controller("ListAsignaturasCtrl",["$scope","$http","Restangular","$state","$cookies","$rootScope","AuthService","Perfil","App","resolved_user",function(a,b,c,d,e,f,g,h,i,j){var k,l;return a.UNIDAD=a.USER.unidad_displayname,a.GENERO_UNI=a.USER.genero_unidad,a.SUBUNIDAD=a.USER.subunidad_displayname,a.GENERO_SUB=a.USER.genero_subunidad,a.UNIDADES=a.USER.unidades_displayname,a.SUBUNIDADES=a.USER.subunidades_displayname,a.views=i.views+"areas/",a.profesor={},d.params.profesor_id?(a.profesor_id=!0,c.all("asignaturas/listasignaturas/"+d.params.profesor_id).getList().then(function(b){return a.asignaturas=b,c.one("profesores/show/"+d.params.profesor_id).get().then(function(b){return a.profesor=b},function(a){
return console.log("No se pudo traer el profesor, ",a)})},function(a){return console.log("No se pudo traer las asignaturas, ",a)})):(a.profesor_id=!1,c.all("asignaturas/listasignaturas").getList().then(function(b){return a.asignaturas=b},function(a){return console.log("No se pudo traer tus asignaturas, ",a)})),k="grupos/titularias",l=a.profesor_id?k+"/"+d.params.profesor_id:k,c.all(l).getList().then(function(b){return a.gruposcomportamientos=b},function(a){return console.log("No se pudo traer las titularías, ",a)}),a.open=function(a){return d.go("panel.unidades",{asignatura_id:a.asignatura_id}),console.log(a)}}])}.call(this),function(){angular.module("myvcFrontApp").controller("FrasesCtrl",["$scope","$rootScope","$filter","Restangular","$uibModal","App","AuthService",function(a,b,c,d,e,f,g){var h,i;return g.verificar_acceso(),a.currentFrase={},a.currentFraseEdit={},a.creando=!1,a.gridScope=a,a.tipos=[{tipo_frase:"Debilidad"},{tipo_frase:"Amenaza"},{tipo_frase:"Oportunidad"},{tipo_frase:"Fortaleza"}],a.currentFrase.tipo_frase={tipo_frase:"Fortaleza"},a.cancelarCrear=function(){return a.creando=!1},a.crear=function(){return d.one("frases/store").customPOST(a.currentFrase).then(function(b){return a.gridOptions.data.push(b),a.currentFrase.frase="",a.cancelarCrear(),a.toastr.success("Frase creada con éxito")},function(b){return console.log("No se pudo crear",b),a.toastr.error("Error creando","Problema")})},a.guardar=function(){return d.one("frases/update",a.currentFraseEdit.id).customPUT(a.currentFraseEdit).then(function(b){return a.currentFraseEdit.frase=b.frase,a.toastr.success("Frase actualizada con éxito")},function(b){return console.log("No se pudo crear",b),a.toastr.error("Error guardando","Problema")})},a.eliminar=function(b){var d;return d=e.open({templateUrl:f.views+"areas/removeFrase.tpl.html",controller:"RemoveFraseCtrl",resolve:{frase:function(){return b}}}),d.result.then(function(b){return a.gridOptions.data=c("filter")(a.gridOptions.data,{id:"!"+b.id}),console.log("Resultado del modal: ",b)})},h='<a uib-tooltip="Editar" tooltip-placement="right" class="btn btn-default btn-xs shiny icon-only info" ng-click="grid.appScope.editar(row.entity)"><i class="fa fa-edit "></i></a>',i='<a uib-tooltip="X Eliminar" tooltip-placement="right" class="btn btn-default btn-xs shiny icon-only danger" ng-click="grid.appScope.eliminar(row.entity)"><i class="fa fa-trash "></i></a>',a.gridOptions={enableSorting:!0,enableFiltering:!0,enebleGridColumnMenu:!1,enableCellEditOnFocus:!0,columnDefs:[{field:"id",type:"number",width:70,enableCellEdit:!1},{name:"edicion",displayName:"Edición",width:60,enableSorting:!1,enableFiltering:!1,cellTemplate:i,enableCellEdit:!1},{field:"tipo_frase",displayName:"Tipo",width:90,enableCellEdit:!1},{field:"frase",displayName:"Frase",minWidth:300}],multiSelect:!1,onRegisterApi:function(b){return a.gridApi=b,b.edit.on.afterCellEdit(a,function(b,c,d,e){return d!==e&&(a.currentFraseEdit=b,a.guardar()),a.$apply()})}},d.all("frases").getList().then(function(b){return a.gridOptions.data=b})}]).controller("RemoveFraseCtrl",["$scope","$uibModalInstance","frase","Restangular","toastr",function(a,b,c,d,e){return a.frase=c,a.ok=function(){return d.all("frases/destroy/"+c.id).remove().then(function(a){return e.success('frase "'+c.frase+'" eliminada con éxito.',"Eliminada")},function(a){return e.warning("Problema","No se pudo eliminar la frase."),console.log("Error eliminando frase: ",a)}),b.close(c)},a.cancel=function(){return b.dismiss("cancel")}}])}.call(this),function(){"use strict";angular.module("myvcFrontApp").controller("PaisesCtrl",["$scope","$rootScope","$interval",function(a,b,c){var d;a.bigLoader=!0,d=c(function(){return a.bigLoader=!1},1e3),a.gridOptions={enableSorting:!0,columnDefs:[{field:"pais"},{field:"abreviación"},{field:"id"}],onRegisterApi:function(b){return a.gridApi=b}}}])}.call(this),function(){"use strict";angular.module("myvcFrontApp").controller("CiudadesCtrl",["$scope","$rootScope","$interval",function(a,b,c){var d;a.bigLoader=!0,d=c(function(){return a.bigLoader=!1},1e3),a.gridOptions={enableSorting:!0,columnDefs:[{field:"ciudad"},{field:"pais_id"},{field:"id"}],onRegisterApi:function(b){return a.gridApi=b}}}])}.call(this),function(){"use strict";angular.module("myvcFrontApp").controller("MensajesCtrl",["$scope","$rootScope","$interval",function(a,b,c){}])}.call(this),function(){"use strict";angular.module("myvcFrontApp").config(["$stateProvider","App",function(a,b){return a.state("panel.filemanager",{url:"/filemanager",views:{maincontent:{templateUrl:""+b.views+"fileManager/fileManager.tpl.html",controller:"FileManagerCtrl"},headerContent:{templateUrl:""+b.views+"panel/panelHeader.tpl.html",controller:"PanelHeaderCtrl",resolve:{titulo:[function(){return"Administrador de archivos"}]}}},data:{displayName:"Administrador de archivos",icon_fa:"fa fa-cube"}})}])}.call(this),function(){"use strict";angular.module("myvcFrontApp").controller("FileManagerCtrl",["$scope","$upload","$timeout","$filter","App","Restangular","Perfil","$uibModal","resolved_user",function(a,b,c,d,e,f,g,h,i){var j,k,l;a.USER=i,a.subir_intacta={},j=function(){return a.dato={imgUsuario:{id:a.USER.imagen_id,nombre:a.USER.imagen_nombre},imgOficial:{id:a.USER.foto_id,nombre:a.USER.foto_nombre}}},j(),a.perfilPath=e.images+"perfil/",a.imgFiles=[],a.errorMsg="",a.fileReaderSupported=null!==window.FileReader&&(null===window.FileAPI||FileAPI.html5!==!1),a.dato.usuarioElegido=[],f.one("myimages").customGET().then(function(b){return a.imagenes_privadas=b.imagenes_privadas,a.imagenes_publicas=b.imagenes_publicas,a.dato.imgParaUsuario=b.imagenes_privadas[0]},function(a){return console.log("No se trajeron las imágenes.",a)}),a.upload=function(b){var c,d,e,f,g;if(a.imgFiles=b,a.errorMsg="",b&&b.length){for(g=[],d=e=0,f=b.length;f>=0?f>e:e>f;d=f>=0?++e:--e)c=b[d],g.push(k(c));return g}},k=function(b){return a.errorMsg=null,l(b),a.generateThumb(b)},a.generateThumb=function(b){return null!==b&&a.fileReaderSupported&&b.type.indexOf("image")>-1?c(function(){var a;return a=new FileReader,a.readAsDataURL(b),a.onload=function(a){return c(function(){return b.dataUrl=a.target.result})}}):void 0},l=function(c){var d;return d=a.subir_intacta.intacta?"-intacta":"",c.size>1e7?void(a.errorMsg="Archivo excede los 10MB permitidos."):b.upload({url:e.Server+"myimages/store"+d,file:c}).progress(function(a){var b;return b=parseInt(100*a.loaded/a.total),c.porcentaje=b}).success(function(b,c,d,e){return a.subir_intacta.intacta?a.imagenes_publicas.push(b):a.imagenes_privadas.push(b)}).error(function(a){return console.log("Falla uploading: ",a)}).xhr(function(a){})},a.pedirCambioUsuario=function(b){return f.one("myimages/cambiarimagenperfil",a.USER.user_id).put({imagen_id:b.id}).then(function(c){return g.setImagen(c.imagen_id,b.nombre),a.$emit("cambianImgs",{image:c}),a.toastr.success("Imagen principal cambiada")},function(b){return console.log("NO Se pedirCambioUsuario: ",b),a.toastr.error("No se pudo cambiar imagen","Problema")})},a.pedirCambioOficial=function(b){return f.one("myimages/cambiarimagenoficial",a.USER.user_id).put({foto_id:b.id}).then(function(c){return c.asked_by_user_id?a.toastr.info("Pedido realizado, espera respuesta."):"En espera"===c?a.toastr.info("Espera respuesta."):(g.setOficial(c.foto_id,b.nombre),a.$emit("cambianImgs",{foto:c}),a.toastr.success("Foto oficial cambiada"))},function(b){return console.log("NO Se pedirCambioOficial: ",b),a.toastr.error("No se pudo cambiar foto","Problema")})},a.cambiarLogoColegio=function(b){return f.one("myimages/cambiarlogocolegio").put({logo_id:b.id}).then(function(b){return a.toastr.success("Logo del colegio cambiado")},function(b){return console.log("No se cambió logo: ",b),a.toastr.error("No se pudo cambiar el logo","Problema")})},a.imagenSelect=function(a,b){return console.log("imagenSelect: ",a,b)},a.fotoSelect=function(a,b){return console.log("imagenSelect: ",a,b)},a.grupoSelect=function(b,c){return console.log("grupoSelect: ",b,c),f.all("grupos/listado/"+b.id).getList().then(function(b){return a.alumnos=b,a.dato.alumnoElegido=b[0]},function(a){return console.log("No se pudo traer los usuarios")})},a.rotarImagen=function(b){return f.one("myimages/rotarimagen",b.id).customPUT().then(function(c){return b.nombre="",console.log("Imagen rotada con éxito."),a.toastr.success("Imagen rotada"),b.nombre=c+"?"+(new Date).getTime()},function(b){return console.log("No se pudo rotar la imagen.",b),a.toastr.error("Imagen no rotada")})},a.publicarImagen=function(b){return f.one("myimages/publicar-imagen",b.id).customPUT().then(function(c){return console.log("Ahora la imagen es pública."),a.toastr.info("Ahora la imagen es pública"),a.imagenes_privadas=d("filter")(a.imagenes_privadas,{id:"!"+b.id}),a.imagenes_publicas.push(b)},function(b){return console.log("No se pudo publicar la imagen.",b),a.toastr.error("Imagen no publicada")})},a.privatizarImagen=function(b){return f.one("myimages/privatizar-imagen",b.id).customPUT().then(function(c){return c.imagen?void a.toastr.warning("No puede ser logo del año "+c.imagen.is_logo_of_year):(console.log("Ahora la imagen es privada."),a.toastr.info("Ahora la imagen es privada"),b.user_id===a.USER.id&&a.imagenes_privadas.push(b),a.imagenes_publicas=d("filter")(a.imagenes_publicas,{id:"!"+b.id}))},function(b){return console.log("No se pudo privatizar la imagen.",b),a.toastr.error("Imagen no privatizada")})},a.borrarImagen=function(b){var c;return c=h.open({templateUrl:e.views+"fileManager/removeImage.tpl.html",controller:"RemoveImageCtrl",size:"sm",resolve:{imagen:function(){return b},user_id:function(){return a.USER.id},datos_imagen:function(){var c;return c={imagen_id:b.id,user_id:a.USER.id},f.one("myimages/datos-imagen").customGET("",c).then(function(b){return a.datos_imagen=b},function(b){return a.toastr.error("Error al traer datos de imagen","Problema"),{}})}}}),c.result.then(function(b){return b.publica?a.imagenes_publicas=d("filter")(a.imagenes_publicas,{id:"!"+b.id}):a.imagenes_privadas=d("filter")(a.imagenes_privadas,{id:"!"+b.id})})},f.all("perfiles/usuariosall").getList().then(function(b){return a.usuariosall=b,a.usuariosprofes=d("filter")(b,{tipo:"Profesor"},!0),a.dato.usuarioElegido=b[0]},function(a){return console.log("No se pudo traer los usuarios",a)}),f.one("grupos").getGrupos().then(function(b){return a.grupos=b}),a.cambiarImgUnUsuario=function(b,c){var e;return console.log("Vamos a guardar el cambio de imagen",b,c),e={imgParaUsuario:c.id},f.one("perfiles/cambiarimgunusuario",b.user_id).customPUT(e).then(function(e){var f;return f=d("filter")(a.usuariosall,{user_id:b.user_id}),f[0].imagen_id=c.id,f[0].imagen_nombre=c.nombre,a.toastr.success("Imagen asignada con éxito"),console.log(e)},function(b){return console.log("Error al asignar imagen a usuario",b),a.toastr.error("Error al asignar imagen a usuario","Problema")})},a.usuarioSelect=function(b,c){return a.dato.selectUsuarioModel=b},a.cambiarFotoUnAlumno=function(b,c){var e;return console.log("Vamos a guardar el cambio de foto",b,c),e={imgOficialAlumno:c.id},f.one("perfiles/cambiarimgunalumno",b.alumno_id).customPUT(e).then(function(e){var f;return f=d("filter")(a.alumnos,{id:b.id}),f[0].foto_id=c.id,f[0].foto_nombre=c.nombre,a.toastr.success("Foto oficial asignada con éxito"),console.log(e)},function(b){return console.log("Error al asignar foto al alumno",b),a.toastr.error("Error al asignar foto al alumno","Problema")})},a.cambiarFotoUnProfe=function(b,c){var d;return console.log("Vamos a guardar el cambio de foto",b,c),d={imgOficialProfe:c.id},f.one("perfiles/cambiarimgunprofe",b.persona_id).customPUT(d).then(function(b){return a.toastr.success("Foto oficial asignada con éxito"),console.log(b)},function(b){return console.log("Error al asignar foto al profesor",b),a.toastr.error("Error al asignar foto al profesor","Problema")})},a.pedirCambioFirma=function(b,c){var d;return console.log("Cambiaremos firma ",b,c),d={imgFirmaProfe:c.id},f.one("perfiles/cambiarfirmaunprofe",b.persona_id).customPUT(d).then(function(b){return a.toastr.success("Firma asignada con éxito"),console.log(b)},function(b){return console.log("Error al asignar foto al profesor",b),a.toastr.error("Error al asignar foto al profesor","Problema")})}}])}.call(this),function(){angular.module("myvcFrontApp").controller("RemoveImageCtrl",["$scope","$uibModalInstance","imagen","user_id","datos_imagen","App","Restangular","AuthService",function(a,b,c,d,e,f,g,h){a.imagesPath=f.images+"perfil/",a.imagen=c,a.datos_imagen=e,a.hasRoleOrPerm=h.hasRoleOrPerm,a.ok=function(){return g.all("myimages/destroy/"+c.id).remove().then(function(a){return console.log("Imagen removida con éxito.")},function(a){return console.log("No se pudo eliminar la imagen.",a)}),b.close(c)},a.cancel=function(){return b.dismiss("cancel")}}])}.call(this),function(){angular.module("myvcFrontApp").config(["$stateProvider","App","USER_ROLES","PERMISSIONS",function(a,b,c,d){return a.state("panel.papelera",{url:"^/papelera",views:{maincontent:{templateUrl:""+b.views+"papelera/papelera.tpl.html",controller:"PapeleraCtrl"},headerContent:{templateUrl:""+b.views+"panel/panelHeader.tpl.html",controller:"PanelHeaderCtrl",resolve:{titulo:[function(){return"Papelera de reciclaje"}]}}},data:{displayName:"Papelera",icon_fa:"fa fa-trash",pageTitle:"Papelera - MyVc"}})}])}.call(this),function(){angular.module("myvcFrontApp").controller("PapeleraCtrl",["$scope","App","$rootScope","$state","$interval","Restangular","$uibModal","$filter","toastr",function(a,b,c,d,e,f,g,h,i){var j,k,l,m,n,o;return a.restaurarAlum=function(b){return f.one("alumnos/restore",b.alumno_id).customPUT().then(function(){return a.gridAlumnos.data=h("filter")(a.gridAlumnos.data,{alumno_id:"!"+b.alumno_id}),i.success("Éxito","Alumno restaurado")},function(a){return i.error("No se restauró el alumno","Error")})},a.elimAlum=function(c){var d;return d=g.open({templateUrl:b.views+"papelera/forceRemoveAlumno.tpl.html",controller:"ForceRemoveAlumnoCtrl",resolve:{alumno:function(){return c}}}),d.result.then(function(b){return a.gridAlumnos.data=h("filter")(a.gridAlumnos.data,{alumno_id:"!"+b.alumno_id}),console.log("Resultado del modal: ",b)})},j='<a class="btn btn-default btn-xs shiny info" ng-click="grid.appScope.restaurarAlum(row.entity)"><i class="fa fa-refresh "></i>Restaurar</a>',k='<a uib-tooltip="¡Eliminar completamente!" tooltip-placement="right" class="btn btn-default btn-xs shiny icon-only danger" ng-click="grid.appScope.elimAlum(row.entity)"><i class="fa fa-times "></i></a>',a.gridAlumnos={enableSorting:!0,enableFiltering:!0,enebleGridColumnMenu:!1,columnDefs:[{field:"alumno_id",displayName:"Id",maxWidth:40},{name:"edicion",displayName:"Edición",minWidth:95,enableSorting:!1,enableFiltering:!1,cellTemplate:j+k},{field:"nombres",enableHiding:!1},{field:"apellidos"},{field:"sexo",maxWidth:20},{field:"username",displayName:"Usuario"},{field:"fecha_nac",displayName:"Nacimiento",cellFilter:"date:mediumDate",type:"date"},{field:"direccion",displayName:"Dirección"}],multiSelect:!1,onRegisterApi:function(b){return a.gridApi=b}},a.restaurarGrupo=function(b){return f.one("grupos/restore",b.id).customPUT().then(function(){return a.gridGrupos.data=h("filter")(a.gridGrupos.data,{id:"!"+b.id}),i.success("Éxito","Grupo restaurado")},function(a){return i.error("No se restauró el grupo","Error")})},a.elimGrupo=function(c){var d;return d=g.open({templateUrl:b.views+"papelera/forceRemoveGrupo.tpl.html",controller:"ForceRemoveGrupoCtrl",resolve:{grupo:function(){return c}}}),d.result.then(function(b){return a.gridGrupos.data=h("filter")(a.gridGrupos.data,{id:"!"+b.id})})},l='<a class="btn btn-default btn-xs shiny info" ng-click="grid.appScope.restaurarGrupo(row.entity)"><i class="fa fa-refresh "></i>Restaurar</a>',m='<a uib-tooltip="¡Eliminar completamente!" tooltip-placement="right" class="btn btn-default btn-xs shiny icon-only danger" ng-click="grid.appScope.elimGrupo(row.entity)"><i class="fa fa-times "></i></a>',a.gridGrupos={enableSorting:!0,enableFiltering:!0,enebleGridColumnMenu:!1,columnDefs:[{field:"id",displayName:"Id",maxWidth:40},{name:"edicion",displayName:"Edición",maxWidth:50,enableSorting:!1,enableFiltering:!1,cellTemplate:l+m},{field:"nombre",enableHiding:!1},{field:"abrev",displayName:"Abreviatura"},{field:"grado_id",maxWidth:20},{field:"titular_id",displayName:"Titular"}],multiSelect:!1,onRegisterApi:function(b){return a.gridApi=b}},f.all("alumnos/trashed").getList().then(function(b){return a.gridAlumnos.data=b},function(a){return i.warning("No se pudo traer los alumnos eliminados.")}),f.all("grupos/trashed").getList().then(function(b){return a.gridGrupos.data=b},function(a){return i.warning("No se pudo traer los grupos eliminados.")}),a.restaurarUnidad=function(b){return f.one("unidades/restore",b.id).customPUT().then(function(){return a.gridUnidad.data=h("filter")(a.gridUnidad.data,{id:"!"+b.id}),i.success("Éxito","Unidad restaurada")},function(a){return i.error("No se restauró la unidad","Error")})},a.elimUnidad=function(c){var d;return d=g.open({templateUrl:b.views+"papelera/forceRemoveUnidad.tpl.html",controller:"ForceRemoveUnidadCtrl",resolve:{unidad:function(){return c}}}),d.result.then(function(b){return a.gridUnidad.data=h("filter")(a.gridUnidad.data,{id:"!"+b.id}),console.log("Resultado del modal: ",b)})},n='<a class="btn btn-default btn-xs shiny info" ng-click="grid.appScope.restaurarUnidad(row.entity)"><i class="fa fa-refresh "></i>Restaurar</a>',o='<a uib-tooltip="¡Eliminar completamente!" tooltip-placement="right" class="btn btn-default btn-xs shiny icon-only danger" ng-click="grid.appScope.elimUnidad(row.entity)"><i class="fa fa-times "></i></a>',a.gridUnidad={enableSorting:!0,enableFiltering:!0,enebleGridColumnMenu:!1,columnDefs:[{field:"id",displayName:"Id",maxWidth:40},{name:"edicion",displayName:"Edición",maxWidth:50,enableSorting:!1,enableFiltering:!1,cellTemplate:n+o},{field:"definicion",displayName:"Definición",enableHiding:!1},{field:"alias_materia",displayName:"Materia"},{field:"abrev_grupo",displayName:"Grupo"},{field:"numero_periodo",displayName:"Per",maxWidth:20},{field:"porcentaje",displayName:"Porc"}],multiSelect:!1,onRegisterApi:function(b){return a.gridApi=b}},f.all("unidades/trashed").getList().then(function(b){return a.gridUnidad.data=b},function(a){return i.warning("No se pudo traer las unidades eliminados.")}),f.all("unidades/trashed").getList().then(function(b){return a.gridUnidad.data=b},function(a){return i.warning("No se pudo traer las unidades eliminadas.")})}])}.call(this),function(){angular.module("myvcFrontApp").controller("ForceRemoveAlumnoCtrl",["$scope","$uibModalInstance","alumno","Restangular","toastr",function(a,b,c,d,e){return a.alumno=c,a.ok=function(){return d.all("alumnos/forcedelete/"+c.alumno_id).remove().then(function(a){return e.success("Alumno eliminado con éxito.","Eliminado")},function(a){return e.warning("No se pudo eliminar al alumno.","Problema"),console.log("Error eliminando alumno: ",a)}),b.close(c)},a.cancel=function(){return b.dismiss("cancel")}}]).controller("ForceRemoveGrupoCtrl",["$scope","$uibModalInstance","grupo","Restangular","toastr",function(a,b,c,d,e){return a.grupo=c,a.ok=function(){return d.all("grupos/forcedelete/"+c.id).remove().then(function(a){return e.success("Grupo eliminado con éxito.","Eliminado")},function(a){return e.warning("No se pudo eliminar al grupo.","Problema"),console.log("Error eliminando grupo: ",a)}),b.close(c)},a.cancel=function(){return b.dismiss("cancel")}}]).controller("ForceRemoveUnidadCtrl",["$scope","$uibModalInstance","unidad","Restangular","toastr",function(a,b,c,d,e){return a.unidad=c,a.ok=function(){return d.all("unidades/forcedelete/"+c.id).remove().then(function(a){return e.success("Unidad eliminada con éxito.","Eliminado")},function(a){return e.warning("No se pudo eliminar la unidad.","Problema"),console.log("Error eliminando unidad: ",a)}),b.close(c)},a.cancel=function(){return b.dismiss("cancel")}}])}.call(this),function(){angular.module("myvcFrontApp").config(["$stateProvider","App",function(a,b){return a.state("panel.bitacora",{url:"/bitacora",views:{maincontent:{templateUrl:""+b.views+"bitacora/bitacora.tpl.html",controller:"BitacoraCtrl"},headerContent:{templateUrl:""+b.views+"panel/panelHeader.tpl.html",controller:"PanelHeaderCtrl",resolve:{titulo:[function(){return"Bitacora"}]}}},data:{displayName:"Bitacora",icon_fa:"fa fa-male",pageTitle:"Bitácora - MyVc"}})}])}.call(this),function(){angular.module("myvcFrontApp").controller("BitacoraCtrl",["$scope","$rootScope","$state","Restangular","uiGridConstants","AuthService",function(a,b,c,d,e,f){var g;return a.data={},a.hasRoleOrPerm=f.hasRoleOrPerm,d.all("contratos").getList().then(function(b){return a.contratos=b},function(b){return a.toastr.error("No se trajeron los profesores contratados")}),d.all("bitacoras").getList().then(function(b){return a.gridOptions.data=b},function(b){return a.toastr.error("No se pudo traer la bitácora")}),a.seleccionaProfe=function(b,c){return d.all("bitacoras/index/"+b.user_id).getList().then(function(b){return a.gridOptions.data=b},function(b){return a.toastr.error("No se pudo traer la bitácora")})},g='<a uib-tooltip="X Eliminar" tooltip-placement="right" class="btn btn-default btn-xs shiny icon-only danger" ng-click="grid.appScope.eliminar(row.entity)"><i class="fa fa-times "></i></a>',a.gridOptions={enableSorting:!0,enableFiltering:!0,enebleGridColumnMenu:!1,enableCellEditOnFocus:!0,columnDefs:[{field:"id",type:"number",width:60},{name:"edicion",displayName:"Edición",width:40,enableSorting:!1,enableFiltering:!1,cellTemplate:g,enableCellEdit:!1},{field:"descripcion",displayName:"Descripción",filter:{condition:e.filter.CONTAINS}},{field:"affected_person_name",displayName:"Afectado",width:200,filter:{condition:e.filter.CONTAINS}},{field:"created_at",displayName:"Fecha",width:150,filter:{condition:e.filter.CONTAINS}}],multiSelect:!1,onRegisterApi:function(b){return a.gridApi=b}}}])}.call(this),function(){angular.module("myvcFrontApp").config(["$stateProvider","App","USER_ROLES","PERMISSIONS",function(a,b,c,d){a.state("panel.usuarios",{url:"^/usuarios",views:{maincontent:{templateUrl:""+b.views+"usuarios/usuarios.tpl.html",controller:"UsuariosCtrl"},headerContent:{templateUrl:""+b.views+"panel/panelHeader.tpl.html",controller:"PanelHeaderCtrl",resolve:{titulo:[function(){return"Usuarios"}]}}},data:{displayName:"Usuarios",icon_fa:"fa fa-user",needed_permissions:[d.can_edit_usuarios],pageTitle:"Usuarios - MyVc"}}).state("panel.user",{url:"^/user/:username",views:{maincontent:{templateUrl:""+b.views+"usuarios/user.tpl.html",controller:"UserCtrl"},headerContent:{templateUrl:""+b.views+"panel/panelHeader.tpl.html",controller:"PanelHeaderCtrl",resolve:{titulo:[function(){return"Perfil"}]}}},resolve:{perfilactual:["Restangular","$stateParams","$q","$state","toastr",function(a,b,c,d,e){var f,g;return f=c.defer(),g=b.username,g||""===g?a.one("perfiles/username/"+g).getList().then(function(a){return console.log("Perfilactual en el resolve:",a[0]),f.resolve(a[0])},function(a){return f.reject(a)}):(e.warning("Lo sentimos, nombre de usuario no encontrado"),d.go("panel")),f.promise}]},data:{displayName:"Perfil",icon_fa:"fa fa-user"}}).state("panel.user.resumen",{url:"/r",views:{user_detail:{templateUrl:""+b.views+"usuarios/userResumen.tpl.html",controller:"UserResumenCtrl"}},data:{displayName:"Resumen",icon_fa:"fa fa-user"}}).state("panel.user.configuracion",{url:"/c",views:{user_detail:{templateUrl:""+b.views+"usuarios/userConfiguracion.tpl.html",controller:"UserConfiguracionCtrl"}},data:{displayName:"Configuración de perfil",icon_fa:"fa fa-user"}}).state("panel.usuarios.roles",{url:"/roles",views:{user_roles:{templateUrl:""+b.views+"usuarios/roles.tpl.html",controller:"RolesCtrl"}},data:{displayName:"Roles",icon_fa:"fa fa-user-secret"}}).state("panel.usuarios.editar",{url:"/editar/:user_id",views:{edit_user:{templateUrl:""+b.views+"usuarios/usuariosEdit.tpl.html",controller:"UsuariosEditCtrl"},headerContent:{templateUrl:""+b.views+"panel/panelHeader.tpl.html",controller:"PanelHeaderCtrl",resolve:{titulo:[function(){return"Editar alumno"}]}}},data:{displayName:"Editar",icon_fa:"fa fa-users",pageTitle:"Editar alumno - MyVc"}})}])}.call(this),function(){angular.module("myvcFrontApp").controller("UserCtrl",["$scope","$http","Restangular","$state","$rootScope","AuthService","Perfil","App","perfilactual",function(a,b,c,d,e,f,g,h,i){var j,k;return k=d.params.username,a.perfilactual=i,a.companieros=[],a.profesores=[],a.materias=[],a.canConfig=!1,a.setImagenPrincipal(),a.USER.user_id===a.perfilactual.user_id&&(a.canConfig=!0),a.setImagenPrincipal=function(){var b,c,d,e,f;return d=h.images+"perfil/",c=a.perfilactual.imagen_nombre,b=a.perfilactual.foto_nombre,f=d+c,e=d+b,a.imagenPrincipal=f,a.imagenOficial=e},j=function(){return c.one("perfiles/profesormispersonas").getList().then(function(b){return a.perfilactual=b[0],a.setImagenPrincipal()},function(a){return console.log("No se pudo traer el usuario, ",a),d.transitionTo("panel")})},a.nameToShow=function(){return"Usu"===a.perfilactual.tipo?a.perfilactual.username.toUpperCase():a.perfilactual.nombres+" "+a.perfilactual.apellidos}}])}.call(this),function(){angular.module("myvcFrontApp").controller("UserConfiguracionCtrl",["$scope","$http","Restangular","$state","$rootScope","AuthService","Perfil","App",function(a,b,c,d,e,f,g,h){return f.verificar_acceso(),a.data={},a.comprobando=!1,a.mostrarErrorUsername=!1,a.mostrarErrorPassword=!1,a.canSaveUsername=!1,a.newusername="",a.passantiguo="",a.newpass="",a.newpassverif="",a.status={passCambiado:!1},a.nombresdeusuario=[],c.all("perfiles/usernames").getList().then(function(b){return a.nombresdeusuario=b},function(a){return console.log("No se trajeron los nombres de usuario",a)}),a.$watch("newusername",function(a,b){return console.log("oldv, newv",a,b)}),a.comprobarusername=function(b){return a.canSaveUsername=!1,a.comprobando=!0,b.username&&(b=b.username),b===a.perfilactual.username?(a.toastr.warning("Copia un nombre de usuario diferente al que ya tienes"),void(a.comprobando=!1)):""===b?(a.toastr.warning("Debes copiar un nombre de usuario."),void(a.comprobando=!1)):c.all("perfiles/comprobarusername/"+b).getList().then(function(b){return b[0].existe?(a.toastr.warning("Nombre de usuario ya en uso."),a.mostrarErrorUsername=!0):(a.mostrarErrorUsername=!1,a.canSaveUsername=!0),a.comprobando=!1},function(b){return console.log("No se trajeron los nombres de usuario",b),a.comprobando=!1})},a.guardar=function(){var b;return a.canSaveUsername=!1,b={nombres:a.perfilactual.nombres,apellidos:a.perfilactual.apellidos,sexo:a.perfilactual.sexo,fecha_nac:a.perfilactual.fecha_nac,celular:a.perfilactual.celular,tipo:a.perfilactual.tipo,email_persona:a.perfilactual.email_persona},c.one("perfiles/update",a.perfilactual.persona_id).customPUT(b).then(function(b){return console.log("Datos guardados, ",b),a.toastr.success("Datos guardados")},function(b){return console.log("No se pudo guardar cambios, ",b),a.toastr.error("Datos NO guardados","Problema"),a.canSaveUsername=!0})},a.CambiarUsername=function(b){return c.one("perfiles/guardar-username",a.perfilactual.user_id).customPUT({username:b}).then(function(c){return console.log("Nombre de usuario guardado, ",c),a.toastr.success("Nombre de usuario guardado"),g.User().username=b,a.$emit("cambianImgs",{username:b})},function(b){return console.log("No se pudo guardar nombre de usuario, ",b),a.toastr.error("Nombre de usuario NO guardado","Problema")})},a.CambiarPass=function(b,d,e){var f;return b!==d?void a.toastr.warning("Las contraseñas no coinciden"):b.length<4?void a.toastr.warning("La contraseña debe tener mínimo 4 caracteres. Sin espacios ni Ñ ni tildes."):(a.cambiandoPass=!0,f={password:d,oldpassword:e},c.one("perfiles/cambiarpassword",a.perfilactual.user_id).customPUT(f).then(function(b){return console.log("Contraseña cambiada, ",b),a.toastr.success("Contraseña cambiada."),a.status.passCambiado=!1,a.cambiandoPass=!1},function(b){return b.$error?"Contraseña antigua es incorrecta"===b.error.message?a.toastr.warning(b.error.message):(console.log("No se pudo cambiar la contraseña, ",b),a.toastr.error("No se pudo cambiar la contraseña.")):a.toastr.error("No se pudo cambiar la contraseña."),a.cambiandoPass=!1}))},a.CambiarCorreoRestore=function(){var b;return b={email_restore:a.email_restore},console.log(b),c.one("perfiles/cambiaremailrestore",a.perfilactual.user_id).customPUT(b).then(function(b){return console.log("Contraseña cambiada, ",b),a.toastr.success("Contraseña cambiada.")},function(b){return console.log("No se pudo cambiar la contraseña, ",b),a.toastr.error("No se pudo cambiar la contraseña","Problema")})}}])}.call(this),function(){angular.module("myvcFrontApp").controller("UserResumenCtrl",["$scope","$http","Restangular","$state","$rootScope","AuthService","Perfil","App",function(a,b,c,d,e,f,g,h){}])}.call(this),function(){angular.module("myvcFrontApp").controller("UsuariosCtrl",["$scope","$http","Restangular","$state","$rootScope","AuthService","Perfil","App","$uibModal","$filter","toastr",function(a,b,c,d,e,f,g,h,i,j,k){var l,m,n,o;return f.verificar_acceso(),a.editar=function(a){return d.go("panel.usuarios.editar",{usuario_id:a.user_id})},a.eliminar=function(b){var c;return c=i.open({templateUrl:h.views+"usuarios/removeUsuario.tpl.html",controller:"RemoveUsuarioCtrl",resolve:{usuario:function(){return b}}}),c.result.then(function(b){return a.gridOptions.data=j("filter")(a.gridOptions.data,{id:"!"+b.id})})},a.resetPass=function(a){var b;return b=i.open({templateUrl:h.views+"usuarios/resetPass.tpl.html",controller:"ResetPassCtrl",resolve:{usuario:function(){return a}}}),b.result.then(function(a){})},a.verRoles=function(a){var b;return b=i.open({templateUrl:h.views+"usuarios/verRoles.tpl.html",controller:"VerRolesCtrl",resolve:{usuario:function(){return a},roles:function(){return c.all("roles").getList()}}}),b.result.then(function(a){})},l='<a class="btn btn-default btn-xs shiny" ng-click="grid.appScope.verRoles(row.entity)">Roles</a>',m='<a uib-tooltip="Editar" tooltip-placement="right" class="btn btn-default btn-xs shiny icon-only info" ng-click="grid.appScope.editar(row.entity)"><i class="fa fa-edit "></i></a>',n='<a uib-tooltip="X Eliminar" tooltip-placement="right" class="btn btn-default btn-xs shiny icon-only danger" ng-click="grid.appScope.eliminar(row.entity)"><i class="fa fa-trash "></i></a>',o='<a uib-tooltip="Resetear contraseña" tooltip-placement="right" class="btn btn-default btn-xs shiny" ng-click="grid.appScope.resetPass(row.entity)">Reset pass</a>',a.gridOptions={showGridFooter:!0,enableSorting:!0,enableFiltering:!0,enableGridColumnMenu:!1,columnDefs:[{field:"user_id",width:70,enableFiltering:!1,enableCellEdit:!1},{name:"edicion",displayName:"Edición",width:200,enableSorting:!1,enableFiltering:!1,cellTemplate:l+m+n+o,enableCellEdit:!1},{field:"username",displayName:"Usuario",filter:{condition:function(a,b,c){var d;return d=c.entity,d.username.toLowerCase().indexOf(a.toLowerCase())>-1}},enableHiding:!1},{field:"nombres",cellTemplate:'<div>{{row.entity.nombres + " " + row.entity.apellidos}}</div>',filter:{condition:function(a,b,c){var d;return d=c.entity,d.nombres.toLowerCase().indexOf(a.toLowerCase())>-1||d.apellidos.toLowerCase().indexOf(a.toLowerCase())>-1}}},{field:"sexo",width:70},{field:"roles",displayName:"Roles",enableCellEdit:!1,cellFilter:"mapRoles",filter:{condition:function(a,b){var c;return c=j("filter")(b,{name:a}),c.length>0}}}],multiSelect:!1,onRegisterApi:function(b){return a.gridApi=b,b.edit.on.afterCellEdit(a,function(b,d,e,f){return e!==f&&("username"===d.field?c.one("perfiles/guardar-username",b.user_id).customPUT({username:b.username}).then(function(a){return k.success("Nombre de Usuario actualizado con éxito","Actualizado")},function(a){return k.error("Cambio no guardado","Error")}):c.one("perfiles/update",b.persona_id).customPUT(b).then(function(a){return k.success("Usuario actualizado con éxito","Actualizado");
},function(a){return k.error("Cambio no guardado","Error")})),a.$apply()})}},c.all("perfiles/usuariosall").getList().then(function(b){return a.gridOptions.data=b}),a.crearTodosLosUsuarios=function(){return c.one("perfiles/creartodoslosusuarios").customPUT().then(function(a){return k.success("Usuarios creados con éxito")},function(a){return k.error("No se pudo crear los usuarios","Problema")})}}]).filter("mapRoles",["$filter",function(a){return function(a,b){var c;return a?(c=[],angular.forEach(a,function(a,b){return c.push(a.name)}),c=c.join()):""}}]).controller("RemoveUsuarioCtrl",["$scope","$uibModalInstance","usuario","Restangular","toastr",function(a,b,c,d,e){return a.usuario=c,a.ok=function(){return d.all("perfiles/destroy/"+c.user_id).remove().then(function(a){return e.success("Usuario eliminado con éxito.","Eliminado")},function(a){return e.warning("No se pudo eliminar al usuario.","Problema")}),b.close(c)},a.cancel=function(){return b.dismiss("cancel")}}]).controller("ResetPassCtrl",["$scope","$uibModalInstance","usuario","Restangular","toastr",function(a,b,c,d,e){return a.usuario=c,a.newpassword="",a.ok=function(){return d.one("perfiles/reset-password/"+c.user_id).customPUT({password:a.newpassword}).then(function(a){return e.success("Contraseña cambiada.")},function(a){return e.warning("No se pudo cambiar contraseña.","Problema")}),b.close(c)},a.cancel=function(){return b.dismiss("cancel")}}]).controller("VerRolesCtrl",["$scope","$uibModalInstance","usuario","roles","Restangular","toastr",function(a,b,c,d,e,f){return a.usuario=c,a.roles=d,a.datos={selecteds:[]},a.datos.selecteds=c.roles,a.seleccionando=function(a,b){return e.one("roles/addroletouser/"+a.id).customPUT({user_id:c.user_id}).then(function(a){return f.success("Rol agregado con éxito.")},function(a){return f.warning("No se pudo agregar el rol al usuario.","Problema")})},a.quitando=function(a,b){return e.one("roles/removeroletouser/"+a.id).customPUT({user_id:c.user_id}).then(function(a){return f.success("Rol quitado con éxito.")},function(a){return f.warning("No se pudo quitar el rol al usuario.","Problema")})},a.ok=function(){return c.roles=a.datos.selecteds,b.close(c)},a.cancel=function(){return b.dismiss("cancel")}}])}.call(this),function(){"use strict";angular.module("myvcFrontApp").controller("UsuariosEditCtrl",["$scope","$rootScope","$state","Restangular","toastr",function(a,b,c,d,e){a.data={},a.usuario={},a.tipos=[{tipo:"Alumno"},{tipo:"Profesor"},{tipo:"Acudiente"},{tipo:"Solo usuario"}],a.sangres=[{sangre:"O+"},{sangre:"O-"},{sangre:"A+"},{sangre:"A-"},{sangre:"B+"},{sangre:"B-"},{sangre:"AB+"},{sangre:"AB-"}],d.one("usuarios/show",c.params.usuario_id).get().then(function(b){return a.usuario=b}),a.guardar=function(){return d.one("alumnos/update",a.alumno.id).customPUT(a.alumno).then(function(a){return e.success("Alumno actualizado correctamente")},function(a){return e.error("No se pudo guardar el alumno")})},a.paisNacSelect=function(b,c){return d.one("ciudades/departamentos",b.id).get().then(function(c){return a.departamentosNac=c,"undefined"==typeof a.alumno.pais_doc?(a.alumno.pais_doc=b,a.paisSelecionado(b)):void 0})},a.departNacSelect=function(b){return d.one("ciudades/pordepartamento",b.departamento).get().then(function(c){return a.ciudadesNac=c,"undefined"==typeof a.alumno.departamento_doc?(a.alumno.departamento_doc=b,a.departSeleccionado(b)):void 0})},a.paisSelecionado=function(b,c){return d.one("ciudades/departamentos",b.id).get().then(function(b){return a.departamentos=b})},a.departSeleccionado=function(b){return d.one("ciudades/pordepartamento",b.departamento).get().then(function(b){return a.ciudades=b})},a.dateOptions={formatYear:"yyyy"},a.restarEstrato=function(){return a.alumno.estrato>0?a.alumno.estrato=a.alumno.estrato-1:void 0},a.sumarEstrato=function(){return a.alumno.estrato<10?a.alumno.estrato=parseInt(a.alumno.estrato)+1:void 0}}])}.call(this),function(){angular.module("myvcFrontApp").controller("RolesCtrl",["$scope","Restangular","$state","$rootScope","AuthService","toastr","App","$filter",function(a,b,c,d,e,f,g,h){return e.verificar_acceso(),console.log("Entra al RoleCtrl"),a.dato={},a.roles=[],a.permissions=[],b.all("roles").getList().then(function(b){return a.roles=b},function(a){return console.log("No se pudo traer los roles ",a)}),b.all("permissions").getList().then(function(b){return a.permissions=b},function(a){return console.log("No se pudo traer los permissions ",a)}),a.expand=function(a){return a.mostrandoPermisos=!0,console.log("Llega, ",a)},a.collapse=function(a){return a.mostrandoPermisos=!1,console.log("colapsar, ",a)},a.addPermissions=function(a){return b.all("roles/addpermission/"+a.id).customPUT({permission_id:a.newperm.id}).then(function(b){return a.perms.push(b),f.success("Permiso agregado al rol "+a.display_name)},function(a){return console.log("No se pudo agregar el permiso ",a),f.error("No se pudo agregar el permiso","Problema")})},a.removePermission=function(a,c){return b.all("roles/removepermission/"+a.id).customPUT({permission_id:c.id}).then(function(b){return a.perms=h("filter")(a.perms,{id:"!"+c.id}),f.success("Permiso eliminado del rol "+a.display_name)},function(a){return console.log("No se pudo quitar el permiso ",a),f.error("No se pudo quitar el permiso","Problema")})}}])}.call(this),function(){angular.module("myvcFrontApp").controller("PermissionsCtrl",["$scope","$http","Restangular","$state","$rootScope","AuthService","Perfil","App",function(a,b,c,d,e,f,g,h){}])}.call(this),function(){angular.module("myvcFrontApp").config(["$stateProvider","App","PERMISSIONS",function(a,b,c){return a.state("panel.unidades",{url:"^/unidades/:asignatura_id",views:{maincontent:{templateUrl:""+b.views+"unidades/unidades.tpl.html",controller:"UnidadesCtrl"},headerContent:{templateUrl:""+b.views+"panel/panelHeader.tpl.html",controller:"PanelHeaderCtrl",resolve:{titulo:["AuthService","$q",function(a,b){var c;return c=b.defer(),a.verificar().then(function(a){return c.resolve(a.unidades_displayname)},function(a){return console.log("No se resolvió en Unidades, ",a),c.resolve("Unidades")}),c.promise}]}}},resolve:{usuario:["AuthService",function(a){return a.verificar()}]},data:{displayName:"Unidades",icon_fa:"fa fa-graduation-cap",pageTitle:"Unidades - MyVc",needed_permissions:[c.can_work_like_teacher,c.can_edit_unidades_subunidades]}}).state("panel.copiar",{url:"^/copiar",views:{maincontent:{templateUrl:""+b.views+"unidades/copiar.tpl.html",controller:"CopiarCtrl"},headerContent:{templateUrl:""+b.views+"panel/panelHeader.tpl.html",controller:"PanelHeaderCtrl",resolve:{titulo:[function(){return"Copiar"}]}}},data:{displayName:"Copiar",icon_fa:"fa fa-copy",pageTitle:"Copiar - MyVc",needed_permissions:[c.can_work_like_teacher,c.can_edit_unidades_subunidades]}})}])}.call(this),function(){angular.module("myvcFrontApp").controller("UnidadesCtrl",["$scope","$uibModal","Restangular","$state","$filter","$rootScope","AuthService","toastr","App","resolved_user",function(a,b,c,d,e,f,g,h,i,j){return g.verificar_acceso(),a.asignatura={},a.asignatura_id=d.params.asignatura_id,a.datos={},a.UNIDAD=a.USER.unidad_displayname,a.GENERO_UNI=a.USER.genero_unidad,a.SUBUNIDAD=a.USER.subunidad_displayname,a.GENERO_SUB=a.USER.genero_subunidad,a.UNIDADES=a.USER.unidades_displayname,a.SUBUNIDADES=a.USER.subunidades_displayname,a.activar_crear_unidad=!0,c.all("unidades/deasignaturaperiodo/"+a.asignatura_id+"/"+a.USER.periodo_id).getList().then(function(b){return a.unidades=b,a.calcularPorcUnidades()},function(b){return console.log("No se pudo traer las "+a.UNIDADES,b),h.error("No se pudo traer las "+a.UNIDADES,"Problemas")}),c.one("asignaturas/show/"+a.asignatura_id).get().then(function(b){return a.asignatura=b,a.inicializado=!0,b?void 0:a.no_asignatura=!0},function(b){return console.log("No se pudo traer los datos de la asignatura",b),h.error("No se pudo traer los datos de la asignatura"),a.no_asignatura=!0}),a.calcularPorcUnidades=function(){var b;return b=0,angular.forEach(a.unidades,function(a,c){var d;return b+=a.porcentaje,d=0,angular.forEach(a.subunidades,function(a,b){return d+=a.porcentaje}),a.subunidades.porc_subunidades=d}),a.unidades.porc_unidades=b},a.crearUnidad=function(){return a.activar_crear_unidad=!1,a.newunidad.asignatura_id=a.asignatura.asignatura_id,c.one("unidades").customPOST(a.newunidad).then(function(b){var c;return b.subunidades=[],a.unidades.push(b),c="creado","F"===a.GENERO_UNI&&(c="creada"),h.success(a.UNIDAD+" "+c+" . Ahora agrégale "+a.SUBUNIDADES),a.newunidad.definicion="",a.calcularPorcUnidades(),a.activar_crear_unidad=!0},function(b){return console.log("No se pudo crear la unidad",b),h.error("No se pudo crear la unidad","Problemas"),a.activar_crear_unidad=!0})},a.actualizarUnidad=function(b){var d;return d={definicion:b.definicion,porcentaje:b.porcentaje},c.one("unidades/update/"+b.id).customPUT(d).then(function(c){var d;return d="actualizado","F"===a.GENERO_UNI&&(d="actualizada"),h.success(a.UNIDAD+" "+d+" con éxito."),b.editando=!1,a.calcularPorcUnidades()},function(b){return console.log("No se pudo actualizar "+a.UNIDAD,b),h.error("No se pudo actualizar "+a.UNIDAD,"Problemas")})},a.removeUnidad=function(c){var d;return d=b.open({templateUrl:i.views+"unidades/removeUnidad.tpl.html",controller:"RemoveUnidadCtrl",resolve:{unidad:function(){return c}}}),d.result.then(function(b){return a.unidades=e("filter")(a.unidades,{id:"!"+b.id}),a.calcularPorcUnidades()})}}]).controller("RemoveUnidadCtrl",["$scope","$uibModalInstance","unidad","Restangular","toastr",function(a,b,c,d,e){return a.unidad=c,a.ok=function(){return d.all("unidades/destroy/"+c.id).remove().then(function(a){return e.success("Unidad eliminada con éxito.","Eliminada")},function(a){return e.warning("No se pudo eliminar la unidad.","Problema"),console.log("Error eliminando unidad: ",a)}),b.close(c)},a.cancel=function(){return b.dismiss("cancel")}}]).controller("RemoveSubunidadCtrl",["$scope","$uibModalInstance","subunidad","Restangular","toastr",function(a,b,c,d,e){return a.subunidad=c,a.ok=function(){return d.all("subunidades/destroy/"+c.id).remove().then(function(a){return e.success("Subunidad eliminada con éxito.","Eliminada")},function(a){return e.warning("No se pudo eliminar la subunidad.","Problema"),console.log("Error eliminando subunidad: ",a)}),b.close(c)},a.cancel=function(){return b.dismiss("cancel")}}])}.call(this),function(){angular.module("myvcFrontApp").controller("CopiarCtrl",["$scope","$uibModal","Restangular","$filter","$rootScope","AuthService","toastr","App","YearsServ",function(a,b,c,d,e,f,g,h,i){var j;return f.verificar_acceso(),a.configuracion={copiar_subunidades:!0,copiar_notas:!0},a.periodos=[],a.resultado="",j=a.USER.persona_id,a.urlTplSubunidades=""+h.views+"unidades/subunidadespop.tpl.html",a.hasRoleOrPerm("admin")===!0?(a.profesores=[],a.conprofes=!0,c.all("profesores/conyears").getList().then(function(b){return a.profesores=b},function(a){return console.log("No se pudo traer los profes con años",a)})):(a.conprofes=!1,i.getYears().then(function(b){return a.years_copy=b,a.years_copy_to=b},function(a){return console.log("No se pudo traer los años a copiar",a)})),a.profesorSelect=function(b,c){return a.years_copy=b.years,a.configuracion.periodo_from?(a.configuracion.periodo_from=a.configuracion.year_from.periodos[0],a.periodoSelect(a.configuracion.periodo_from)):void 0},a.yearSelect=function(b,c){return a.periodos=b.periodos},a.periodoSelect=function(b,e){return a.conprofes===!0&&(j=a.configuracion.profesor_from.id),c.all("asignaturas/listasignaturasyear/"+j+"/"+a.configuracion.periodo_from.id).getList().then(function(b){var c,e;return a.asignaturas=b,a.configuracion.asignatura_from?(e=a.configuracion.asignatura_from.asignatura_id,c=d("filter")(a.asignaturas,{asignatura_id:e})[0],a.configuracion.asignatura_from=c,a.asignaturaSelect(c)):void 0},function(a){return console.log("No se pudo traer las asignaturas origen, ",a)})},a.asignaturaSelect=function(b,c){return b&&b.unidades?a.unidades=b.unidades:a.unidades=[]},a.profesorToSelect=function(b,c){return a.years_copy_to=b.years,a.configuracion.periodo_to?(a.configuracion.periodo_to=a.configuracion.year_to.periodos[0],a.periodoToSelect(a.configuracion.periodo_to)):void 0},a.yearToSelect=function(b,c){return a.periodos_to=b.periodos},a.periodoToSelect=function(b,e){return a.conprofes===!0&&(j=a.configuracion.profesor_to.id),c.all("asignaturas/listasignaturasyear/"+j+"/"+a.configuracion.periodo_to.id).getList().then(function(b){var c,e;return a.asignaturas_to=b,a.configuracion.asignatura_to?(e=a.configuracion.asignatura_to.asignatura_id,c=d("filter")(a.asignaturas_to,{asignatura_id:e})[0],a.configuracion.asignatura_to=c,a.asignaturaToSelect(c)):void 0},function(a){return console.log("No se pudo traer las asignaturas destino, ",a)})},a.asignaturaToSelect=function(b,c){return b&&b.unidades?a.unidades_to=b.unidades:a.unidades_to=[],a.activar_btn_copiar=!0},a.copiar=function(){var b,e,f;return a.activar_btn_copiar=!1,e=d("filter")(a.unidades.items,{seleccionada:!0}),f=[],angular.forEach(e,function(a,b){return f.push(a.id)}),b={copiar_subunidades:a.configuracion.copiar_subunidades,copiar_notas:a.configuracion.copiar_notas,asignatura_to_id:a.configuracion.asignatura_to.asignatura_id,periodo_from_id:a.configuracion.periodo_from.id,periodo_to_id:a.configuracion.periodo_to.id,unidades_ids:f,grupo_from_id:a.configuracion.asignatura_from.grupo_id,grupo_to_id:a.configuracion.asignatura_to.grupo_id},c.one("periodos/copiar").customPUT(b).then(function(b){var c,d,f,h,i,j;for(g.success("Copiado con éxito"),console.log("Copiado con éxito",b),a.activar_btn_copiar=!0,a.resultado="Unidades copiadas: "+b.unidades_copiadas+" - Subunidades copiadas: "+b.subunidades_copiadas+" - Notas copidas: "+b.notas_copiadas,d=0,h=e.length;h>d;d++)c=e[d],a.unidades_to.items.push(c);if(a.configuracion.asignatura_from.asignatura_id===a.configuracion.asignatura_to.asignatura_id&&a.configuracion.periodo_from.id===a.configuracion.periodo_to.id){for(j=[],f=0,i=e.length;i>f;f++)c=e[f],j.push(a.unidades.items.push(c));return j}},function(b){return g.error("No se pudieron copiar los datos"),console.log("No se pudieron copiar los datos",b),a.activar_btn_copiar=!0})}}])}.call(this),function(){angular.module("myvcFrontApp").directive("unidadDir",["App",function(a){return{restrict:"E",templateUrl:""+a.views+"unidades/unidadDir.tpl.html",scope:{unidad:"=",indice:"="},link:function(a,b,c){},controller:["$scope","Restangular","toastr","$uibModal","$filter",function(b,c,d,e,f){var g;return b.activar_crear_subunidad=!0,g="#sortable-container"+b.unidad.id,b.sortableOptions={containment:g,dragEnd:function(a,e){var f,g,h,i,j,k,l,m;for(i=[],m=b.unidad.subunidades,h=k=0,l=m.length;l>k;h=++k)j=m[h],-1!==j.id&&(g={},g[""+j.id]=h,i.push(g));return f={unidad_id:b.unidad.id,sortHash:i},c.one("unidades/update-orden").customPUT(f).then(function(a){return console.log("Orden guardado",a),!0},function(a){return console.log("No se pudo guardar el orden",a),d.warning("No se pudo ordenar","Problema"),!1})}},b.subirSubunidad=function(a,e){var g,h;return h=e-1,g={subunidad_id:a.id,unidad_id:a.unidad_id,indice_new:h},c.one("subunidades/subir-subunidad").customPUT(g).then(function(c){var g,i;return g=f("filter")(b.unidad.subunidades,{orden:h}),g=f("orderBy")(g,"-id")[0],g.orden=e,i=f("filter")(b.unidad.subunidades,{id:a.id})[0],i.orden=h,b.unidad.subunidades=f("orderBy")(b.unidad.subunidades,"orden"),console.log("Subunidad subida",b.unidad.subunidades),d.success("Ordenada correctamente")},function(a){return console.log("No se pudo subir ",a),d.error("No se pudo subir ")})},b.cambiaOrden=function(){return console.log("Sisassss")},b.bajarSubunidad=function(a,e){var g,h;return h=e+1,g={subunidad_id:a.id,unidad_id:a.unidad_id,indice_new:h},c.one("subunidades/bajar-subunidad").customPUT(g).then(function(c){var g,i;return g=f("filter")(b.unidad.subunidades,{orden:h}),g.length>0&&(g[0].orden=e),i=f("filter")(b.unidad.subunidades,{id:a.id})[0],i.orden=h,b.unidad.subunidades=f("orderBy")(b.unidad.subunidades,"orden"),console.log("Subunidad bajada",b.unidad.subunidades),d.success("Ordenada correctamente")},function(a){return console.log("No se pudo bajar ",a),d.error("No se pudo bajar ")})},b.addSubunidad=function(a){return b.activar_crear_subunidad=!1,a.newsubunidad.unidad_id=a.id,c.one("subunidades").customPOST(a.newsubunidad).then(function(c){var e;return a.subunidades.push(c),e="creado","F"===b.$parent.GENERO_SUB&&(e="creada"),d.success(b.$parent.SUBUNIDAD+" "+e+" con éxito."),a.newsubunidad.definicion="",b.$parent.calcularPorcUnidades(),b.activar_crear_subunidad=!0},function(a){return console.log("No se pudo crear  "+("M"===b.$parent.GENERO_UNI?"el":"la")+scope.$parent.SUBUNIDAD,a),d.error("No se pudo crear  "+("M"===b.$parent.GENERO_UNI?"el":"la")+scope.$parent.SUBUNIDAD,"Problemas"),b.activar_crear_subunidad=!0})},b.actualizarSubunidad=function(a){var e;return e={definicion:a.definicion,porcentaje:a.porcentaje,nota_default:a.nota_default,orden:a.orden},c.one("subunidades/update/"+a.id).customPUT(e).then(function(c){var e;return e="actualizado","F"===b.$parent.GENERO_SUB&&(e="actualizada"),d.success(b.$parent.SUBUNIDAD+" "+e+" con éxito."),a.editando=!1,b.$parent.calcularPorcUnidades()},function(a){return console.log("No se pudo actualizar "+b.$parent.SUBUNIDAD,a),d.error("No se pudo actualizar "+b.$parent.SUBUNIDAD,"Problemas")})},b.removeSubunidad=function(c,d){var g;return g=e.open({templateUrl:a.views+"unidades/removeSubunidad.tpl.html",controller:"RemoveSubunidadCtrl",resolve:{subunidad:function(){return d}}}),g.result.then(function(a){return c.subunidades=f("filter")(c.subunidades,{id:"!"+d.id}),b.$parent.calcularPorcUnidades()})}}]}}])}.call(this),function(){angular.module("myvcFrontApp").directive("contenteditable",function(){return{restrict:"A",require:"ngModel",link:function(a,b,c,d){var e;return e=function(){return d.$setViewValue(b.html())},d.$render=function(){return b.html(d.$viewValue||0)},b.bind("blur keyup change",function(){return a.$apply(e)})}}})}.call(this),function(){angular.module("myvcFrontApp").config(["$stateProvider","App","USER_ROLES","PERMISSIONS",function(a,b,c,d){return a.state("panel.informes",{url:"^/informes",views:{maincontent:{templateUrl:""+b.views+"informes/informes.tpl.html",controller:"InformesCtrl"},headerContent:{templateUrl:""+b.views+"panel/panelHeader.tpl.html",controller:"PanelHeaderCtrl",resolve:{titulo:[function(){return"Informes interactivos"}]}}},resolve:{resolved_user:["AuthService",function(a){return a.verificar()}],alumnos:["Restangular",function(a){return a.all("alumnos/sin-matriculas").getList()}]},data:{displayName:"Informes",icon_fa:"fa fa-print",pageTitle:"Informes - MyVc"}}).state("panel.informes.boletines_periodo",{url:"/boletines_periodo/:grupo_id/:periodos_a_calcular",params:{grupo_id:{value:null},periodos_a_calcular:{value:null}},views:{report_content:{templateUrl:""+b.views+"informes/boletinesPeriodo.tpl.html",controller:"BoletinesPeriodoCtrl",resolve:{alumnosDat:["Restangular","$stateParams","$q","$cookieStore",function(a,b,c,d){var e,f,g;return e=c.defer(),g=d.get("requested_alumnos"),f=d.get("requested_alumno"),g?(console.log("Pidiendo por varios alumnos: ",g),a.one("alumnos/detailed-notas",b.grupo_id).customPUT({requested_alumnos:g,periodos_a_calcular:b.periodos_a_calcular}).then(function(a){return e.resolve(a)},function(a){return e.reject(a)})):f?a.one("alumnos/detailed-notas",f[0].grupo_id).customPUT({requested_alumnos:f,periodos_a_calcular:b.periodos_a_calcular}).then(function(a){return e.resolve(a)},function(a){return e.reject(a)}):(console.log("Pidiendo por grupo:",b.grupo_id),a.one("alumnos/detailed-notas-group",b.grupo_id).customPUT({periodos_a_calcular:b.periodos_a_calcular}).then(function(a){return e.resolve(a)},function(a){return e.reject(a)})),e.promise}],escalas:["EscalasValorativasServ",function(a){return a.escalas()}]}}},data:{displayName:"Boletines periodo",pageTitle:"Boletines periodo - MyVc"}}).state("panel.informes.puestos_grupo_periodo",{url:"/puestos_grupo_periodo/:grupo_id",views:{report_content:{templateUrl:""+b.views+"informes/puestosGrupoPeriodo.tpl.html",controller:"PuestosGrupoPeriodoCtrl",resolve:{alumnosDat:["Restangular","$stateParams",function(a,b){return a.one("alumnos/detailed-notas",b.grupo_id).customPUT()}],escalas:["EscalasValorativasServ",function(a){return a.escalas()}]}}},data:{pageTitle:"Puestos periodo - MyVc"}}).state("panel.informes.puestos_grupo_year",{url:"/puestos_grupo_year/:grupo_id/:periodo_a_calcular",views:{report_content:{templateUrl:""+b.views+"informes/puestosGrupoYear.tpl.html",controller:"PuestosGrupoYearCtrl",resolve:{datos_puestos:["Restangular","$stateParams",function(a,b){var c;return c={grupo_id:b.grupo_id,periodo_a_calcular:b.periodo_a_calcular},a.one("puestos/detailed-notas-year").customPUT(c)}],escalas:["EscalasValorativasServ",function(a){return a.escalas()}]}}},data:{displayName:"Puestos del año",icon_fa:"fa fa-print",pageTitle:"Puestos del año - MyVc"}}).state("panel.informes.planillas_grupo",{url:"/planillas_grupo/:grupo_id/:periodos_a_calcular",views:{report_content:{templateUrl:""+b.views+"informes/planillas.tpl.html",controller:"PlanillasCtrl",resolve:{asignaturas:["Restangular","$stateParams",function(a,b){return a.one("planillas/show-grupo",b.grupo_id).getList()}]}}},data:{displayName:"Planillas grupo",icon_fa:"fa fa-print",pageTitle:"Planillas grupo - MyVc"}}).state("panel.informes.planillas_profesor",{url:"/planillas_profesor/:profesor_id/:periodos_a_calcular",views:{report_content:{templateUrl:""+b.views+"informes/planillas.tpl.html",controller:"PlanillasCtrl",resolve:{asignaturas:["Restangular","$stateParams",function(a,b){return a.one("planillas/show-profesor",b.profesor_id).getList()}]}}},data:{displayName:"Planillas profesor",icon_fa:"fa fa-print",pageTitle:"Planillas profesor - MyVc"}}).state("panel.informes.boletines_finales",{url:"/boletines_finales/:grupo_id",params:{grupo_id:{value:null}},views:{report_content:{templateUrl:""+b.views+"informes/boletinesFinales.tpl.html",controller:"BoletinesFinalesCtrl",resolve:{alumnosDat:["Restangular","$stateParams","$q","$cookieStore",function(a,b,c,d){var e,f,g;return e=c.defer(),g=d.get("requested_alumnos"),f=d.get("requested_alumno"),g?a.one("bolfinales/detailed-notas-year",b.grupo_id).customPUT({requested_alumnos:g}).then(function(a){return e.resolve(a)},function(a){return e.reject(a)}):f?a.one("bolfinales/detailed-notas-year",f[0].grupo_id).customPUT({requested_alumnos:f}).then(function(a){return e.resolve(a)},function(a){return e.reject(a)}):a.one("bolfinales/detailed-notas-year-group",b.grupo_id).customPUT().then(function(a){return e.resolve(a)},function(a){return e.reject(a)}),e.promise}],escalas:["EscalasValorativasServ",function(a){return a.escalas()}]}}},data:{displayName:"Boletines finales",pageTitle:"Boletines finales - MyVc"}}).state("panel.informes.certificados_estudio",{url:"/certificados_estudio/:grupo_id",params:{grupo_id:{value:null}},views:{report_content:{templateUrl:""+b.views+"informes/certificadosEstudio.tpl.html",controller:"CertificadosEstudioCtrl",resolve:{alumnosDat:["Restangular","$stateParams","$q","$cookieStore",function(a,b,c,d){var e,f,g;return e=c.defer(),g=d.get("requested_alumnos"),f=d.get("requested_alumno"),g?a.one("bolfinales/detailed-notas-year",b.grupo_id).customPUT({requested_alumnos:g}).then(function(a){return e.resolve(a)},function(a){return e.reject(a)}):f?a.one("bolfinales/detailed-notas-year",f[0].grupo_id).customPUT({requested_alumnos:f}).then(function(a){return e.resolve(a)},function(a){return e.reject(a)}):a.one("bolfinales/detailed-notas-year",b.grupo_id).customPUT().then(function(a){return e.resolve(a)},function(a){return e.reject(a)}),e.promise}],escalas:["EscalasValorativasServ",function(a){return a.escalas()}]}}},data:{displayName:"Certificados de estudio",pageTitle:"Certificados de estudio - MyVc"}})}])}.call(this),function(){angular.module("myvcFrontApp").controller("InformesCtrl",["$scope","Restangular","$state","$stateParams","$rootScope","$filter","App","AuthService","ProfesoresServ","alumnos","$timeout","$cookieStore","toastr","$interval",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o,p,q;return h.verificar_acceso(),a.rowsAlum=[],a.config={periodos_a_calcular:"de_usuario",mostrar_foto:!0,periodo_a_calcular:a.USER.numero_periodo},a.filtered_alumnos=j,a.perfilPath=g.images+"perfil/",a.datos={grupo:""},b.one("grupos").getList().then(function(b){var d;return a.grupos=b,c.params.grupo_id?(d=parseInt(c.params.grupo_id),a.datos.grupo=f("filter")(a.grupos,{id:d},!0)[0],a.filtered_alumnos=f("filter")(j,{grupo_id:d},!0)):void 0}),b.one("contratos").getList().then(function(b){var d;return a.profesores=b,c.params.profesor_id?(d=parseInt(c.params.profesor_id),a.datos.profesor=f("filter")(a.profesores,{profesor_id:d},!0)[0]):void 0},function(a){return console.log("No se pudo traer los profesores: ",a)}),l.get("config")?(a.config=l.get("config"),a.informe_tab_actual_boletines="boletines"===a.config.informe_tab_actual?!0:!1,a.informe_tab_actual_puestos="puestos"===a.config.informe_tab_actual?!0:!1,a.informe_tab_actual_planillas="planillas"===a.config.informe_tab_actual?!0:!1,a.informe_tab_actual_finales="finales"===a.config.informe_tab_actual?!0:!1):a.config.orientacion="vertical",l.get("requested_alumnos")&&(q=l.get("requested_alumnos"),q.length>0?(p=[],angular.forEach(q,function(a,b){var c;return c=f("filter")(j,{alumno_id:a.alumno_id},!0)[0],p.push(c)}),a.datos.selected_alumnos=p):a.datos.selected_alumno=q[0]),l.get("requested_alumno")&&(q=l.get("requested_alumno"),o=f("filter")(j,{alumno_id:q[0].alumno_id},!0)[0],a.datos.selected_alumno=o),a.$watch("config",function(b,c){return l.put("config",b),a.$broadcast("change_config")},!0),a.selectTab=function(b){return a.config.informe_tab_actual=b,l.put("config",a.config),a.informe_tab_actual_boletines="boletines"===b?!0:!1,a.informe_tab_actual_puestos="puestos"===b?!0:!1,a.informe_tab_actual_planillas="planillas"===b?!0:!1,a.informe_tab_actual_finales="finales"===b?!0:!1},a.putConfigCookie=function(){return l.put("config",a.config)},a.verBoletinesGrupo=function(){return l.remove("requested_alumnos"),l.remove("requested_alumno"),a.datos.grupo.id?c.go("panel.informes.boletines_periodo",{grupo_id:a.datos.grupo.id,periodos_a_calcular:a.config.periodos_a_calcular},{reload:!0}):void m.warning("Debes seleccionar el grupo")},a.verBoletinesAlumnos=function(){return a.datos.selected_alumnos.length>0?(l.put("requested_alumnos",a.datos.selected_alumnos),c.go("panel.informes.boletines_periodo",{grupo_id:a.datos.grupo.id,periodos_a_calcular:a.config.periodos_a_calcular},{reload:!0})):m.warning("Debes seleccionar al menos un alumno o cargar boletines del grupo completo")},a.verBoletinAlumno=function(){return a.datos.selected_alumno?(l.put("requested_alumno",[a.datos.selected_alumno]),c.go("panel.informes"),n(function(){return c.go("panel.informes.boletines_periodo",{periodos_a_calcular:a.config.periodos_a_calcular})},1,1)):m.warning("Elige un alumno o carga el grupo completo")},a.verPuestosPeriodo=function(){return a.datos.grupo.id?c.go("panel.informes.puestos_grupo_periodo",{grupo_id:a.datos.grupo.id,periodos_a_calcular:a.config.periodos_a_calcular}):void m.warning("Debes seleccionar el grupo")},a.verPuestosYear=function(){return a.datos.grupo.id?c.go("panel.informes.puestos_grupo_year",{grupo_id:a.datos.grupo.id,periodo_a_calcular:a.config.periodo_a_calcular}):void m.warning("Debes seleccionar el grupo")},a.verPlanillasGrupo=function(){return c.go("panel.informes.planillas_grupo",{grupo_id:a.datos.grupo.id,periodos_a_calcular:a.config.periodos_a_calcular},{reload:!0})},a.verPlanillasProfe=function(){return c.go("panel.informes.planillas_profesor",{profesor_id:a.datos.profesor.profesor_id,periodos_a_calcular:a.config.periodos_a_calcular},{reload:!0})},a.selectGrupo=function(b){return b?a.filtered_alumnos=f("filter")(j,{grupo_id:b.id},!0):(a.filtered_alumnos=j,l.put("requested_alumno",""),l.put("requested_alumnos","")),a.datos.selected_alumnos="",a.datos.selected_alumno=""},a.selectAlumnos=function(a){return console.log(a)},a.selectAlumno=function(a){return console.log(a)},a.$on("cambia_descripcion",function(b,c){return a.descripcion_informe=c}),a.pdfMaker=function(){var a;return a={content:[["Este es un ejemplo de reporte en pdf"],{table:{headerRows:1,widths:["*","auto",100,"*"],body:[["No","Primero","Segundo","Tercero"],["0","No me gusta!!","No queda bonito","FACILMENTE!"],["1",{text:"En negrita",bold:!0},"Así que ","me mordió la vaca"]]}}]},pdfMake.createPdf(a).open()},a.verBoletinesFinalesGrupo=function(){return l.remove("requested_alumnos"),l.remove("requested_alumno"),a.datos.grupo.id?c.go("panel.informes.boletines_finales",{grupo_id:a.datos.grupo.id,periodos_a_calcular:a.config.periodos_a_calcular},{reload:!0}):void m.warning("Debes seleccionar el grupo")},a.verBoletinesFinalesAlumnos=function(){return a.datos.selected_alumnos.length>0?(l.put("requested_alumnos",a.datos.selected_alumnos),c.go("panel.informes.boletines_finales",{grupo_id:a.datos.grupo.id,periodos_a_calcular:a.config.periodos_a_calcular},{reload:!0})):m.warning("Debes seleccionar al menos un alumno o cargar boletines del grupo completo")},a.verBoletinFinalAlumno=function(){return a.datos.selected_alumno?(l.remove("requested_alumnos"),l.put("requested_alumno",[a.datos.selected_alumno]),c.go("panel.informes"),n(function(){return c.go("panel.informes.boletines_finales")},1,1)):m.warning("Elige un alumno o carga el grupo completo")},a.verCertificadosEstudioGrupo=function(){return l.remove("requested_alumnos"),l.remove("requested_alumno"),a.datos.grupo.id?c.go("panel.informes.certificados_estudio",{grupo_id:a.datos.grupo.id},{reload:!0}):void m.warning("Debes seleccionar el grupo")},a.verCertificadosEstudioAlumnos=function(){return a.datos.selected_alumnos.length>0?(l.put("requested_alumnos",a.datos.selected_alumnos),c.go("panel.informes.certificados_estudio",{grupo_id:a.datos.grupo.id,periodos_a_calcular:a.config.periodos_a_calcular},{reload:!0})):m.warning("Debes seleccionar al menos un alumno o cargar boletines del grupo completo")},a.verCertificadosEstudioAlumno=function(){return a.datos.selected_alumno?(l.remove("requested_alumnos"),l.put("requested_alumno",[a.datos.selected_alumno]),c.go("panel.informes"),n(function(){return c.go("panel.informes.certificados_estudio")},1,1)):m.warning("Elige un alumno o carga el grupo completo")}}])}.call(this),function(){angular.module("myvcFrontApp").controller("BoletinesPeriodoCtrl",["$scope","App","$rootScope","$state","alumnosDat","escalas","Restangular","$uibModal","$filter","AuthService","$cookieStore",function(a,b,c,d,e,f,g,h,i,j,k){return a.grupo=e[0],a.year=e[1],a.alumnos=e[2],a.escalas=f,a.config=k.get("config"),a.requested_alumnos=k.get("requested_alumnos"),a.requested_alumno=k.get("requested_alumno"),a.$on("change_config",function(){return a.config=k.get("config")}),a.requested_alumnos?a.$emit("cambia_descripcion","Mostrando "+a.alumnos.length+" boletines de "+a.grupo.cantidad_alumnos+" del grupo "+a.grupo.nombre_grupo):a.requested_alumno?a.$emit("cambia_descripcion","Mostrando un boletin de "+a.grupo.cantidad_alumnos+" del grupo "+a.grupo.nombre_grupo):a.$emit("cambia_descripcion",a.alumnos.length+" boletines del grupo "+a.grupo.nombre_grupo)}])}.call(this),function(){angular.module("myvcFrontApp").directive("boletinAlumnoDir",["App","Perfil",function(a,b){return{restrict:"EA",templateUrl:""+a.views+"informes/boletinAlumnoDir.tpl.html",scope:{grupo:"=",year:"=",alumno:"=",config:"=",escalas:"="},link:function(c,d,e){return c.USER=b.User(),c.USER.nota_minima_aceptada=parseInt(c.USER.nota_minima_aceptada),c.perfilPath=a.images+"perfil/"}}}]).filter("cantPerdidasPer",[function(){return function(a,b,c){return this.suma=0,angular.forEach(a,function(a,c){var d;return b=parseFloat(b),d=parseFloat(a.id),d===b?this.suma=this.suma+a.cantNotasPerdidas:void 0;
}),0===this.suma?"":this.suma}}])}.call(this),function(){angular.module("myvcFrontApp").controller("PuestosGrupoPeriodoCtrl",["$scope","App","$rootScope","$state","alumnosDat","escalas","Restangular","$uibModal","$filter","AuthService","$cookieStore",function(a,b,c,d,e,f,g,h,i,j,k){return a.grupo=e[0],a.year=e[1],a.alumnos=e[2],console.log("$scope.USER.nota_minima_aceptada",a.USER.nota_minima_aceptada),a.escalas=f,a.config=k.get("config"),a.$on("change_config",function(){return a.config=k.get("config")})}])}.call(this),function(){angular.module("myvcFrontApp").filter("puestoAlumno",[function(){return function(a,b){var c;return c=0,angular.forEach(b,function(b){return a.promedio<b.promedio?c+=1:void 0}),c}}]).filter("notasAsignatura",[function(){return function(a,b){var c;return c="",angular.forEach(a,function(a){return c=c+'<div class="ellipsis350"><b>Per'+b+": "+a.definicion_unidad+"</b></div>",angular.forEach(a.subunidades,function(a,b){return a.nota?c=c+(b+1)+". "+a.definicion_subunidad+"<b> => "+a.nota.nota+"</b><br>":void 0})}),c}}]).filter("notasPerdidasAsignaturas",["$filter",function(a){return function(b){return this.cantidad_perdidas=0,angular.forEach(b,function(b){return this.cantidad_perdidas=this.cantidad_perdidas+a("notasPerdidasAsignatura")(b.unidades,!0)}),this.cantidad_perdidas}}]).filter("notasPerdidasAsignatura",["Perfil",function(a){return function(b,c,d){var e;return this.unidades_response=[],this.cantidad_perdidas=0,angular.forEach(b,function(b){var c;return this.subunis=[],angular.forEach(b.subunidades,function(b){if(b.nota)if(b.nota.nota||0===b.nota.nota){if(b.nota.nota<a.User().nota_minima_aceptada)return this.subunis.push(b)}else if(b.nota<a.User().nota_minima_aceptada)return this.subunis.push(b)},this),this.cantidad_perdidas=this.cantidad_perdidas+this.subunis.length,this.subunis.length>0?(c={unidad_id:b.unidad_id,definicion_unidad:b.definicion_unidad,valor_unidad:b.valor_unidad,orden_unidad:b.orden_unidad,nota_unidad:b.nota_unidad,subunidades:this.subunis},this.unidades_response.push(c)):void 0},this),c?this.cantidad_perdidas:(e="",angular.forEach(unidades_response,function(a){return e=e+'<div class="ellipsis350"><b>Per'+d+": "+a.definicion_unidad+"</b></div>",angular.forEach(a.subunidades,function(a,b){return e=e+'<span class="ellipsis250">'+(b+1)+". "+a.definicion_subunidad+" </span><b> => "+a.nota.nota+"</b><br>"})}),e)}}]).filter("notasPerdidasAsignaturaPeriodo",["$filter",function(a){return function(b,c){var d,e,f,g,h;for(e=0,g=0,h=b.length;h>g;g++)d=b[g],f=a("notasPerdidasAsignatura")(d.unidades,!0),e+=f;return e}}]).filter("promAsig",["$filter",function(a){return function(a,b){var c,d,e,f,g,h,i,j,k;for(f=0,e=0,g=0,i=a.length;i>g;g++)for(c=a[g],k=c.asignaturas,h=0,j=k.length;j>h;h++)d=k[h],d.asignatura_id===b&&(e++,f+=d.nota_asignatura);return f/e}}]).filter("promGrupoPer",["$filter",function(a){return function(a){var b,c,d,e;for(c=0,d=0,e=a.length;e>d;d++)b=a[d],c+=b.promedio;return c/a.length}}]).filter("notasPerdidasGrupoPer",["$filter",function(a){return function(b){var c,d,e,f;for(d=0,e=0,f=b.length;f>e;e++)c=b[e],d+=a("notasPerdidasAsignaturaPeriodo")(c.asignaturas,!0);return d}}])}.call(this),function(){angular.module("myvcFrontApp").filter("promGrupoYear",[function(){return function(a){var b,c,d,e;for(c=0,d=0,e=a.length;e>d;d++)b=a[d],c+=b.promedio_year;return c/a.length}}]).filter("promAsigYear",["$filter",function(a){return function(a,b){var c,d,e,f,g,h,i,j,k;for(f=0,d=0,g=0,i=a.length;i>g;g++)for(c=a[g],k=c.notas_asig,h=0,j=k.length;j>h;h++)e=k[h],e.asignatura_id===b&&(d++,f+=parseFloat(e.nota_asignatura_year));return f/d}}]).filter("notasAsignaturaYear",["$filter",function(a){return function(b){var c,d,e,f,g;for(c=0,d="",f=0,g=b.length;g>f;f++)e=b[f],d+=a("notasAsignatura")(e.unidades,e.numero);return d}}]).filter("notasPerdidasAsignaturaYear",["$filter",function(a){return function(b,c){var d,e,f,g,h;for(d=0,e="",g=0,h=b.length;h>g;g++)f=b[g],c?d+=a("notasPerdidasAsignatura")(f.unidades,c,f.numero):e+=a("notasPerdidasAsignatura")(f.unidades,!1,f.numero);return c?d:e}}]).filter("notasPerdidasAsignaturasYear",["$filter",function(a){return function(b){return this.cantidad_perdidas=0,angular.forEach(b,function(b){return this.cantidad_perdidas=this.cantidad_perdidas+a("notasPerdidasAsignaturaYear")(b.periodos,!0)}),this.cantidad_perdidas}}]).filter("notasPerdidasGrupoYear",["$filter",function(a){return function(a){var b,c,d,e;for(c=0,d=0,e=a.length;e>d;d++)b=a[d],c+=b.sub_perdidas_year;return c}}])}.call(this),function(){angular.module("myvcFrontApp").controller("PuestosGrupoYearCtrl",["$scope","App","$rootScope","$state","datos_puestos","escalas","Restangular","$uibModal","$filter","AuthService","$cookieStore",function(a,b,c,d,e,f,g,h,i,j,k){return a.grupo=e.grupo,a.year=e.year,a.alumnos=e.alumnos,a.escalas=f,a.config=k.get("config"),a.$on("change_config",function(){return a.config=k.get("config")}),a.alumnos_materias=[],a.add_alum_materia=function(b,c){return a.alumnos_materias.push({asignatura:b,alumno:c})}}])}.call(this),function(){angular.module("myvcFrontApp").controller("PlanillasCtrl",["$scope","App","Perfil","asignaturas","$state",function(a,b,c,d,e){var f;return a.USER=c.User(),a.USER.nota_minima_aceptada=parseInt(a.USER.nota_minima_aceptada),a.year=d[0],a.asignaturas=d[1],a.perfilPath=b.images+"perfil/",a.unidadesdefault=["  ","  ","  "],a.subunidadesdefault=["  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  "],e.params.profesor_id?(f=a.asignaturas[0],console.log("asig",f),a.$emit("cambia_descripcion",a.asignaturas.length+" planillas  del profesor "+f.nombres_profesor+" "+f.apellidos_profesor)):e.params.grupo_id?(f=a.asignaturas[0],a.$emit("cambia_descripcion",a.asignaturas.length+" planillas  del grupo "+f.nombre_grupo)):void 0}])}.call(this),function(){angular.module("myvcFrontApp").controller("BoletinesFinalesCtrl",["$scope","App","$rootScope","$state","alumnosDat","escalas","Restangular","$uibModal","$filter","AuthService","$cookieStore",function(a,b,c,d,e,f,g,h,i,j,k){return a.grupo=e[0],a.year=e[1],a.alumnos=e[2],a.escalas=f,a.config=k.get("config"),a.requested_alumnos=k.get("requested_alumnos"),a.requested_alumno=k.get("requested_alumno"),a.$on("change_config",function(){return a.config=k.get("config")}),a.requested_alumnos?a.$emit("cambia_descripcion","Mostrando "+a.alumnos.length+" boletines de "+a.grupo.cantidad_alumnos+" del grupo "+a.grupo.nombre_grupo):a.requested_alumno?a.$emit("cambia_descripcion","Mostrando un boletin de "+a.grupo.cantidad_alumnos+" del grupo "+a.grupo.nombre_grupo):a.$emit("cambia_descripcion",a.alumnos.length+" boletines del grupo "+a.grupo.nombre_grupo)}])}.call(this),function(){angular.module("myvcFrontApp").directive("boletinFinalAlumnoDir",["App","Perfil",function(a,b){return{restrict:"EA",templateUrl:""+a.views+"informes/boletinFinalAlumnoDir.tpl.html",scope:{grupo:"=",year:"=",alumno:"=",config:"=",escalas:"="},link:function(c,d,e){return c.USER=b.User(),c.USER.nota_minima_aceptada=parseInt(c.USER.nota_minima_aceptada),c.perfilPath=a.images+"perfil/"}}}]).filter("promedioPeriodo",[function(){return function(a,b){var c,d,e,f,g,h,i,j,k;for(f=0,g=0,i=a.length;i>g;g++)for(c=a[g],k=c.definitivas,h=0,j=k.length;j>h;h++)d=k[h],d.periodo_id&&parseFloat(d.periodo_id)===parseFloat(b)&&(f+=parseFloat(d.DefMateria));return e=f/a.length}}])}.call(this),function(){angular.module("myvcFrontApp").directive("editNotasMatYearDir",["App","Perfil",function(a,b){return{restrict:"EA",templateUrl:""+a.views+"informes/editNotasMatYearDir.tpl.html",scope:{asignatura:"=",alumno:"=",alumnosasigs:"="},controller:["$scope","App","Restangular","EscalasValorativasServ","AuthService","toastr",function(a,c,d,e,f,g){var h;return a.USER=b.User(),a.USER.nota_minima_aceptada=parseInt(a.USER.nota_minima_aceptada),a.perfilPath=c.images+"perfil/",a.periodos_materia=[],a.solo_notas_perdidas=!0,a.hasRoleOrPerm=f.hasRoleOrPerm,e.escalas().then(function(b){return a.escalas=b}),h={alumno_id:a.alumno.alumno_id,asignatura_id:a.asignatura.asignatura_id,periodos_a_calcular:"de_usuario"},d.one("editnota/alum-asignatura").customPUT(h).then(function(b){return a.periodos_materia=b},function(a){return console.log(a)}),a.cambiaNota=function(a,b){return console.log(a,b),d.one("notas/update",a.id).customPUT({nota:a.nota}).then(function(b){return g.success("Cambiada: "+a.nota),console.log("Cuando la nota cambia, el objeto nota: ",a)},function(b){return console.log("No pudimos guardar la nota ",a),g.error("No pudimos guardar la nota "+a.nota)})}}]}}])}.call(this),function(){angular.module("myvcFrontApp").directive("certificadoEstudioDir",["App","Perfil",function(a,b){return{restrict:"EA",templateUrl:""+a.views+"informes/certificadoEstudioDir.tpl.html",scope:{grupo:"=",year:"=",alumno:"=",config:"=",escalas:"="},link:function(c,d,e){var f,g;return c.USER=b.User(),c.USER.nota_minima_aceptada=parseInt(c.USER.nota_minima_aceptada),c.perfilPath=a.images+"perfil/",g=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],f=new Date,c.fecha_dia=f.getDate(),c.fecha_mes=g[f.getMonth()],c.fecha_year=f.getFullYear()}}}])}.call(this),function(){angular.module("myvcFrontApp").controller("CertificadosEstudioCtrl",["$scope","App","$rootScope","$state","alumnosDat","escalas","Restangular","$uibModal","$filter","AuthService","$cookieStore","$http","$sce",function(a,b,c,d,e,f,g,h,i,j,k,l,m){return a.grupo=e[0],a.year=e[1],a.alumnos=e[2],a.escalas=f,a.config=k.get("config"),a.requested_alumnos=k.get("requested_alumnos"),a.requested_alumno=k.get("requested_alumno"),a.$on("change_config",function(){return a.config=k.get("config")}),a.requested_alumnos?a.$emit("cambia_descripcion","Mostrando "+a.alumnos.length+" boletines de "+a.grupo.cantidad_alumnos+" del grupo "+a.grupo.nombre_grupo):a.requested_alumno?a.$emit("cambia_descripcion","Mostrando un boletin de "+a.grupo.cantidad_alumnos+" del grupo "+a.grupo.nombre_grupo):a.$emit("cambia_descripcion",a.alumnos.length+" boletines del grupo "+a.grupo.nombre_grupo)}])}.call(this),function(){angular.module("myvcFrontApp").filter("decimales",[function(){return function(a,b){return a=parseFloat(a),a=a%1===0?a.toFixed(0):a.toFixed(b),a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}}]).filter("decimales_if",[function(){return function(a,b){var c;return a=parseFloat(a),a=a%1===0?a.toFixed(0):a.toFixed(b),c=a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),c=parseFloat(c)}}]).filter("setDecimal",[function(){return function(a,b){var c;return isNaN(a)?a:(c="1"+Array(+(b>0&&b+1)).join("0"),Math.round(a*c)/c)}}])}.call(this),function(){angular.module("myvcFrontApp").filter("materiasPerdidasYear",[function(){return function(a,b,c){return b?(this.alumnos_response=[],angular.forEach(a,function(a,d){return this.cant_asig_perdidas=0,angular.forEach(a.notas_asig,function(a,b){return a.nota_asignatura_year<c?this.cant_asig_perdidas++:void 0}),this.cant_asig_perdidas>=b?this.alumnos_response.push(a):void 0}),alumnos_response):a}}]).filter("materiasPerdidas",[function(){return function(a,b,c){return console.log("materiasPerdidas",b,c),b?(this.alumnos_response=[],angular.forEach(a,function(a,d){return this.cant_asig_perdidas=0,angular.forEach(a.asignaturas,function(a,b){return a.nota_asignatura<c?this.cant_asig_perdidas++:void 0}),this.cant_asig_perdidas>=b?this.alumnos_response.push(a):void 0}),alumnos_response):a}}])}.call(this),function(){"use strict";angular.module("myvcFrontApp").config(["$stateProvider","App","PERMISSIONS",function(a,b,c){a.state("panel.actividades.votaciones",{url:"/votaciones",views:{actividades_content:{templateUrl:""+b.views+"votaciones/votacionesInicio.tpl.html",controller:"VotacionesInicioCtrl"},headerContent:{templateUrl:""+b.views+"panel/panelHeader.tpl.html",controller:"PanelHeaderCtrl",resolve:{titulo:[function(){return"Votaciones"}]}}},data:{displayName:"Votaciones",icon_fa:"fa fa-legal",pageTitle:"Votaciones - MyVc"}}),a.state("panel.actividades.votaciones.config",{url:"/config",views:{votaciones_view:{templateUrl:""+b.views+"votaciones/votaciones.tpl.html",controller:"VotacionesCtrl"},headerContent:{templateUrl:""+b.views+"panel/panelHeader.tpl.html",controller:"PanelHeaderCtrl",resolve:{titulo:[function(){return"Configuración - MyVc"}]}}},data:{displayName:"Configuración",icon_fa:"fa fa-legal",pageTitle:"Configuración - MyVc"}}).state("panel.actividades.votaciones.participantes",{url:"/participantes",views:{votaciones_view:{templateUrl:""+b.views+"votaciones/participantes.tpl.html",controller:"ParticipantesCtrl"},headerContent:{templateUrl:""+b.views+"panel/panelHeader.tpl.html",controller:"PanelHeaderCtrl",resolve:{titulo:[function(){return"Participantes"}]}}},data:{needed_permissions:[c.can_edit_participantes],displayName:"Participantes",icon_fa:"fa fa-legal",pageTitle:"Participantes - MyVc"}}).state("panel.actividades.votaciones.candidatos",{url:"/candidatos",views:{votaciones_view:{templateUrl:""+b.views+"votaciones/candidatos.tpl.html",controller:"CandidatosCtrl"},headerContent:{templateUrl:""+b.views+"panel/panelHeader.tpl.html",controller:"PanelHeaderCtrl",resolve:{titulo:[function(){return"Candidatos"}]}}},data:{needed_permissions:[c.can_edit_candidatos],pageTitle:"Candidatos - MyVc"}}).state("panel.actividades.votaciones.votar",{url:"/votar",views:{votaciones_view:{templateUrl:""+b.views+"votaciones/votar.tpl.html",controller:"VotarCtrl"},headerContent:{templateUrl:""+b.views+"panel/panelHeader.tpl.html",controller:"PanelHeaderCtrl",resolve:{titulo:[function(){return"Votar"}]}}},data:{pageTitle:"Votar - MyVc"}}).state("panel.actividades.votaciones.votarprueba",{url:"/prueba",views:{votaciones_view:{templateUrl:""+b.views+"votaciones/votarprueba.tpl.html",controller:"VotarPruebaCtrl"},headerContent:{templateUrl:""+b.views+"panel/panelHeader.tpl.html",controller:"PanelHeaderCtrl",resolve:{titulo:[function(){return"Prueba votación"}]}}},data:{pageTitle:"Prueba votación - MyVc"}}).state("panel.actividades.votaciones.resultados",{url:"/resultados",views:{votaciones_view:{templateUrl:""+b.views+"votaciones/resultados.tpl.html",controller:"ResultadosCtrl"},headerContent:{templateUrl:""+b.views+"panel/panelHeader.tpl.html",controller:"PanelHeaderCtrl",resolve:{titulo:[function(){return"Resultados"}]}}},data:{pageTitle:"Resultados - MyVc"}})}])}.call(this),function(){"use strict";angular.module("myvcFrontApp").controller("VotacionesCtrl",["$scope","$filter","Restangular","resolved_user","App","toastr",function(a,b,c,d,e,f){var g,h,i,j,k,l;a.data={},a.editing=!1,a.gridScope=a,a.votacionEdit={},a.votacion={locked:!1,is_action:!1,fecha_inicio:"",fecha_fin:"",aspiraciones:[{aspiracion:"",abrev:""}]},a.date={dateOptions:{startingDay:1}},a.addAspiracion=function(){return a.votacion.aspiraciones.push({aspiracion:"",abrev:""})},a.removeAspiracion=function(b){return a.votacion.aspiraciones.splice(b,1)},a.addAspiracionEdit=function(b){return c.one("aspiraciones/store").customPOST({votacion_id:b}).then(function(b){return f.success("Aspiración creada."),a.votacionEdit.aspiraciones.push({id:b.id,aspiracion:"",abrev:""})},function(a){return console.log("No se pudo crear aspiración.",a)})},a.updateAspiracionEdit=function(a){return c.one("aspiraciones/update").customPUT(a).then(function(a){return f.success("Aspiración modificada.")},function(a){return console.log("No se pudo modificar aspiración.",a)})},a.removeAspiracionEdit=function(d){return c.one("aspiraciones/destroy").customDELETE(d.id).then(function(c){return f.success("Aspiración eliminada."),a.votacionEdit.aspiraciones=b("filter")(a.votacionEdit.aspiraciones,{id:"!"+d.id})},function(a){return console.log("No se pudo eliminar aspiración.",a)})},a.editar=function(b){return console.log("Presionado para editar fila: ",b),a.editing=!0,a.votacionEdit=b},a.eliminar=function(d){return c.all("votaciones/destroy/"+d.id).remove().then(function(c){return console.log("Se ha eliminado: ",c),a.gridOptions.data=b("filter")(a.gridOptions.data,{id:"!"+d.id})},function(a){return console.log("No se pudo eliminar.",a)})},a.cambiarInAction=function(b){return c.one("votaciones/set-in-action").customPUT({id:b.id,in_action:b.in_action}).then(function(c){var d,e,g,h;if(console.log("Se ha cambiado: ",c),b.in_action)for(h=a.gridOptions.data,e=0,g=h.length;g>e;e++)d=h[e],b.id!==d.id&&(d.in_action=!1);else b.in_action=!1;return f.success("Cambiado")},function(a){return console.log("No se pudo poner en acción.",a)})},a.cambiarLocked=function(a){return c.one("votaciones/set-locked").customPUT({id:a.id,locked:a.locked}).then(function(a){return f.success("Cambiado")},function(a){return console.log("No se pudo cambiar bloqueo.",a)})},a.cambiarPermisoVerResults=function(a){return c.one("votaciones/set-permiso-ver-results").customPUT({id:a.id,can_see_results:a.can_see_results}).then(function(a){return f.success("Cambiado")},function(a){return console.log("No se pudo cambiar el permiso.",a)})},a.cambiarEventoActual=function(b){return c.one("votaciones/set-actual").customPUT({id:b.id,actual:b.actual}).then(function(c){var d,e,g,h;if(console.log("Se ha vuelto actual: ",c),b.actual)for(h=a.gridOptions.data,e=0,g=h.length;g>e;e++)d=h[e],b.id!==d.id&&(d.actual=!1);else b.actual=!1;return f.success("Cambiado")},function(a){return console.log("No se pudo volver actual.",a)})},j='<a uib-tooltip="Editar" tooltip-placement="right" class="btn btn-default btn-xs shiny icon-only info" ng-click="grid.appScope.editar(row.entity)"><i class="fa fa-edit "></i></a>',k='<a uib-tooltip="X Eliminar" tooltip-placement="right" class="btn btn-default btn-xs shiny icon-only danger" ng-click="grid.appScope.eliminar(row.entity)"><i class="fa fa-times "></i></a>',h=""+e.views+"votaciones/botonEventoActual.tpl.html",i=""+e.views+"votaciones/botonEventoLocked.tpl.html",g=""+e.views+"votaciones/botonEventoInAction.tpl.html",l=""+e.views+"votaciones/botonPermisoVerResults.tpl.html",a.gridOptions={enableSorting:!0,enebleGridColumnMenu:!1,columnDefs:[{name:"id",displayName:"Id",width:40,enableFiltering:!1,enableCellEdit:!1},{name:"edicion",displayName:"Edición",width:50,enableSorting:!1,enableFiltering:!1,cellTemplate:j+k,enableCellEdit:!1},{field:"nombre",enableHiding:!1,minWidth:110},{field:"locked",displayName:"Bloqueado",maxWidth:60,cellTemplate:i,minWidth:80},{field:"actual",displayName:"Actual",maxWidth:60,cellTemplate:h,minWidth:80},{field:"in_action",displayName:"En acción",maxWidth:60,cellTemplate:g,minWidth:80},{field:"can_see_results",displayName:"Permiso",maxWidth:60,cellTemplate:l,minWidth:80},{field:"fecha_inicio",displayName:"Inicia",cellFilter:"date:mediumDate",type:"date",width:80},{field:"fecha_fin",displayName:"Termina",cellFilter:"date:mediumDate",type:"date",width:80}],multiSelect:!1,onRegisterApi:function(b){return a.gridApi=b,b.edit.on.afterCellEdit(a,function(b,d,e,f){return e!==f&&c.one("votaciones/update",b.id).customPUT(b).then(function(b){return a.toastr.success("Evento actualizado con éxito","Actualizado")},function(b){return a.toastr.error("Cambio no guardado","Error"),console.log("Falló al intentar guardar: ",b)}),a.$apply()})}},c.one("votaciones").getList().then(function(b){return a.gridOptions.data=b},function(a){return console.log("Error trayendo los eventos. ",a)}),a.crear=function(){return c.all("votaciones/store").post(a.votacion).then(function(b){return console.log("Se hizo el post de la votación",b),b.actual&&angular.forEach(a.gridOptions.data,function(a,b){return a.actual=0}),a.gridOptions.data.push(b)},function(a){return console.log("Falló al intentar guardar: ",a)})},a.guardar=function(){return a.votacionEdit.put().then(function(a){return console.log("Se hizo el put de la votación",a)},function(a){return console.log("Falló al intentar guardar: ",a)})}}])}.call(this),function(){"use strict";angular.module("myvcFrontApp").controller("VotacionesInicioCtrl",["$scope","$rootScope","$interval","resolved_user","App","AuthService","$state",function(a,b,c,d,e,f,g){f.verificar_acceso(),a.hasRoleOrPerm=f.hasRoleOrPerm,a.USER=d,g.is("panel.actividades.votaciones")&&(a.hasRoleOrPerm(["alumno","acudiente"])&&g.go("panel.actividades.votaciones.votar"),a.hasRoleOrPerm(["admin","profesor"])&&g.go("panel.actividades.votaciones.config"))}])}.call(this),function(){"use strict";angular.module("myvcFrontApp").controller("CandidatosCtrl",["$scope","$filter","Restangular",function(a,b,c){a.aspiraciones=[],a.allinscritos=[],c.all("candidatos/conaspiraciones").getList().then(function(b){return a.aspiraciones=b},function(b){return console.log("No se pudo con aspiraciones. ",b),a.toastr.error("No se pudo traer las aspiraciones","Problema")}),c.all("participantes/allinscritos").getList().then(function(b){return a.allinscritos=b},function(b){return console.log("No se pudo con los inscritos. ",b),a.toastr.error("No se pudo traer los inscritos","Problema")}),a.crearCandidato=function(b){var d;return d=[],d.participante_id=b.newParticip.participante_id,d.plancha=b.newParticip.plancha,d.numero=b.newParticip.numero,d.aspiracion_id=b.id,c.all("candidatos/store").post("candidato",d).then(function(c){return console.log("Candidato creado.",c),c.persona_id=b.newParticip.persona_id,c.nombres=b.newParticip.nombres,c.apellidos=b.newParticip.apellidos,c.user_id=b.newParticip.user_id,c.username=b.newParticip.username,c.tipo=b.newParticip.tipo,b.candidatos.push(c),b.newParticip=null,a.toastr.success("Candidato creado con éxito")},function(b){return"Candidato ya inscrito."===b.error.message?a.toastr.warning("Candidato ya inscrito en esta aspiración"):(console.log("Error al crear candidato. ",b),a.toastr.warning("No se pudo crear el candidato","Problema"))})},a.eliminarCandidato=function(d,e){return c.all("candidatos/destroy/"+d).remove().then(function(c){return console.log("Candidatura quitada.",c),e.candidatos=b("filter")(e.candidatos,{candidato_id:"!"+d}),a.toastr.success("Candidato removido de la candidatura")},function(b){return console.log("No se pudo quitar de la candidatura",b),a.toastr.error("No se pudo quitar de la candidatura","Problema")})}}])}.call(this),function(){"use strict";angular.module("myvcFrontApp").controller("ParticipantesCtrl",["$scope","$filter","$rootScope","Restangular","toastr","App",function(a,b,c,d,e,f){var g,h,i;a.editing=!1,a.gridScope=a,a.participante={},i=!1,a.votacion={locked:!1,is_action:!1,fecha_inicio:"",fecha_fin:""},a.eliminar=function(c){return d.one("participantes/destroy/"+c.id).remove().then(function(c){return e.success("Se ha eliminado."),a.gridOptions.data=b("filter")(a.gridOptions.data,{id:"!"+c.id})},function(a){return console.log("No se pudo eliminar.",a)})},a.cambiarLocked=function(a){return d.one("participantes/set-locked").customPUT({id:a.id,locked:a.locked}).then(function(a){return e.success("Cambiado")},function(a){return console.log("No se pudo cambiar bloqueo.",a)})},h='<a uib-tooltip="X Eliminar" tooltip-placement="right" class="btn btn-default btn-xs shiny icon-only danger" ng-click="grid.appScope.eliminar(row.entity)"><i class="fa fa-times "></i></a>',g=""+f.views+"votaciones/botonEventoLocked.tpl.html",a.gridOptions={enableSorting:!0,showGridFooter:!0,enableFiltering:!0,enebleGridColumnMenu:!1,columnDefs:[{name:"edicion",displayName:"Edición",maxWidth:50,enableSorting:!1,enableFiltering:!1,cellTemplate:h,enableCellEdit:!1},{field:"nombres",displayName:"nombres",enableCellEdit:!1,minWidth:80},{field:"apellidos",displayName:"apellidos",enableCellEdit:!1},{field:"nombre_grupo",displayName:"Grado",enableCellEdit:!1},{field:"username",displayName:"Usuario",enableCellEdit:!1},{field:"votados",displayName:"Votados",enableCellEdit:!1},{field:"completo",displayName:"Completo",enableCellEdit:!1},{field:"locked",displayName:"Bloqueado",cellTemplate:g,minWidth:80}],multiSelect:!1,onRegisterApi:function(b){return a.gridApi=b}},d.one("participantes").getList().then(function(b){return a.gridOptions.data=b},function(a){return e.warning("Asegúrate de tener al menos un evento como actual.")}),d.one("grupos").getList().then(function(b){return a.grupos=b},function(a){}),d.one("votaciones/actual").get().then(function(b){return a.votacion=b}),a.inscribirGrupo=function(a){return d.all("participantes/inscribirgrupo/"+a.id).post().then(function(b){return e.success("Se inscribió el grupo."),a.presionado=!0},function(a){})},a.inscribirProfesores=function(){return d.all("participantes/inscribir-profesores").post().then(function(a){return e.success("Se inscribieron los profesores."),i=!0},function(a){})}}])}.call(this),function(){"use strict";angular.module("myvcFrontApp").controller("VotarCtrl",["$scope","Restangular","toastr",function(a,b,c){a.votaciones=[],a.indexVotando=0,b.one("votaciones/en-accion-inscrito").get().then(function(b){var d,e,f,g,h;if(b.msg)return c.warning(b.msg,"Atención");for(a.votaciones=b,g=a.votaciones,h=[],e=0,f=g.length;f>e;e++)d=g[e],d.completos?h.push(a.indexVotando++):h.push(void 0);return h}),a.$on("termineDeVotar",function(){return a.indexVotando++,a.$broadcast("terminaVotacion",a.indexVotando)})}]).controller("chooseCandidatoCtrl",["$scope","Restangular","$uibModalInstance","App","candidato","aspiracion","votacion_id","toastr",function(a,b,c,d,e,f,g,h){return a.candidato=e,a.aspiracion=f,a.imagesPath=d.images+"perfil/",a.ok=function(){var a;return a={},a.candidato_id=e.candidato_id,a.votacion_id=g,b.all("votos/store").post("",a).then(function(a){return a.msg?h.info(a.msg):h.success("Voto guardado con éxito"),c.close(a)},function(a){return console.log("No se pudo guardar el voto.",a),a.data&&a.data.msg?h.error(a.data.msg):h.error("No se pudo guardar el voto."),c.dismiss("Error al guardar")})},a.cancel=function(){return c.dismiss("cancel")}}])}.call(this),function(){"use strict";angular.module("myvcFrontApp").controller("VotarPruebaCtrl",["$scope","$filter","Restangular","App","$state","$uibModal","$window",function(a,b,c,d,e,f,g){a.hover=!1,a.aspiraciones=[],a.maxi=e.params.maxi,a.windowHeight=angular.element(g).height()-100,a.wzStep=0,a.votacion={locked:!1,is_action:!1,fecha_inicio:"",fecha_fin:""},c.one("votaciones/actual").get().then(function(b){return a.votacion=b,a.votacion.locked?a.toastr.warning("La votación actual está bloqueada"):void 0}),c.all("candidatos/conaspiraciones").getList().then(function(b){return a.aspiraciones=b},function(b){return console.log("No se pudo traer aspiraciones. ",b),a.toastr.error("No se pudo traer las aspiraciones","Problema")}),c.all("participantes/allinscritos").getList().then(function(b){return a.allinscritos=b},function(b){return console.log("No se pudo con aspiraciones. ",b),a.toastr.error("No se pudo traer los inscritos","Problema")}),a.currentImg="default_male.jpg",a.imagesPath=d.images+"perfil/",a.mostrarImagen=function(b){return b.iluminado=!0,a.currentImg=b.imagen_nombre},a.ocultarImagen=function(a){return a.iluminado=!1},a.nextAspiracion=function(){return a.wzStep<a.aspiraciones.length?a.wzStep+=1:void 0},a.prevAspiracion=function(){return a.wzStep>0?a.wzStep-=1:void 0},a.goAspiracion=function(b){return a.wzStep=parseInt(a.wzStep),b=parseInt(b),b<a.wzStep?a.wzStep=b:void 0},a.open=function(b,c){var e;return a.votacion.locked?void a.toastr.warning("La votación actual está bloqueada"):(e=f.open({templateUrl:d.views+"votaciones/chooseCandidato.tpl.html",controller:"chooseCandidatoCtrl",resolve:{candidato:function(){return b},aspiracion:function(){return c.aspiracion}}}),e.result.then(function(b){return c.votado.push(b),console.log(b),a.nextAspiracion()},function(){}))}}]).controller("chooseCandidatoPruebaCtrl",["$scope","Restangular","$uibModalInstance","App","candidato","aspiracion","toastr",function(a,b,c,d,e,f,g){return a.candidato=e,a.aspiracion=f,a.imagesPath=d.images+"perfil/",a.ok=function(){var a,b;return a={},a.candidato_id=e.candidato_id,b={locked:!1,is_action:!1,fecha_inicio:"",fecha_fin:"",completo:!1},g.success("Voto guardado con éxito"),c.close(b)},a.cancel=function(){return c.dismiss("cancel")}}])}.call(this),function(){angular.module("myvcFrontApp").directive("votarPanelDir",["App","Perfil",function(a,b){return{restrict:"EA",templateUrl:""+a.views+"votaciones/votarPanel.tpl.html",scope:{votacion:"="},controller:["$scope","App","Restangular","EscalasValorativasServ","AuthService","toastr","$window","$uibModal",function(a,c,d,e,f,g,h,i){a.USER=b.User(),a.hover=!1,a.maxi=!1,a.windowHeight=angular.element(h).height()-100,a.wzStep=0,a.currentImg="default_male.jpg",a.imagesPath=c.images+"perfil/",a.$parent.$index===a.$parent.indexVotando&&(a.maxi=!0),a.$on("terminaVotacion",function(b,c){return a.$parent.$index===c?a.maxi=!0:void 0}),a.votacion.completos&&(a.wzStep=a.votacion.aspiraciones.length),a.mostrarImagen=function(b){return b.iluminado=!0,a.currentImg=b.imagen_nombre},a.ocultarImagen=function(a){return a.iluminado=!1},a.nextAspiracion=function(){return a.wzStep<a.votacion.aspiraciones.length?a.wzStep+=1:void 0},a.prevAspiracion=function(){return a.wzStep>0?a.wzStep-=1:void 0},a.goAspiracion=function(b){return a.wzStep=parseInt(a.wzStep),b=parseInt(b),b<a.wzStep?a.wzStep=b:void 0},a.open=function(b,d){var e;if(a.votacion.locked)g.warning("Usted está bloqueado en esta votación.");else{if(!a.votacion.locked_votacion)return e=i.open({templateUrl:c.views+"votaciones/chooseCandidato.tpl.html",controller:"chooseCandidatoCtrl",resolve:{candidato:function(){return b},aspiracion:function(){return d.aspiracion},votacion_id:function(){return a.votacion.votacion_id}}}),e.result.then(function(b){var c,e,f,h,i;for(d.votado=b,e=0,i=a.votacion.aspiraciones,f=0,h=i.length;h>f;f++)c=i[f],c.votado&&e++;return a.votacion.aspiraciones.length===e&&(a.$emit("termineDeVotar"),a.maxi=!1,g.info("Ahora continúa con la siguiente votación.")),a.nextAspiracion()},function(){});g.warning("Usted está bloqueado en esta votación.")}}}]}}])}.call(this),function(){angular.module("myvcFrontApp").controller("ResultadosCtrl",["$scope","$filter","Restangular","App","$state","$uibModal","$window",function(a,b,c,d,e,f,g){a.votacion={locked:!1,is_action:!1,fecha_inicio:"",fecha_fin:""},a.imagesPath=d.images+"perfil/",c.one("votos/show").get().then(function(b){return a.votaciones=b},function(a){return console.log("Error trayendo las votaciones. ",a)})}])}.call(this),function(){angular.module("myvcFrontApp").directive("loader",["App",function(a){return{restrict:"E",templateUrl:""+a.views+"directives/loader.tpl.html",scope:{cargando:"="},link:function(a,b,c){}}}])}.call(this),angular.module("uiBreadcrumbs",["ui.router","myvcFrontApp"]).directive("uiBreadcrumbs",["$interpolate","$state","App",function(a,b,c){return{restrict:"E",templateUrl:c.views+"directives/uiBreadcrumbs.tpl.html",scope:{displaynameProperty:"@"},link:function(c){function d(){for(var a=[],d=b.$current;d&&""!==d.name;){var g=e(d),h=f(d);g!==!1&&a.push({displayName:g,route:d.name,icon_fa:h}),d=d.parent}a.reverse(),c.breadcrumbs=a}function e(b){var d,e,f,g;if(!c.displaynameProperty)return b.name;for(f=c.displaynameProperty.split("."),e=b,d=0;d<f.length;d++){if(!angular.isDefined(e[f[d]]))return b.name;if(e[f[d]]===!1)return!1;e=e[f[d]]}return g=a(e)(b.locals.globals)}function f(b){var c,d;return c=b,angular.isDefined(c.data.icon_fa)?c.data.icon_fa===!1?!1:(c=c.data.icon_fa,d=a(c)(b.locals.globals)):""}c.breadcrumbs=[],""!==b.$current.name&&d(),c.$on("$stateChangeSuccess",function(){d()})}}}]),function(){angular.module("myvcFrontApp").directive("databoxesContainer",["App",function(a){return{restrict:"E",templateUrl:""+a.views+"directives/databoxesContainer.tpl.html",scope:{cargando:"="},link:function(a,b,c){}}}])}.call(this),function(){angular.module("myvcFrontApp").directive("sidebarMenu",["App","$rootScope","AuthService","Restangular","$uibModal","Perfil","ProfesoresServ","$window","$compile",function(a,b,c,d,e,f,g,h,i){return{restrict:"E",replace:!0,templateUrl:""+a.views+"directives/sidebarMenu.tpl.html",scope:{cargando:"="},link:function(a,b,c){
return a.$watch(function(){return h.innerWidth},function(a){return a>880?b.removeClass("hide"):b.addClass("hide")})},controller:["$scope","$attrs",function(h,i){return this.groups=[],h.hasRoleOrPerm=c.hasRoleOrPerm,h.$state=b.$state,h.persona_id=f.User().persona_id,h.hasRoleOrPerm(["Admin","Profesor"])&&d.all("grupos").getList().then(function(a){return h.grupos=a},function(a){return console.log("No se pudo traer los grupos: ",a)}),g.contratos().then(function(a){return h.profesores=a},function(a){return console.log("No se pudo traer los profesores: ",a)}),h.listarAsignaturas=function(){var b;return b=e.open({templateUrl:a.views+"areas/listasignaturasPop.tpl.html",controller:"ListasignaturasPopCtrl"}),b.result.then(function(a){})},this.clikeando=function(){},this.closeOthers=function(a){return angular.forEach(this.groups,function(a){return a.menuIsOpen===!0?a.menuIsOpen=!1:void 0})},this.addGroup=function(a){var b;return b=this,this.groups.push(a),a.$on("$destroy",function(c){return b.removeGroup(a)})},this.removeGroup=function(a){var b;return b=this.groups.indexOf(a),-1!==b?this.groups.splice(b,1):void 0},this}]}}]).directive("subMenu",[function(){return{require:"^sidebarMenu",restrict:"A",replace:!0,scope:!0,link:function(a,b,c,d){return a.menuIsOpen=c.menuIsOpen?a.$eval(c.menuIsOpen):!1,c.hija?(a.menuIsOpen===!0&&b.addClass("open"),a.toggleOpen=function(){return a.menuIsOpen===!1?(b.addClass("open"),a.menuIsOpen=!0):(b.removeClass("open"),a.menuIsOpen=!1)}):(d.addGroup(a),a.$watch("menuIsOpen",function(a){return a===!0?b.addClass("open"):b.removeClass("open")}),a.toggleOpen=function(){return a.menuIsOpen===!1?(d.closeOthers(a),a.menuIsOpen=!0):a.menuIsOpen=!1})}}}]).directive("myDropDown",["$document",function(a){return{restrict:"A",replace:!0,scope:!0,link:function(a,b,c){a.menuIsOpen=c.menuIsOpen?a.$eval(c.menuIsOpen):!1,a.menuIsOpen===!0&&b.addClass("open"),a.toggleOpen=function(){a.menuIsOpen===!0?(b.addClass("open"),a.menuIsOpen=!0):(b.removeClass("open"),a.menuIsOpen=!1)}}}}]).directive("stopEvent",[function(){return{restrict:"A",link:function(a,b,c){return b.bind(c.stopEvent,function(a){return a.stopPropagation()})}}}]).directive("toggle",function(){var a,b,c,d,e;return e="selected",b={},a=function(a,c){return b[a]=b[a]||[],-1===b[a].indexOf(c)?b[a].push(c):void 0},c=function(a,c){var d;return d=(b[a]||[]).indexOf(c),-1!==d?b[a].splice(d,1):void 0},d=function(a,c){return angular.forEach(b[a]||[],function(a){return a.removeClass(e)}),c.addClass(e)},{restrict:"A",link:function(b,e,f){var g;return g=f.toggle||"default",a(g,e),e.on("click",function(){return b.$apply(function(){return d(g,e)})}),b.$on("$destroy",function(){return e.off(),c(g,e)})}}}).controller("ListasignaturasPopCtrl",["$scope","$uibModalInstance","Restangular","toastr","$state","Perfil",function(a,b,c,d,e,f){return a.selectAsignatura=function(a){return e.go("panel.notas",{asignatura_id:a}),b.close(a)},c.all("asignaturas/listasignaturas").getList().then(function(b){return a.asignaturas=b},function(a){return console.log("No se pudo traer tus asignaturas, ",a)}),a.cancel=function(){return b.dismiss("cancel")}}])}.call(this),function(){angular.module("myvcFrontApp").directive("updateTitle",["$rootScope","$timeout",function(a,b){return{link:function(c,d){var e;return e=function(a,c,e){var f;return f="MyVc",c.data&&c.data.pageTitle&&(f=c.data.pageTitle),e&&e.username&&(f=e.username+" - MyVc"),b(function(){return d.text(f)},0,!1)},a.$on("$stateChangeSuccess",e)}}}])}.call(this),function(){angular.module("myvcFrontApp").directive("notaRapida",["App","$rootScope","Restangular","toastr","EscalasValorativasServ",function(a,b,c,d,e){return{restrict:"AE",transclude:!0,templateUrl:""+a.views+"directives/notaRapida.tpl.html",link:function(a,c,f){return a.valorNotaRapida=100,a.activado=!1,a.activar=function(){return a.activado?void 0:(a.activado=!0,b.notaRapida.enable=a.activado,d.info("Nota rápida activada","ACTIVADA"))},a.desactivar=function(){return a.activado=!1,b.notaRapida.enable=a.activado,d.info("Nota rápida desactivada","DESACTIVADA")},a.$on("keydown:27",function(b,c){return a.desactivar()}),e.escalas().then(function(b){return a.escalas=b},function(a){return console.log("No se trajeron las escalas valorativas",a)}),a.setValor=function(c){return b.notaRapida.valorNota=c,a.activar()}}}}]).directive("cambiamodel",["$rootScope",function(a){return{restrict:"A",link:function(b,c,d){return b.$watch(d.ngModel,function(b){return a.notaRapida.valorNota=b})}}}]).directive("keypressEvents",["$document","$rootScope",function(a,b){return{restrict:"A",link:function(){return a.bind("keypress keydown",function(a){return 27===a.which?b.$broadcast("keydown:27",a):void 0})}}}]).filter("range",function(){return function(a,b,c){var d,e;for(c=parseInt(c),b=parseInt(b),d=e=b;c>=b?c>=e:e>=c;d=c>=b?++e:--e)a.push(d);return a}}).directive("draggable",[function(){return{restrict:"AE",transclude:!0,replace:!0,scope:{},templateUrl:function(a,b){return angular.isDefined(b.template)?b.template:"/tmpls/draggable-default"},link:function(a,b,c){var d,e,f;return a.obj={id:null,content:"",group:null},a.placeholder=!1,a.obj.content=b.html(),angular.isDefined(c.id)&&(a.obj.id=c.id),angular.isDefined(c.placeholder)&&(a.placeholder=a.$eval(c.placeholder)),f=angular.isDefined(c.options)?a.$eval(c.options):{},angular.isDefined(c.group)&&(a.obj.group=c.group,f.stack="."+c.group),d={start:function(b,c){a.placeholder&&c.helper.wrap('<div class="dragging"></div>'),a.$apply(function(){a.$emit("draggable.started",{obj:a.obj})})},drag:function(b){a.$apply(function(){a.$emit("draggable.dragging")})},stop:function(b,c){a.placeholder&&c.helper.unwrap(),a.$apply(function(){a.$emit("draggable.stopped")})}},e=angular.extend({},f,d),b.draggable(e)}}}]).run(["$templateCache",function(a){return a.put("/tmpls/draggable-default","<div ng-transclude></div>")}])}.call(this),function(){angular.module("myvcFrontApp").directive("withpaddingDir",["$rootScope","$state",function(a,b){return{link:function(c,d){var e,f;return e=function(a,c,e){return b.includes("panel.actividades")?angular.element(d).addClass("no-padding"):angular.element(d).removeClass("no-padding")},f=function(a,c){return b.includes("panel.actividades")?angular.element(d).addClass("no-padding"):angular.element(d).removeClass("no-padding")},a.$on("$stateChangeSuccess",e),a.$on("$viewContentLoaded",f)}}}])}.call(this),function(){angular.module("myvcFrontApp").factory("Perfil",["App","$q","$cookies","$http",function(a,b,c,d){var e;return e={},{setUser:function(a){return e=a},User:function(){return e},save:function(){return e.save()},id:function(){return e.user_id},idioma:function(){return e.idioma_system},setImagen:function(a,b){return e.imagen_id=a,e.imagen_nombre=b},setOficial:function(a,b){return e.foto_id=a,e.foto_nombre=b},nameToShow:function(){return"Usuario"===e.tipo?e.username.toUpperCase():e.nombres+" "+e.apellidos},deleteUser:function(){return e={}}}}])}.call(this),function(){angular.module("myvcFrontApp").factory("AuthService",["Restangular","$state","$http","$cookies","Perfil","$rootScope","AUTH_EVENTS","$q","$filter","toastr",function(a,b,c,d,e,f,g,h,i,j){var k;return k={},k.verificar=function(){var a;return a=h.defer(),e.User().user_id?a.resolve(e.User()):d.get("xtoken")?void 0!==d.get("xtoken")&&"undefined"!==d.get("xtoken")&&"[object Object]"!==d.get("xtoken")?k.login_from_token().then(function(b){return e.setUser(b),a.resolve(b)},function(b){return console.log("No se logueó from token"),a.reject(b)}):(k.borrarToken(),a.reject("Token mal estructurado.")):(console.log("No hay token"),a.resolve("No hay token."),f.$broadcast(g.notAuthenticated)),a.promise},k.verificar_acceso=function(){var a,c;return e.User().user_id||b.go("login"),c=b.current,c.data.needed_permissions?(a=c.data.needed_permissions,k.isAuthorized(a)?void 0:(f.lastState=c.name,k.isAuthenticated()?f.$broadcast(g.notAuthorized):b.transitionTo("login"))):!0},k.login_credentials=function(i){var l;return l=h.defer(),k.borrarToken(),a.one("login").post("",i).then(function(a){return a.token?(d.put("xtoken",a.token),c.defaults.headers.common.Authorization="Bearer "+d.get("xtoken"),e.setUser(a),f.$broadcast(g.loginSuccess),l.resolve(a)):(f.$broadcast(g.loginFailed),l.reject("Error en login"))},function(a){return console.log("No se pudo loguear. ",a,b),f.$broadcast(g.loginFailed),a.data?a.data.error&&("Token expirado"===a.data.error||"token_expired"===a.error?(j.warning("La sesión ha expirado"),"login"!==b.current.name&&b.go("login")):f.$broadcast(g.loginFailed)):j.error("No parece haber comunicación con el servidor"),l.reject("Error en login")}),l.promise},k.login_from_token=function(){var b,e;return b=h.defer(),c.defaults.headers.common.Authorization="Bearer "+d.get("xtoken"),e=a.one("login").post().then(function(a){return f.$broadcast(g.loginSuccess),b.resolve(a)},function(a){return b.reject("Error en login con token.")}),b.promise},k.logout=function(a){return f.lastState=null,f.lastStateParam=null,k.borrarToken(),e.deleteUser(),b.transitionTo("login")},k.borrarToken=function(){return d.remove("xtoken"),delete c.defaults.headers.common.Authorization},k.isAuthenticated=function(){return!!e.User().user_id},k.isAuthorized=function(a){var b,c;return c=e.User(),c.is_superuser?!0:(angular.isArray(a)||(a=[a]),angular.isArray(c.perms)?(b=[],_.each(a,function(a){return-1!==c.perms.indexOf(a)?b.push(a):void 0}),k.isAuthenticated()&&b.length>0):a.length>0?!1:!0)},k.hasRoleOrPerm=function(a,b){var c;if(!angular.isArray(a)){if(!a)return!1;a=[a]}return c=[],_.each(a,function(a){var b;return b=[],b=i("filter")(e.User().roles,{name:a}),b&&b.length>0?c.push(a):void 0}),c.length>0},k}])}.call(this),function(){angular.module("myvcFrontApp").factory("NotasServ",["Restangular","$q",function(a,b){var c;return c={},c.detalladas=function(c){var d;return d=b.defer(),a.all("notas/detailed/"+c).getList().then(function(a){return d.resolve(a)},function(a){return console.log("No se trajeron las notas. ",a),d.reject(a)}),d.promise},c}]).factory("EscalasValorativasServ",["Restangular","$q",function(a,b){var c,d;return c=[],d={},d.escalas=function(d){var e;return e=b.defer(),c.length>0?e.resolve(c):a.all("escalas").getList().then(function(a){return c=a,e.resolve(c)},function(a){return console.log("No se trajeron las escalas. ",a),e.reject(a)}),e.promise},d}]).factory("AusenciasServ",["Restangular","$q",function(a,b){var c;return c={},c.detalladas=function(c){var d;return d=b.defer(),a.one("ausencias/detailed",c).get().then(function(a){return d.resolve(a)},function(a){return console.log("No se trajeron las ausencias. ",a),d.reject(a)}),d.promise},c}]).factory("ComportamientoServ",["Restangular","$q",function(a,b){var c;return c={},c.detallados=function(c){var d;return d=b.defer(),a.one("nota_comportamiento/detailed",c).get().then(function(a){return d.resolve(a)},function(a){return console.log("No se trajeron los comportamientos. ",a),d.reject(a)}),d.promise},c}])}.call(this),function(){angular.module("myvcFrontApp").factory("ProfesoresServ",["Restangular","$q",function(a,b){var c,d;return d=[],c={},c.contratos=function(){var c;return c=b.defer(),a.all("contratos").getList().then(function(a){return c.resolve(a)},function(a){return console.log("No se trajeron los profesores contratados. ",a),c.reject(a)}),c.promise},c}])}.call(this),angular.module("ngLocale",[],["$provide",function(a){var b={ZERO:"zero",ONE:"one",TWO:"two",FEW:"few",MANY:"many",OTHER:"other"};a.value("$locale",{DATETIME_FORMATS:{AMPMS:["a. m.","p. m."],DAY:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"],ERANAMES:["antes de Cristo","después de Cristo"],ERAS:["a. C.","d. C."],FIRSTDAYOFWEEK:0,MONTH:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],SHORTDAY:["dom.","lun.","mar.","mié.","jue.","vie.","sáb."],SHORTMONTH:["ene.","feb.","mar.","abr.","may.","jun.","jul.","ago.","sept.","oct.","nov.","dic."],STANDALONEMONTH:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],WEEKENDRANGE:[5,6],fullDate:"EEEE, d 'de' MMMM 'de' y",longDate:"d 'de' MMMM 'de' y",medium:"d MMM y H:mm:ss",mediumDate:"d MMM y",mediumTime:"H:mm:ss","short":"d/M/yy H:mm",shortDate:"d/M/yy",shortTime:"H:mm"},NUMBER_FORMATS:{CURRENCY_SYM:"€",DECIMAL_SEP:",",GROUP_SEP:".",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-",negSuf:" ¤",posPre:"",posSuf:" ¤"}]},id:"es-es",localeID:"es_ES",pluralCat:function(a,c){return 1==a?b.ONE:b.OTHER}})}]);